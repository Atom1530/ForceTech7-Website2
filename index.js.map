{"version":3,"file":"index.js","sources":["../src/js/api.js","../src/js/artists/lib/sound.js","../src/js/artists/features/api.js","../src/js/artists/features/state.js","../src/js/artists/lib/scroll-lock.js","../src/js/artists/features/player.js","../src/js/artists/features/zoom.js","../src/js/artists/features/modal.js","../src/js/artists/features/grid.js","../src/js/artists/features/router.js","../src/js/artists/features/prefetch.js","../src/js/artists/features/init.js","../src/js/artists/index.js","../src/js/header.js","../src/js/comments.js"],"sourcesContent":["import axios from \"axios\";\n\n/* ===== Env & logging ===== */\nconst IS_DEV =\n  /localhost|127\\.0\\.0\\.1/.test(location.hostname) ||\n  (document.documentElement.getAttribute(\"data-env\") || \"\").toLowerCase() === \"dev\";\n\nconst logWarn = (...args) => {\n  if (IS_DEV) console.warn(...args);\n};\n\n/* ===== Axios ===== */\nconst api = axios.create({\n  baseURL: \"https://sound-wave.b.goit.study/api\",\n  timeout: 15000,\n});\n\n/* ===== API ===== */\nexport async function fetchArtists(\n  { page = 1, limit = 8, genre = \"\", sort = \"\", name = \"\" } = {}\n) {\n  try {\n    const params = {\n      page: Math.max(1, Number(page) || 1),\n      limit: Math.max(1, Number(limit) || 8),\n    };\n\n    const s = String(sort).toLowerCase();\n    if (s === \"asc\" || s === \"desc\") params.sortName = s;\n\n    const g = String(genre).trim();\n    if (g && g !== \"All Genres\") params.genre = g;\n\n    const n = String(name).trim();\n    if (n.length >= 1) params.name = n;\n\n    const { data } = await api.get(\"/artists\", { params });\n    return {\n      artists: Array.isArray(data?.artists) ? data.artists : [],\n      totalArtists: Number(data?.totalArtists || 0),\n      page: Number(data?.page || params.page),\n      limit: Number(data?.limit || params.limit),\n    };\n  } catch (err) {\n    logWarn(\"[api] fetchArtists\", err?.message || err);\n    try { window.__toast?.error(\"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞—Ä—Ç–∏—Å—Ç–æ–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.\"); } catch {}\n    return { artists: [], totalArtists: 0, page: 1, limit };\n  }\n}\n\nexport async function fetchGenres() {\n  try {\n    const { data } = await api.get(\"/genres\");\n    const raw = Array.isArray(data) ? data : (data?.genres || []);\n    const names = raw\n      .map((g) =>\n        typeof g === \"string\"\n          ? g\n          : g?.name || g?.title || g?.genre || g?.label || \"\"\n      )\n      .filter(Boolean);\n    const uniq = [...new Set(names)];\n    return [\"All Genres\", ...uniq];\n  } catch (err) {\n    logWarn(\"[api] fetchGenres\", err?.message || err);\n    try { window.__toast?.error(\"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∂–∞–Ω—Ä—ã.\"); } catch {}\n    return [\"All Genres\"];\n  }\n}\n\nexport async function fetchArtist(id) {\n  try {\n    const { data } = await api.get(`/artists/${id}`);\n    return data || null;\n  } catch (err) {\n    logWarn(\"[api] fetchArtist\", err?.message || err);\n    try { window.__toast?.error(\"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞—Ä—Ç–∏—Å—Ç–∞.\"); } catch {}\n    return null;\n  }\n}\n\nexport async function fetchArtistAlbums(id) {\n  try {\n    const { data } = await api.get(`/artists/${id}/albums`);\n\n    if (Array.isArray(data)) return data;\n    if (Array.isArray(data?.albumsList)) return data.albumsList;\n    if (Array.isArray(data?.albums)) return data.albums;\n\n    return [];\n  } catch (err) {\n    logWarn(\"[api] albums\", err?.message || err);\n    try { window.__toast?.error(\"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–ª—å–±–æ–º—ã.\"); } catch {}\n    return [];\n  }\n}\n","\n// –ú—è–≥–∫–∏–π ¬´–∫–ª–∞—Ü¬ª (tap) –∏ —á—É—Ç—å –∏–Ω–æ–π –∑–≤—É–∫ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (page)\nlet ctx, master, comp, postLP;\nlet inited = false;\n\nfunction init() {\n  if (inited) return;\n  const AC = window.AudioContext || window.webkitAudioContext;\n  if (!AC) return;\n  ctx = new AC();\n\n  comp = ctx.createDynamicsCompressor();\n  comp.threshold.value = -26;\n  comp.knee.value = 22;\n  comp.ratio.value = 6;\n  comp.attack.value = 0.004;\n  comp.release.value = 0.08;\n\n  postLP = ctx.createBiquadFilter();\n  postLP.type = \"lowpass\";\n  postLP.frequency.value = 2300;\n  postLP.Q.value = 0.6;\n\n  master = ctx.createGain();\n  master.gain.value = 0.11;\n\n  master.connect(postLP);\n  postLP.connect(comp);\n  comp.connect(ctx.destination);\n\n  // –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ –ø–µ—Ä–≤–æ–º –∂–µ—Å—Ç–µ\n  const unlock = () => {\n    try { ctx.resume(); } catch {}\n    window.removeEventListener(\"pointerdown\", unlock);\n    window.removeEventListener(\"keydown\", unlock);\n    window.removeEventListener(\"touchstart\", unlock);\n  };\n  window.addEventListener(\"pointerdown\", unlock, { once: true, passive: true });\n  window.addEventListener(\"keydown\", unlock, { once: true });\n  window.addEventListener(\"touchstart\", unlock, { once: true, passive: true });\n\n  inited = true;\n}\n\nfunction resume() { if (ctx && ctx.state === \"suspended\") ctx.resume(); }\n\nfunction tap() {\n  if (!inited) init();\n  if (!ctx) return;\n  resume();\n  const now = ctx.currentTime + 0.004;\n\n  // —à—É–º–æ–≤–æ–π —â–µ–ª—á–æ–∫\n  const durNoise = 0.055;\n  const nsrc = ctx.createBufferSource();\n  const nbuf = ctx.createBuffer(1, Math.max(32, (ctx.sampleRate * durNoise) | 0), ctx.sampleRate);\n  const ch = nbuf.getChannelData(0);\n  for (let i = 0; i < ch.length; i++) {\n    const t = i / ch.length;\n    ch[i] = (Math.random() * 2 - 1) * Math.pow(1 - t, 2);\n  }\n  nsrc.buffer = nbuf;\n\n  const bp = ctx.createBiquadFilter();\n  bp.type = \"bandpass\"; bp.frequency.value = 2050; bp.Q.value = 0.9;\n  const hp = ctx.createBiquadFilter();\n  hp.type = \"highpass\"; hp.frequency.value = 360; hp.Q.value = 0.7;\n\n  const ng = ctx.createGain();\n  ng.gain.setValueAtTime(0.0001, now);\n  ng.gain.linearRampToValueAtTime(0.45, now + 0.004);\n  ng.gain.exponentialRampToValueAtTime(0.0001, now + 0.055);\n\n  nsrc.connect(bp); bp.connect(hp); hp.connect(ng); ng.connect(master);\n  nsrc.start(now); nsrc.stop(now + 0.06);\n\n  // –ª—ë–≥–∫–∏–π –≤–µ—Ä—Ö–Ω–∏–π –æ–±–µ—Ä—Ç–æ–Ω\n  const osc = ctx.createOscillator();\n  osc.type = \"triangle\"; osc.frequency.setValueAtTime(2100, now);\n  const og = ctx.createGain();\n  og.gain.setValueAtTime(0.0001, now);\n  og.gain.linearRampToValueAtTime(0.20, now + 0.003);\n  og.gain.exponentialRampToValueAtTime(0.0001, now + 0.05);\n  osc.connect(og); og.connect(master);\n  osc.start(now); osc.stop(now + 0.055);\n\n  // —á—É—Ç—å ¬´—Ç–µ–ª–∞¬ª\n  const low = ctx.createOscillator();\n  low.type = \"sine\"; low.frequency.setValueAtTime(165, now);\n  const lg = ctx.createGain();\n  lg.gain.setValueAtTime(0.0001, now);\n  lg.gain.linearRampToValueAtTime(0.05, now + 0.003);\n  lg.gain.exponentialRampToValueAtTime(0.0001, now + 0.042);\n  low.connect(lg); lg.connect(master);\n  low.start(now); low.stop(now + 0.045);\n}\n\nfunction page() {\n  if (!inited) init();\n  if (!ctx) return;\n  resume();\n  const now = ctx.currentTime + 0.003;\n  const osc = ctx.createOscillator();\n  osc.type = \"triangle\"; osc.frequency.setValueAtTime(1750, now);\n  const g = ctx.createGain();\n  g.gain.setValueAtTime(0.0001, now);\n  g.gain.linearRampToValueAtTime(0.17, now + 0.003);\n  g.gain.exponentialRampToValueAtTime(0.0001, now + 0.06);\n  osc.connect(g); g.connect(master);\n  osc.start(now); osc.stop(now + 0.065);\n}\n\nexport const UISound = { tap, page };\nexport default UISound;\n","\nimport {\n  fetchArtists as _fetchArtists,\n  fetchGenres  as _fetchGenres,\n  fetchArtist  as _fetchArtist,\n  fetchArtistAlbums as _fetchArtistAlbums,\n} from \"../../api.js\";\n\n// ---------- helpers ----------\nconst normId = (o) => o?.idArtist || o?.id || o?._id || o?.artistId || \"\";\n\nconst normGenres = (o) => {\n  if (Array.isArray(o?.genres)) return o.genres;\n  if (typeof o?.strGenre === \"string\" && o.strGenre.trim())\n    return o.strGenre.split(/,\\s*/).filter(Boolean);\n  if (o?.genre) return [o.genre];\n  return [];\n};\n\nconst NOPHOTO = \"https://via.placeholder.com/960x540?text=No+Image\";\n\nconst normArtist = (o = {}) => ({\n  id: normId(o),\n  name: o.strArtist || o.name || \"Unknown artist\",\n  image: o.strArtistThumb || o.thumb || o.photo || o.image || NOPHOTO,\n  country: o.strCountry || o.country || \"N/A\",\n  members: o.intMembers || o.members || \"N/A\",\n  gender:  o.strGender || o.sex || \"N/A\",\n  biography: o.strBiographyEN || o.biography || o.about || \"\",\n  genres: normGenres(o),\n  formedYear: o.intFormedYear || o.formedYear || o.yearStart || null,\n  endedYear:  o.intDisbandedYear || o.intDiedYear || o.disbandedYear || o.yearEnd || null,\n});\n\nconst normTrack = (t = {}) => ({\n  title: t.strTrack || t.title || t.name || \"‚Äî\",\n  duration: Number(t.intDuration ?? t.duration ?? t.time ?? 0),\n  youtube: t.strMusicVid || t.youtube || t.youtube_url || t.url || t.movie || \"\",\n});\n\nconst normAlbum = (a = {}) => {\n  const rawTracks =\n    Array.isArray(a.tracks) ? a.tracks :\n    Array.isArray(a.songs)  ? a.songs  :\n    Array.isArray(a.track)  ? a.track  : [];\n  return {\n    title: a.strAlbum || a.title || a.name || \"Album\",\n    tracks: rawTracks.map(normTrack),\n  };\n};\n\n// ---------- exported API (normalized) ----------\nexport async function fetchArtists(params) {\n  const res = await _fetchArtists(params);\n  const list = Array.isArray(res?.artists) ? res.artists\n             : Array.isArray(res)          ? res\n             : [];\n  const artists = list.map(normArtist);\n  const totalArtists = Number(res?.totalArtists ?? res?.total ?? artists.length);\n  return { artists, totalArtists };\n}\n\nexport async function fetchGenres() {\n  const res = await _fetchGenres();\n  if (Array.isArray(res)) return res;\n  if (Array.isArray(res?.genres)) return res.genres;\n  return [];\n}\n\nexport async function fetchArtist(id) {\n  const res = await _fetchArtist(id);\n  const obj = Array.isArray(res) ? res[0]\n            : Array.isArray(res?.artists) ? res.artists[0]\n            : res;\n  return obj ? normArtist(obj) : null;\n}\n\nexport async function fetchArtistAlbums(id) {\n  const res = await _fetchArtistAlbums(id);\n  const list = Array.isArray(res) ? res\n             : Array.isArray(res?.albums) ? res.albums\n             : Array.isArray(res?.album)  ? res.album\n             : [];\n  return list.map(normAlbum);\n}\n\n\n\n","\n// –ï–¥–∏–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ–∫—Ü–∏–∏ Artists + –ø–æ–¥–ø–∏—Å–∫–∏.\n\n\n\nconst _state = {\n  page: 1,\n  limit: 8,\n  total: 0,\n  sort: \"\",\n  genre: \"\",\n  q: \"\",\n  isMobilePanelOpen: false,\n};\n\nconst listeners = new Set();\nfunction snapshot() { return { ..._state }; }\nfunction notify() {\n  const s = snapshot();\n  listeners.forEach(fn => { try { fn(s); } catch {} });\n}\n\nexport function subscribe(fn) {\n  if (typeof fn !== \"function\") return () => {};\n  listeners.add(fn);\n  return () => listeners.delete(fn);\n}\n\nexport function getState() { return snapshot(); }\n\n/** –ü–∞–∫–µ—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: setState({ page, genre, ... })\n *  –ï—Å–ª–∏ –º–µ–Ω—è–µ–º genre/sort/q ‚Äî —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ 1 \n */\nexport function setState(patch = {}) {\n  const resetPage = (\"genre\" in patch) || (\"sort\" in patch) || (\"q\" in patch);\n  const next = { ..._state, ...patch };\n  if (resetPage && !(\"page\" in patch)) next.page = 1;\n\n  // –∫–ª–∞–º–ø—ã\n  next.page  = Math.max(1, Number(next.page)  || 1);\n  next.limit = Math.max(1, Number(next.limit) || 8);\n  next.total = Math.max(0, Number(next.total) || 0);\n\n  let changed = false;\n  for (const k of Object.keys(next)) {\n    if (_state[k] !== next[k]) { _state[k] = next[k]; changed = true; }\n  }\n  if (changed) notify();\n  return snapshot();\n}\n\nexport function resetFilters() {\n  return setState({ page: 1, sort: \"\", genre: \"\", q: \"\" });\n}\n\n/* ===== –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø—Ä–µ–∂–Ω–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º ===== */\nexport const ArtistState = {\n  get() { return snapshot(); },\n\n  setPage(p)  { setState({ page: Math.max(1, Number(p) || 1) }); },\n  setLimit(n) { setState({ limit: Math.max(1, Number(n) || 8) }); },\n\n  setSort(v)  { setState({ sort: v || \"\" }); },\n  setGenre(v) { setState({ genre: v || \"\" }); },\n  setQuery(v) { setState({ q: (v || \"\").trim() }); },\n\n  setTotal(n) { setState({ total: Math.max(0, Number(n) || 0) }); },\n\n  setMobilePanel(open) { setState({ isMobilePanelOpen: !!open }); },\n\n  reset() { resetFilters(); },\n};\n","// –†–µ—Ñ-—Å—á—ë—Ç—á–∏–∫ + ¬´–∞–≤–∞—Ä–∏–π–Ω–∞—è¬ª —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞\nlet depth = 0;\nlet savedY = 0;\n\nexport function lockScroll() {\n  if (depth++ === 0) {\n    savedY = window.scrollY || document.documentElement.scrollTop || 0;\n    const s = document.body.style;\n    s.position = \"fixed\";\n    s.top = `-${savedY}px`;\n    s.left = \"0\";\n    s.right = \"0\";\n    s.width = \"100%\";\n    document.body.classList.add(\"scroll-locked\");\n  }\n}\n\nexport function unlockScroll(force = false) {\n  if (force) depth = 1;                // –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ ¬´—Å–≤–µ—Å—Ç–∏¬ª –∫ –Ω—É–ª—é\n  if (depth > 0 && --depth === 0) {\n    const s = document.body.style;\n    s.position = s.top = s.left = s.right = s.width = \"\";\n    window.scrollTo(0, savedY);\n    document.body.classList.remove(\"scroll-locked\");\n  }\n}\n\n// –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π ‚Äî –¥–æ—Å—Ç—É–ø–Ω–æ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏: window.__unlockScroll()\nexport function emergencyUnlock() { unlockScroll(true); }\nif (typeof window !== \"undefined\") {\n  window.__unlockScroll = emergencyUnlock;\n  // –µ—Å–ª–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ ‚Äî —Å–Ω–∏–º–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É\n  window.addEventListener(\"pageshow\", () => emergencyUnlock());\n}\n","// src/js/artists/features/player.js\n// –ú–∏–Ω–∏-–ø–ª–µ–µ—Ä (singleton). –û—á–µ—Ä–µ–¥—å, next/prev, –∞–≤—Ç–æ–ø–µ—Ä–µ—Ö–æ–¥, —Ñ–∏–∫—Å—ã –∞–≤—Ç–æ–ø–ª–µ—è.\n\nimport { UISound } from \"../lib/sound.js\";\n\nlet _instance = null;\n\nfunction loadYTAPI() {\n  if (window.YT && window.YT.Player) return Promise.resolve();\n  if (loadYTAPI._p) return loadYTAPI._p;\n  loadYTAPI._p = new Promise((res, rej) => {\n    const s = document.createElement(\"script\");\n    s.src = \"https://www.youtube.com/iframe_api\";\n    s.onerror = () => rej(new Error(\"YT API load failed\"));\n    document.head.appendChild(s);\n    const t = setTimeout(() => rej(new Error(\"YT API timeout\")), 15000);\n    window.onYouTubeIframeAPIReady = () => { clearTimeout(t); res(); };\n  });\n  return loadYTAPI._p;\n}\n\nconst isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\nfunction getYouTubeId(urlOrId) {\n  if (!urlOrId) return \"\";\n  if (/^[\\w-]{11}$/.test(urlOrId)) return urlOrId;\n  try {\n    const u = new URL(urlOrId);\n    if (/youtu\\.be$/.test(u.hostname)) return u.pathname.slice(1);\n    if (u.searchParams.get(\"v\")) return u.searchParams.get(\"v\");\n    const m = u.pathname.match(/\\/(embed|shorts|v)\\/([^/?#]+)/);\n    return m ? m[2] : \"\";\n  } catch { return \"\"; }\n}\nconst clamp = (v, a, b) => Math.min(b, Math.max(a, v));\nconst shuffleArr = (arr) => {\n  const a = arr.slice();\n  for (let i = a.length - 1; i > 0; i--) {\n    const j = (Math.random() * (i + 1)) | 0;\n    [a[i], a[j]] = [a[j], a[i]];\n  }\n  return a;\n};\nfunction fmtTimeSec(sec) {\n  sec = Math.max(0, Math.round(Number(sec) || 0));\n  const m = Math.floor(sec / 60);\n  const s = String(sec % 60).padStart(2, \"0\");\n  return `${m}:${s}`;\n}\n\nexport function createMiniPlayer() {\n  if (_instance) return _instance;\n\n  // ---------- DOM ----------\n  const dock = document.createElement(\"div\");\n  dock.className = \"am-player\";\n  dock.innerHTML = `\n    <div class=\"am-player__inner\">\n      <div class=\"am-player__frame\"><div class=\"am-player__host\" id=\"am-player-host\"></div></div>\n\n      <button class=\"am-player__close\" type=\"button\" aria-label=\"Close\">√ó</button>\n\n      <div class=\"am-player__bar\">\n        <div class=\"am-player__left\">\n          <button class=\"am-player__skip am-player__prev\" type=\"button\" aria-label=\"Previous\">‚èÆ</button>\n          <button class=\"am-player__play\" type=\"button\" aria-label=\"Play/Pause\">‚ñ∂</button>\n          <button class=\"am-player__skip am-player__next\" type=\"button\" aria-label=\"Next\">‚è≠</button>\n          <span class=\"am-player__time\"><span class=\"am-player__cur\">0:00</span> / <span class=\"am-player__dur\">0:00</span></span>\n        </div>\n\n        <div class=\"am-player__progresswrap\">\n          <input class=\"am-player__progress\" type=\"range\" min=\"0\" max=\"1000\" value=\"0\" step=\"1\" aria-label=\"Seek\">\n        </div>\n\n        <div class=\"am-player__right\">\n          <a class=\"am-player__yt\" href=\"#\" target=\"_blank\" rel=\"noopener noreferrer\">Open YouTube ‚Üó</a>\n          <button class=\"am-player__mute\" type=\"button\" aria-label=\"Mute/Unmute\">üîà</button>\n          <input class=\"am-player__slider\" type=\"range\" min=\"0\" max=\"100\" value=\"60\" step=\"1\" aria-label=\"Volume\">\n        </div>\n      </div>\n    </div>\n  `;\n  document.body.appendChild(dock);\n\n  // refs\n  const host    = dock.querySelector(\"#am-player-host\");\n  const btnClose= dock.querySelector(\".am-player__close\");\n  const btnPlay = dock.querySelector(\".am-player__play\");\n  const btnPrev = dock.querySelector(\".am-player__prev\");\n  const btnNext = dock.querySelector(\".am-player__next\");\n  const btnMute = dock.querySelector(\".am-player__mute\");\n  const aYT     = dock.querySelector(\".am-player__yt\");\n  const vol     = dock.querySelector(\".am-player__slider\");\n  const prog    = dock.querySelector(\".am-player__progress\");\n  const tCur    = dock.querySelector(\".am-player__cur\");\n  const tDur    = dock.querySelector(\".am-player__dur\");\n\n  // ---------- state ----------\n  let yt = null;\n  let ready = false;\n  let duration = 0;\n  let timer = null;\n  let muted = false;\n  let volVal = 60;\n  let userSeeking = false;\n\n  // –æ—á–µ—Ä–µ–¥—å\n  let queue = [];\n  let qi = -1;\n  let loop = false;\n\n  if (isIOS) {\n    vol.disabled = true;\n    vol.title = \"On iOS the volume is hardware-only\";\n  }\n\n  // ---------- UI ----------\n  function uiShow(on) {\n    if (on) {\n      dock.classList.add(\"am-player--active\");\n      dock.style.pointerEvents = \"auto\";\n    } else {\n      dock.classList.remove(\"am-player--active\");\n      dock.style.pointerEvents = \"\";\n    }\n  }\n  function uiPlayIcon(isPlaying) { btnPlay.textContent = isPlaying ? \"‚è∏\" : \"‚ñ∂\"; }\n  function uiMuteIcon(isMuted) { btnMute.textContent = isMuted ? \"üîá\" : \"üîà\"; }\n  function uiSetTime(cur, dur) {\n    tCur.textContent = fmtTimeSec(cur);\n    tDur.textContent = fmtTimeSec(dur);\n    if (!userSeeking) {\n      const v = dur > 0 ? Math.round((cur / dur) * 1000) : 0;\n      prog.value = String(v);\n    }\n  }\n  function clearTimer() { if (timer) { clearInterval(timer); timer = null; } }\n  function startTimer() {\n    clearTimer();\n    timer = setInterval(() => {\n      if (!ready || !yt || typeof yt.getCurrentTime !== \"function\") return;\n      const cur = yt.getCurrentTime() || 0;\n      const dur = duration || yt.getDuration() || 0;\n      duration = dur;\n      uiSetTime(cur, dur);\n    }, 250);\n  }\n\n  // ---------- YT ----------\n  function ensureYT(id, userGesture = false) {\n    return loadYTAPI().then(() => {\n      if (yt) { try { yt.destroy(); } catch {} yt = null; }\n      host.innerHTML = `<div id=\"am-player-yt\"></div>`;\n      yt = new YT.Player(\"am-player-yt\", {\n        host: \"https://www.youtube-nocookie.com\",\n        videoId: id,\n        playerVars: {\n          autoplay: userGesture ? 1 : 0,\n          playsinline: 1,\n          rel: 0,\n          modestbranding: 1,\n          controls: 1,\n          enablejsapi: 1,\n          origin: location.origin\n        },\n        events: {\n          onReady: () => {\n            ready = true;\n            duration = yt.getDuration() || 0;\n            uiSetTime(0, duration);\n            try { if (!isIOS && typeof yt.setVolume === \"function\") yt.setVolume(volVal); } catch {}\n            if (userGesture) { try { yt.unMute?.(); yt.playVideo?.(); } catch {} }\n            uiPlayIcon(true);\n            startTimer();\n          },\n          onStateChange: (e) => {\n            if (e.data === YT.PlayerState.PLAYING) {\n              uiPlayIcon(true);\n              startTimer();\n            } else if (e.data === YT.PlayerState.PAUSED) {\n              uiPlayIcon(false);\n              clearTimer();\n            } else if (e.data === YT.PlayerState.ENDED) {\n              uiPlayIcon(false);\n              clearTimer();\n              autoNext();\n            }\n          }\n        }\n      });\n    });\n  }\n\n  // ---------- queue helpers ----------\n  function playByIndex(idx, userGesture = false) {\n    if (!queue.length) return;\n    qi = clamp(idx, 0, queue.length - 1);\n    const id = queue[qi];\n    aYT.href = `https://www.youtube.com/watch?v=${id}`;\n    uiShow(true);\n    ready = false; duration = 0; clearTimer();\n    return ensureYT(id, userGesture);\n  }\n  function autoNext() {\n    if (!queue.length) return;\n    if (qi < queue.length - 1) playByIndex(qi + 1, false);\n    else if (loop) playByIndex(0, false);\n  }\n\n  // ---------- UI events (–¥–æ–±–∞–≤–ª–µ–Ω—ã UISound.tap) ----------\n  btnClose.addEventListener(\"click\", () => {\n    UISound?.tap?.();\n    try { yt?.stopVideo?.(); yt?.destroy?.(); } catch {}\n    yt = null; ready = false; duration = 0; clearTimer();\n    uiShow(false);\n    queue = []; qi = -1;\n  });\n\n  btnPlay.addEventListener(\"click\", () => {\n    UISound?.tap?.();\n    if (!ready || !yt) return;\n    const s = yt.getPlayerState ? yt.getPlayerState() : -1;\n    if (s === YT.PlayerState.PLAYING) { yt.pauseVideo?.(); uiPlayIcon(false); }\n    else { yt.playVideo?.(); uiPlayIcon(true); }\n  });\n\n  btnPrev.addEventListener(\"click\", () => {\n    UISound?.tap?.();\n    if (!queue.length) return;\n    playByIndex(qi > 0 ? qi - 1 : (loop ? queue.length - 1 : 0), true);\n  });\n\n  btnNext.addEventListener(\"click\", () => {\n    UISound?.tap?.();\n    if (!queue.length) return;\n    playByIndex(qi < queue.length - 1 ? qi + 1 : (loop ? 0 : qi), true);\n  });\n\n  btnMute.addEventListener(\"click\", () => {\n    UISound?.tap?.();\n    if (!yt) return;\n    const willMute = !yt.isMuted?.();\n    if (willMute) yt.mute?.(); else yt.unMute?.();\n    uiMuteIcon(willMute);\n  });\n\n  vol.addEventListener(\"input\", () => {\n    // –±–µ–∑ –∑–≤—É–∫–∞, —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑–¥—Ä–∞–∂–∞—Ç—å –ø—Ä–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–∏\n    const v = Number(vol.value) || 0;\n    if (!isIOS) yt?.setVolume?.(v);\n    volVal = v;\n    const nowMuted = v === 0;\n    if (nowMuted && !yt?.isMuted?.()) yt?.mute?.();\n    if (!nowMuted && yt?.isMuted?.()) yt?.unMute?.();\n    uiMuteIcon(yt?.isMuted?.() ?? false);\n  });\n\n  prog.addEventListener(\"input\", () => {\n    // —Ç–∏—Ö–æ\n    userSeeking = true;\n    const v = Number(prog.value) || 0;\n    const sec = duration > 0 ? (v / 1000) * duration : 0;\n    tCur.textContent = fmtTimeSec(sec);\n  });\n  prog.addEventListener(\"change\", () => {\n    UISound?.tap?.();\n    userSeeking = false;\n    if (!yt || !duration) return;\n    const v = Number(prog.value) || 0;\n    const sec = (v / 1000) * duration;\n    yt.seekTo?.(sec, true);\n  });\n\n  // ---------- Public API ----------\n  async function open(urlOrId) {\n    const id = getYouTubeId(urlOrId);\n    if (!id) return;\n    queue = [id]; qi = 0;\n    aYT.href = `https://www.youtube.com/watch?v=${id}`;\n    uiShow(true);\n    await ensureYT(id, true);\n  }\n\n  async function openQueue(list, opts = {}) {\n    const ids = (list || []).map(getYouTubeId).filter(Boolean);\n    if (!ids.length) return;\n    loop = !!opts.loop;\n    queue = opts.shuffle ? shuffleArr(ids) : ids.slice();\n    const start = clamp(Number(opts.startIndex ?? 0) || 0, 0, queue.length - 1);\n    await playByIndex(start, true);\n  }\n\n  function next() { if (queue.length) playByIndex(qi < queue.length - 1 ? qi + 1 : (loop ? 0 : qi), true); }\n  function prev() { if (queue.length) playByIndex(qi > 0 ? qi - 1 : (loop ? queue.length - 1 : 0), true); }\n  function isActive() { return dock.classList.contains(\"am-player--active\"); }\n  function close() { const ev = new Event(\"click\"); btnClose.dispatchEvent(ev); }\n  function ensureAudible() { try { yt?.unMute?.(); yt?.playVideo?.(); } catch {} }\n\n  _instance = { open, openQueue, next, prev, isActive, close, ensureAudible };\n  return _instance;\n}\n","\n// –û–≤–µ—Ä–ª–µ–π –∑—É–º–∞: –±–µ–∑ –∏—Å–∫–∞–∂–µ–Ω–∏–π –Ω–∞ –º–æ–±/—Ç–∞–± + pinch/zoom/pan + –∫–æ–ª–µ—Å–æ/–¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫\n\nlet overlay, dialogEl, stageEl, imgEl, linkEl, closeBtn, backdropEl;\nlet isPanning = false, startX = 0, startY = 0, curX = 0, curY = 0, scale = 1;\nlet baseW = 0, baseH = 0, stageW = 0, stageH = 0;\nconst activePointers = new Map();\nlet pinchActive = false, pinchBaseDist = 0, pinchBaseScale = 1;\n\nconst clamp = (v, min, max) => Math.max(min, Math.min(max, v));\nconst dist = (a, b) => Math.hypot(a.x - b.x, a.y - b.y);\nconst midpoint = (a, b) => ({ x: (a.x + b.x) / 2, y: (a.y + b.y) / 2 });\n\n/* ---------- ensure ---------- */\nfunction ensureZoom() {\n  if (overlay) return;\n\n  overlay = document.createElement(\"div\");\n  overlay.className = \"am-zoom\";\n  overlay.innerHTML = `\n    <div class=\"am-zoom__backdrop\"></div>\n    <div class=\"am-zoom__dialog\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Image preview\">\n      <div class=\"am-zoom__stage\">\n        <img class=\"am-zoom__img\" alt=\"\">\n      </div>\n      <div class=\"am-zoom__bar\">\n        <a class=\"am-zoom__open\" href=\"#\" target=\"_blank\" rel=\"noopener noreferrer\">Open original ‚Üó</a>\n        <button class=\"am-zoom__close\" type=\"button\" aria-label=\"Close\">√ó</button>\n      </div>\n    </div>`;\n  document.body.appendChild(overlay);\n\n  // –±–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–µ–≤—ã–µ —Ñ–æ–ª–±—ç–∫–∏ (–µ—Å–ª–∏ –≤–¥—Ä—É–≥ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π CSS –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω)\n  Object.assign(overlay.style, { position: \"fixed\", inset: \"0\", zIndex: \"6000\", display: \"none\" });\n  dialogEl = overlay.querySelector(\".am-zoom__dialog\");\n  Object.assign(dialogEl.style, {\n    position: \"absolute\", inset: \"0\", display: \"grid\",\n    gridTemplateRows: \"1fr auto\", gap: \"12px\", padding: \"16px\"\n  });\n\n  backdropEl = overlay.querySelector(\".am-zoom__backdrop\");\n  Object.assign(backdropEl.style, { position: \"absolute\", inset: \"0\", background: \"rgba(0,0,0,.7)\" });\n\n  stageEl = overlay.querySelector(\".am-zoom__stage\");\n  Object.assign(stageEl.style, {\n    position: \"relative\",\n    background: \"#000\",\n    borderRadius: \"12px\",\n    overflow: \"hidden\",\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    minHeight: \"240px\",\n    height: \"calc(100vh - 140px)\",\n    touchAction: \"none\" // –∂–µ—Å—Ç—ã ‚Äî –Ω–∞—à–∏–º–∏ —Ä—É–∫–∞–º–∏\n  });\n\n  imgEl = overlay.querySelector(\".am-zoom__img\");\n  // –≤–∞–∂–Ω—ã–µ –∞–Ω—Ç–∏-–∏—Å–∫–∞–∂–µ–Ω–∏—è + –ø–µ—Ä–µ—Ö–≤–∞—Ç global img{height:100%}\n  imgEl.style.maxWidth = \"100%\";\n  imgEl.style.maxHeight = \"100%\";\n  imgEl.style.width = \"auto\";\n  imgEl.style.setProperty(\"height\", \"auto\", \"important\");\n  imgEl.style.objectFit = \"contain\";\n  imgEl.style.transformOrigin = \"center center\";\n  imgEl.style.willChange = \"transform\";\n  imgEl.style.userSelect = \"none\";\n  imgEl.style.webkitUserDrag = \"none\";\n  imgEl.style.pointerEvents = \"auto\";\n\n  const bar = overlay.querySelector(\".am-zoom__bar\");\n  Object.assign(bar.style, {\n    display: \"flex\", justifyContent: \"space-between\",\n    alignItems: \"center\", gap: \"12px\"\n  });\n\n  linkEl = overlay.querySelector(\".am-zoom__open\");\n  linkEl.style.color = \"#fff\";\n  closeBtn = overlay.querySelector(\".am-zoom__close\");\n  Object.assign(closeBtn.style, {\n    width: \"40px\", height: \"40px\", borderRadius: \"10px\",\n    border: \"none\", background: \"var(--color-affair, #764191)\", color: \"#fff\", cursor: \"pointer\"\n  });\n\n  // —Å–æ–±—ã—Ç–∏—è\n  backdropEl.addEventListener(\"click\", closeZoom);\n  closeBtn.addEventListener(\"click\", closeZoom);\n\n  overlay.addEventListener(\"wheel\", onWheel, { passive: false });\n  imgEl.addEventListener(\"dblclick\", toggleZoom);\n\n  imgEl.addEventListener(\"pointerdown\", onPointerDown);\n  imgEl.addEventListener(\"pointermove\", onPointerMove);\n  imgEl.addEventListener(\"pointerup\", onPointerUpCancel);\n  imgEl.addEventListener(\"pointercancel\", onPointerUpCancel);\n\n  document.addEventListener(\"keydown\", (e) => { if (e.key === \"Escape\" && isZoomOpen()) closeZoom(); });\n  window.addEventListener(\"resize\", () => { if (isZoomOpen()) { measureStage(); applyTransform(); } });\n}\n\n/* ---------- measurements ---------- */\nfunction measureBase() {\n  const prev = imgEl.style.transform;\n  imgEl.style.transform = \"translate3d(0,0,0) scale(1)\";\n  const r = imgEl.getBoundingClientRect();\n  imgEl.style.transform = prev;\n  baseW = r.width; baseH = r.height;\n}\nfunction measureStage() {\n  const s = stageEl.getBoundingClientRect();\n  stageW = s.width; stageH = s.height;\n}\nfunction clampPan() {\n  if (!baseW || !baseH || !stageW || !stageH) return;\n  const contentW = baseW * scale, contentH = baseH * scale;\n  if (contentW <= stageW) curX = 0;\n  else { const maxX = (contentW - stageW) / 2; curX = clamp(curX, -maxX, maxX); }\n  if (contentH <= stageH) curY = 0;\n  else { const maxY = (contentH - stageH) / 2; curY = clamp(curY, -maxY, maxY); }\n}\nfunction applyTransform() {\n  clampPan();\n  imgEl.style.transform = `translate3d(${curX}px, ${curY}px, 0) scale(${scale})`;\n  imgEl.style.cursor = scale > 1 ? (isPanning ? \"grabbing\" : \"grab\") : \"zoom-in\";\n}\n\n/* ---------- API ---------- */\nexport function openZoom(src, alt = \"\") {\n  if (!src) return;\n  ensureZoom();\n\n  // —Å–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è\n  activePointers.clear();\n  pinchActive = false; pinchBaseDist = 0; pinchBaseScale = 1;\n  isPanning = false; startX = startY = 0; curX = curY = 0; scale = 1;\n\n  imgEl.src = src;\n  imgEl.alt = alt || \"\";\n  linkEl.href = src;\n\n  overlay.style.display = \"block\";\n\n  const doMeasure = () => { measureStage(); measureBase(); clampPan(); applyTransform(); };\n  if (imgEl.complete && imgEl.naturalWidth > 0) requestAnimationFrame(doMeasure);\n  else imgEl.onload = () => requestAnimationFrame(doMeasure);\n}\n\nexport function closeZoom() {\n  if (!overlay) return;\n  overlay.style.display = \"none\";\n  imgEl.src = \"\";\n  activePointers.clear();\n  pinchActive = false;\n}\n\nexport function isZoomOpen() {\n  return !!(overlay && overlay.style.display !== \"none\");\n}\n\n/* ---------- gestures ---------- */\nfunction toggleZoom() {\n  const prev = scale;\n  scale = prev > 1 ? 1 : 2;\n  if (scale === 1) { curX = 0; curY = 0; }\n  applyTransform();\n}\nfunction onWheel(e) {\n  if (!isZoomOpen()) return;\n  e.preventDefault();\n  const newScale = clamp(scale + (e.deltaY > 0 ? -0.15 : 0.15), 1, 3);\n\n  const rect = imgEl.getBoundingClientRect();\n  const pivot = { x: e.clientX, y: e.clientY };\n  const center = { x: rect.left + rect.width / 2, y: rect.top + rect.height / 2 };\n  const factor = newScale / scale;\n  curX += (center.x - pivot.x) * (1 - factor);\n  curY += (center.y - pivot.y) * (1 - factor);\n\n  scale = newScale;\n  if (scale === 1) { curX = 0; curY = 0; }\n  applyTransform();\n}\nfunction onPointerDown(e) {\n  activePointers.set(e.pointerId, { x: e.clientX, y: e.clientY });\n  imgEl.setPointerCapture(e.pointerId);\n\n  if (activePointers.size === 2) {\n    const [p1, p2] = Array.from(activePointers.values());\n    pinchActive = true;\n    pinchBaseDist = dist(p1, p2) || 1;\n    pinchBaseScale = scale;\n    isPanning = false;\n    return;\n  }\n  if (activePointers.size === 1 && scale > 1) {\n    isPanning = true;\n    startX = e.clientX - curX;\n    startY = e.clientY - curY;\n    applyTransform();\n  }\n}\nfunction onPointerMove(e) {\n  if (!activePointers.has(e.pointerId)) return;\n  activePointers.set(e.pointerId, { x: e.clientX, y: e.clientY });\n\n  if (pinchActive && activePointers.size >= 2) {\n    const [p1, p2] = Array.from(activePointers.values());\n    const d = dist(p1, p2) || 1;\n    let newScale = clamp(pinchBaseScale * (d / pinchBaseDist), 1, 3);\n\n    const mid = midpoint(p1, p2);\n    const rect = imgEl.getBoundingClientRect();\n    const center = { x: rect.left + rect.width / 2, y: rect.top + rect.height / 2 };\n    const factor = newScale / scale;\n    curX += (center.x - mid.x) * (1 - factor);\n    curY += (center.y - mid.y) * (1 - factor);\n\n    scale = newScale;\n    if (scale === 1) { curX = 0; curY = 0; }\n    applyTransform();\n    return;\n  }\n\n  if (isPanning && activePointers.size === 1 && scale > 1) {\n    curX = e.clientX - startX;\n    curY = e.clientY - startY;\n    applyTransform();\n  }\n}\nfunction onPointerUpCancel(e) {\n  if (activePointers.has(e.pointerId)) activePointers.delete(e.pointerId);\n  try { imgEl.releasePointerCapture(e.pointerId); } catch {}\n  if (activePointers.size < 2) { pinchActive = false; pinchBaseDist = 0; }\n  if (activePointers.size === 0) { isPanning = false; applyTransform(); }\n}\n","\n// –ú–æ–¥–∞–ª–∫–∞ –∞—Ä—Ç–∏—Å—Ç–∞: –∏—â–µ—Ç —Ä–∞–∑–º–µ—Ç–∫—É –≤ root –∏–ª–∏ document, –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ ‚Äî —Å–æ–∑–¥–∞—ë—Ç –∫–∞—Ä–∫–∞—Å.\n// –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: –º–∏–Ω–∏-–ø–ª–µ–µ—Ä + zoom + —Å—Ç—Ä–µ–ª–∫–∞ ¬´–≤–≤–µ—Ä—Ö¬ª\n\nimport { lockScroll, unlockScroll } from \"../lib/scroll-lock.js\";\nimport { UISound } from \"../lib/sound.js\";\nimport { fetchArtist, fetchArtistAlbums } from \"./api.js\";\nimport { createMiniPlayer } from \"./player.js\";\nimport { openZoom } from \"./zoom.js\";\n\nconst SPRITE = \"/img/sprite.svg\";\n\n/* ---------- —É—Ç–∏–ª–∏—Ç—ã ---------- */\nfunction fmtTime(val) {\n  const ms = Number(val);\n  if (!Number.isFinite(ms)) return \"‚Äî\";\n  const total = Math.round(ms / 1000);\n  const m = Math.floor(total / 60);\n  const s = String(total % 60).padStart(2, \"0\");\n  return `${m}:${s}`;\n}\nconst years = (d) => {\n  const s = d?.intFormedYear || d?.yearStart || d?.formedYear;\n  const e = d?.intDisbandedYear || d?.intDiedYear || d?.yearEnd || d?.disbandedYear;\n  if (s && e) return `${s}‚Äì${e}`;\n  if (s) return `${s}‚Äìpresent`;\n  return \"information missing\";\n};\nconst trackRow = (t) => {\n  const title = t?.strTrack || t?.title || t?.name || \"‚Äî\";\n  const dur   = fmtTime(t?.intDuration ?? t?.duration ?? t?.time);\n  const link  = t?.movie ?? t?.youtube ?? t?.youtube_url ?? t?.url ?? t?.strMusicVid;\n  return `\n    <li class=\"tr\">\n      <span>${title}</span>\n      <span>${dur}</span>\n      <span>${\n        link\n          ? `<a class=\"yt\" href=\"${link}\" target=\"_blank\" rel=\"noopener noreferrer\" aria-label=\"Watch on YouTube\">\n               <svg class=\"ico am-yt\" aria-hidden=\"true\"><use href=\"${SPRITE}#icon-icon_youtube_footer\"></use></svg>\n             </a>`\n          : `<span class=\"yt-ph\"></span>`\n      }</span>\n    </li>`;\n};\n\n/* ---------- —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä–∫–∞—Å–∞ (–µ—Å–ª–∏ partial –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω) ---------- */\nfunction ensureModalShell(doc = document) {\n  let modal = doc.querySelector(\"#artist-modal\");\n  if (modal) return modal;\n\n  modal = doc.createElement(\"div\");\n  modal.id = \"artist-modal\";\n  modal.className = \"amodal\";\n  modal.setAttribute(\"hidden\", \"\");\n  modal.innerHTML = `\n    <div class=\"amodal__backdrop\"></div>\n    <div class=\"amodal__dialog\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Artist details\">\n      <button id=\"am-close\" class=\"amodal__close\" type=\"button\" aria-label=\"Close\">√ó</button>\n      <div id=\"am-body\" class=\"amodal__body\">\n        <div class=\"amodal__loader loader\"></div>\n      </div>\n    </div>`;\n  doc.body.appendChild(modal);\n  return modal;\n}\n\n/* ---------- –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å ---------- */\nexport function createArtistModal(rootEl = document) {\n  // 1) –∏—â–µ–º –≤ rootEl, 2) –≤ document, 3) –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë–º –∫–∞—Ä–∫–∞—Å\n  let modal =\n    (rootEl && rootEl.querySelector ? rootEl.querySelector(\"#artist-modal\") : null) ||\n    document.querySelector(\"#artist-modal\") ||\n    ensureModalShell(document);\n\n  const modalBody  = modal.querySelector(\"#am-body\");\n  const modalClose = modal.querySelector(\"#am-close\");\n  const dialog     = modal.querySelector(\".amodal__dialog\");\n\n  // –º–∏–Ω–∏-–ø–ª–µ–µ—Ä\n  const player = createMiniPlayer(); \n\n  \n\n  // —Å—Ç—Ä–µ–ª–∫–∞ ¬´–≤–≤–µ—Ä—Ö¬ª\n  let scrollTopBtn = null;\n  function ensureScrollTop() {\n    if (scrollTopBtn) return;\n    scrollTopBtn = document.createElement(\"button\");\n    scrollTopBtn.type = \"button\";\n    scrollTopBtn.setAttribute(\"aria-label\", \"Scroll to top\");\n    scrollTopBtn.textContent = \"‚Üë\";\n    Object.assign(scrollTopBtn.style, {\n      position: \"fixed\",\n      right: \"24px\",\n      bottom: \"24px\",\n      width: \"56px\",\n      height: \"56px\",\n      borderRadius: \"50%\",\n      border: \"none\",\n      cursor: \"pointer\",\n      display: \"none\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      fontSize: \"22px\",\n      lineHeight: \"1\",\n      background: \"var(--color-affair, #764191)\",\n      color: \"var(--color-white, #fff)\",\n      boxShadow: \"0 8px 20px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,0.1)\",\n      zIndex: \"5\",\n    });\n    scrollTopBtn.addEventListener(\"click\", () => {\n      UISound?.tap?.();\n      dialog.scrollTo({ top: 0, behavior: \"smooth\" });\n    });\n    modal.appendChild(scrollTopBtn);\n\n    dialog.addEventListener(\"scroll\", () => {\n      scrollTopBtn.style.display = (dialog.scrollTop || 0) > 220 ? \"flex\" : \"none\";\n    });\n  }\n\n  function open() {\n    modal.removeAttribute(\"hidden\");\n    lockScroll();\n    ensureScrollTop();\n    modalBody.innerHTML = `<div class=\"amodal__loader loader\"></div>`;\n    document.addEventListener(\"keydown\", onEsc);\n  }\n  function close() {\n    if (player.isActive()) player.close();\n    modal.setAttribute(\"hidden\", \"\");\n    unlockScroll();\n    modalBody.innerHTML = \"\";\n    document.removeEventListener(\"keydown\", onEsc);\n    if (scrollTopBtn) scrollTopBtn.style.display = \"none\";\n  }\n  const onEsc = (e) => { if (e.key === \"Escape\") { UISound?.tap?.(); close(); } };\n\n  modalClose.addEventListener(\"click\", () => { UISound?.tap?.(); close(); });\n  modal.addEventListener(\"click\", (e) => {\n    if (e.target.classList.contains(\"amodal__backdrop\")) {\n      UISound?.tap?.(); close();\n    }\n  });\n\n  // –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤: YouTube + zoom\n  modal.addEventListener(\"click\", (e) => {\n    const a = e.target.closest(\"a.yt\");\n    if (a) { e.preventDefault(); UISound?.tap?.(); player.open(a.href); return; }\n    const zoomImg = e.target.closest(\".amodal__img\");\n    if (zoomImg) {\n      UISound?.tap?.();\n      const src = zoomImg.currentSrc || zoomImg.getAttribute(\"src\") || zoomImg.getAttribute(\"data-src\") || \"\";\n      openZoom(src, zoomImg.getAttribute(\"alt\") || \"\");\n    }\n  });\n\n  async function render(id) {\n    const [artist, albums] = await Promise.all([\n      fetchArtist(id).catch(() => ({})),\n      fetchArtistAlbums(id).catch(() => ([])),\n    ]);\n\n    const d = artist || {};\n    const name    = d?.strArtist || d?.name || \"Unknown artist\";\n    const img     = d?.strArtistThumb || d?.photo || d?.image || \"https://via.placeholder.com/960x540?text=No+Image\";\n    const country = d?.strCountry || d?.country || \"N/A\";\n    const members = d?.intMembers || d?.members || \"N/A\";\n    const sex     = d?.strGender || d?.sex || \"N/A\";\n    const bio     = d?.strBiographyEN || d?.about || \"\";\n    const genres  = Array.isArray(d?.genres) ? d.genres : (d?.genre ? [d.genre] : []);\n\n    const albumsArr = Array.isArray(albums) ? albums : [];\n    const albumsMarkup = albumsArr.map(alb => {\n      const title  = alb?.strAlbum || alb?.title || alb?.name || \"Album\";\n      const tracks = Array.isArray(alb?.tracks) ? alb.tracks :\n                     (Array.isArray(alb?.songs) ? alb.songs : []);\n      return `\n        <div class=\"am-album\">\n          <div class=\"am-album__title\">${title}</div>\n          <ul class=\"tbl\">\n            <li class=\"th\"><span>Track</span><span>Time</span><span>Link</span></li>\n            ${tracks.map(trackRow).join(\"\")}\n          </ul>\n        </div>`;\n    }).join(\"\");\n\n    modalBody.innerHTML = `\n      <h3 class=\"amodal__title\">${name}</h3>\n      <div class=\"amodal__content\">\n        <img class=\"amodal__img\" src=\"${img}\" alt=\"${name}\" loading=\"lazy\">\n        <div class=\"amodal__info\">\n          <div class=\"am-meta\">\n            <div class=\"am-meta__col\">\n              <div class=\"am-meta__item\"><span class=\"lbl\">Years active</span><span class=\"val\">${years(d)}</span></div>\n              <div class=\"am-meta__item\"><span class=\"lbl\">Sex</span><span class=\"val\">${sex}</span></div>\n            </div>\n            <div class=\"am-meta__col\">\n              <div class=\"am-meta__item\"><span class=\"lbl\">Members</span><span class=\"val\">${members}</span></div>\n              <div class=\"am-meta__item\"><span class=\"lbl\">Country</span><span class=\"val\">${country}</span></div>\n            </div>\n          </div>\n          <div class=\"am-bio\"><div class=\"lbl\">Biography</div><p>${bio || \"‚Äî\"}</p></div>\n          ${genres.length ? `<div class=\"am-tags\">${genres.map(g=>`<span class=\"tag\">${g}</span>`).join(\"\")}</div>` : \"\"}\n        </div>\n      </div>\n      <h4 class=\"amodal__albums-title\">Albums</h4>\n      <div class=\"amodal__albums\">\n        ${albumsMarkup || \"<p class='muted'>No albums found for this artist.</p>\"}\n      </div>`;\n  }\n\n  async function openFor(id) {\n    UISound?.tap?.();\n    open();\n    await render(id);\n  }\n\n  return { openFor, close };\n}\n","// src/js/artists/features/grid.js\nimport { UISound } from \"../lib/sound.js\";\nimport { fetchArtists, fetchGenres } from \"./api.js\";\nimport { ArtistState } from \"./state.js\";\nimport { createArtistModal } from \"./modal.js\";\nimport { openZoom } from \"./zoom.js\";\n\nconst SPRITE = \"/img/sprite.svg\";\n\nexport function initGrid(root = document.querySelector(\"#artists-section\")) {\n  if (!root) return;\n\n  // ---------- refs ----------\n  const panel       = root.querySelector(\"#filters-panel\");\n  const toggleBtn   = root.querySelector(\"#filters-toggle\");\n  const resetBtn    = root.querySelector(\"#filters-reset\");\n  const resetBtnSm  = root.querySelector(\"#filters-reset-sm\");\n  const viewToggle  = root.querySelector(\"#view-toggle\"); // List/Grid view\n\n  const searchInput = root.querySelector(\"#flt-q\");\n  const searchBtn   = root.querySelector(\"#flt-q-btn\");   // –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å\n\n  const ddSort      = root.querySelector('.dd[data-dd=\"sort\"]');\n  const ddSortBtn   = root.querySelector(\"#dd-sort-btn\");\n  const ddSortList  = root.querySelector(\"#dd-sort-list\");\n\n  const ddGenre     = root.querySelector('.dd[data-dd=\"genre\"]');\n  const ddGenreBtn  = root.querySelector(\"#dd-genre-btn\");\n  const ddGenreList = root.querySelector(\"#dd-genre-list\");\n\n  const grid        = root.querySelector(\"#artists-grid\");\n  const pager       = root.querySelector(\"#artists-pager\");\n  const empty       = root.querySelector(\"#artists-empty\");\n\n  // –º–æ–¥–∞–ª–∫–∞: —Å–æ–∑–¥–∞—ë–º/–Ω–∞—Ö–æ–¥–∏–º —Ä–∞–∑–æ–≤–æ ‚Üí –ø–æ–ª—É—á–∞–µ–º API\n  const modalApi = createArtistModal(document);\n\n  // –∑–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–Ω–æ–∫ API\n  let reqId = 0;\n\n  // ---------- utils ----------\n  const show = (el) => el && el.removeAttribute(\"hidden\");\n  const hide = (el) => el && el.setAttribute(\"hidden\", \"\");\n  const isDesktop = () => matchMedia(\"(min-width:1440px)\").matches;\n  const byName = (a) => (a?.strArtist || a?.name || \"\").toLowerCase();\n\n  function syncPanelMode() {\n    const st = ArtistState.get();\n    if (isDesktop()) {\n      panel?.setAttribute(\"aria-hidden\", \"false\");\n      toggleBtn?.setAttribute(\"aria-expanded\", \"false\");\n      ArtistState.setMobilePanel(false);\n    } else {\n      panel?.setAttribute(\"aria-hidden\", st.isMobilePanelOpen ? \"false\" : \"true\");\n      toggleBtn?.setAttribute(\"aria-expanded\", st.isMobilePanelOpen ? \"true\" : \"false\");\n    }\n  }\n\n  function scrollToGridTop() {\n    const top = root.getBoundingClientRect().top + window.scrollY - 16;\n    window.scrollTo({ top, behavior: \"smooth\" });\n  }\n\n  function applyEmpty(on) {\n    if (on) { show(empty); hide(grid); hide(pager); resetGridInlineStyles(); }\n    else { hide(empty); show(grid); }\n  }\n  function resetGridInlineStyles() {\n    grid.style.height = \"\";\n    grid.style.overflow = \"\";\n    grid.style.transition = \"\";\n    grid.style.willChange = \"\";\n  }\n\n  // ---------- skeleton + fade-in ----------\n  function buildSkeletonCard() {\n    return `\n      <li class=\"card card--skel\">\n        <div class=\"card__media skel skel--media\"></div>\n        <div class=\"card__tags\">\n          <span class=\"tag skel skel--tag\"></span>\n          <span class=\"tag skel skel--tag\"></span>\n        </div>\n        <div class=\"skel skel--title\"></div>\n        <div class=\"skel skel--text\"></div>\n      </li>`;\n  }\n  function renderSkeleton(count) {\n    const n = Math.max(1, Number(count) || 8);\n    grid.innerHTML = new Array(n).fill(0).map(buildSkeletonCard).join(\"\");\n    show(grid); hide(empty); hide(pager);\n  }\n  function afterImagesFadeIn() {\n    const imgs = grid.querySelectorAll(\"img.img-fade\");\n    imgs.forEach((img) => {\n      const done = () => img.classList.add(\"is-loaded\");\n      if (img.complete && img.naturalWidth > 0) done();\n      else img.addEventListener(\"load\", done, { once: true });\n    });\n  }\n\n  // —É–¥–µ—Ä–∂–∞–Ω–∏–µ –≤—ã—Å–æ—Ç—ã\n  let gridCleanupTimer = null;\n  function lockGridHeight(h) {\n    const hh = h ?? grid.getBoundingClientRect().height;\n    grid.style.willChange = \"height\";\n    grid.style.overflow = \"hidden\";\n    grid.style.transition = \"none\";\n    grid.style.height = `${Math.max(1, Math.round(hh || 0))}px`;\n  }\n  function unlockGridHeight() { resetGridInlineStyles(); }\n  function swapGridContent(renderFn) {\n    renderFn();\n    void grid.offsetHeight;\n    const newH = grid.scrollHeight;\n    grid.style.transition = \"height 200ms ease\";\n    grid.style.height = `${newH}px`;\n    const onEnd = (e) => {\n      if (e.target !== grid || e.propertyName !== \"height\") return;\n      grid.removeEventListener(\"transitionend\", onEnd);\n      unlockGridHeight();\n    };\n    grid.addEventListener(\"transitionend\", onEnd);\n    clearTimeout(gridCleanupTimer);\n    gridCleanupTimer = setTimeout(unlockGridHeight, 400);\n  }\n\n  // ---------- rendering ----------\n  function buildCard(a) {\n    const id = a?.id || a?._id || a?.artistId || \"\";\n    const name = a?.strArtist || a?.name || \"Unknown\";\n    const img = a?.strArtistThumb || a?.photo || a?.image || \"https://via.placeholder.com/960x540?text=No+Image\";\n    const about = a?.strBiographyEN || a?.about || \"\";\n    const tags = Array.isArray(a?.genres) ? a.genres : (a?.genre ? [a.genre] : []);\n    const sizes = \"(min-width:1440px) 50vw, (min-width:768px) 704px, 100vw\";\n\n    return `\n      <li class=\"card\" data-id=\"${id}\">\n        <div class=\"card__media\">\n          <img\n            class=\"img-fade\"\n            src=\"${img}\"\n            srcset=\"${img} 1x, ${img} 2x\"\n            sizes=\"${sizes}\"\n            alt=\"${name}\"\n            loading=\"lazy\"\n          >\n        </div>\n        <div class=\"card__tags\">${tags.map(t => `<span class=\"tag\">${t}</span>`).join(\"\")}</div>\n        <h3 class=\"card__title\">${name}</h3>\n        <p class=\"card__text\">${about}</p>\n        <button class=\"card__link\" data-action=\"more\">\n          Learn More\n          <svg class=\"ico\" aria-hidden=\"true\">\n            <use href=\"${SPRITE}#icon-icon_play_artists_sections\"></use>\n          </svg>\n        </button>\n      </li>`;\n  }\n  function renderGrid(arr) {\n    grid.innerHTML = arr.map(buildCard).join(\"\");\n    afterImagesFadeIn();\n  }\n\n  function renderPager(page, totalPages) {\n    if (totalPages <= 0) { pager.innerHTML = \"\"; hide(pager); return; }\n    if (totalPages === 1) {\n      pager.innerHTML = `<button class=\"active\" data-page=\"1\" disabled>1</button>`;\n      show(pager);\n      return;\n    }\n    const btn = (label, p, dis = false, act = false) =>\n      `<button ${dis ? \"disabled\" : \"\"} data-page=\"${p}\" class=\"${act ? \"active\" : \"\"}\">${label}</button>`;\n\n    const win = 2;\n    const from = Math.max(1, page - win);\n    const to = Math.min(totalPages, page + win);\n    const out = [];\n\n    out.push(btn(\"‚Äπ\", Math.max(1, page - 1), page === 1, false));\n    if (from > 1) {\n      out.push(btn(\"1\", 1, false, page === 1));\n      if (from > 2) out.push(`<button class=\"dots\">‚Ä¶</button>`);\n    }\n    for (let p = from; p <= to; p++) out.push(btn(String(p), p, false, p === page));\n    if (to < totalPages) {\n      if (to < totalPages - 1) out.push(`<button class=\"dots\">‚Ä¶</button>`);\n      out.push(btn(String(totalPages), totalPages, false, page === totalPages));\n    }\n    out.push(btn(\"‚Ä∫\", Math.min(totalPages, page + 1), page === totalPages, false));\n\n    pager.innerHTML = out.join(\"\");\n    show(pager);\n  }\n\n  // ---------- data ----------\n  async function loadGenres() {\n    try {\n      ddGenre?.classList.add(\"loading\");\n      ddGenreBtn?.setAttribute(\"aria-busy\", \"true\");\n      if (ddGenreBtn) ddGenreBtn.disabled = true;\n      ddGenreList.innerHTML = `\n        <li class=\"dd__loading\">\n          <span class=\"dd__spinner\" aria-hidden=\"true\"></span>\n          <span>Loading‚Ä¶</span>\n        </li>`;\n      const list = await fetchGenres();\n      ddGenreList.innerHTML = list.map((g) => `<li data-val=\"${g}\">${g}</li>`).join(\"\");\n    } catch {\n      ddGenreList.innerHTML = `<li data-val=\"\">All Genres</li>`;\n    } finally {\n      ddGenre?.classList.remove(\"loading\");\n      ddGenreBtn?.removeAttribute(\"aria-busy\");\n      if (ddGenreBtn) ddGenreBtn.disabled = false;\n    }\n  }\n\n  async function loadArtists(allowRetry = true) {\n    const myId = ++reqId;\n\n    const { page, limit, genre, sort, q } = ArtistState.get();\n\n    lockGridHeight(grid.getBoundingClientRect().height);\n    renderSkeleton(limit);\n    hide(pager);\n\n    let list = [];\n    let total = 0;\n\n    try {\n      const server = await fetchArtists({\n        page, limit,\n        genre: genre || \"\",\n        sort:  sort  || \"\",\n        name:  q?.trim?.() || \"\",\n      });\n      if (myId !== reqId) return; // —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –æ—Ç–≤–µ—Ç\n      list  = Array.isArray(server.artists) ? server.artists : [];\n      total = Number(server.totalArtists || list.length || 0);\n    } catch {\n      if (myId !== reqId) return;\n      list = [];\n      total = 0;\n    }\n\n    // —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –∫–ª–∞–º–ø\n    let totalPages = Math.max(1, Math.ceil(total / limit));\n    if (page > totalPages && allowRetry) { ArtistState.setPage(totalPages); return loadArtists(false); }\n    if (page < 1 && allowRetry)          { ArtistState.setPage(1);         return loadArtists(false); }\n\n    // –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–µ—Å–ª–∏ –Ω–∞–¥–æ)\n    if (sort === \"asc\")  list = list.slice().sort((a, b) => byName(a).localeCompare(byName(b)));\n    if (sort === \"desc\") list = list.slice().sort((a, b) => byName(b).localeCompare(byName(a)));\n\n    if (myId !== reqId) return;\n\n    if (!list.length) {\n      grid.innerHTML = \"\";\n      applyEmpty(true);\n      unlockGridHeight();\n      return;\n    }\n\n    applyEmpty(false);\n    swapGridContent(() => renderGrid(list));\n    renderPager(ArtistState.get().page, totalPages);\n  }\n\n  // ---------- dropdowns ----------\n  function closeDropdowns(except) {\n    [ddSort, ddGenre].forEach((dd) => {\n      if (dd !== except) {\n        dd.classList.remove(\"open\");\n        const ul = dd.querySelector(\".dd__list\");\n        if (ul) ul.style.display = \"none\";\n      }\n    });\n  }\n  function toggleDropdown(dd) {\n    const open = !dd.classList.contains(\"open\");\n    closeDropdowns(dd);\n    dd.classList.toggle(\"open\", open);\n    const ul = dd.querySelector(\".dd__list\");\n    if (ul) ul.style.display = open ? \"block\" : \"none\";\n  }\n\n  // ---------- UI events ----------\n  toggleBtn?.addEventListener(\"click\", () => {\n    UISound.tap();\n    const st = ArtistState.get();\n    ArtistState.setMobilePanel(!st.isMobilePanelOpen);\n    syncPanelMode();\n  });\n  addEventListener(\"resize\", syncPanelMode);\n\n  ddSortBtn?.addEventListener(\"click\", () => { UISound.tap(); toggleDropdown(ddSort); });\n  ddGenreBtn?.addEventListener(\"click\", () => { UISound.tap(); toggleDropdown(ddGenre); });\n  document.addEventListener(\"click\", (e) => { if (!e.target.closest(\".dd\")) closeDropdowns(); });\n\n  ddSortList?.addEventListener(\"click\", (e) => {\n    const li = e.target.closest(\"li\"); if (!li) return;\n    UISound.tap();\n    ArtistState.setSort(li.dataset.val || \"\");\n    toggleDropdown(ddSort);\n    loadArtists();\n  });\n\n  ddGenreList?.addEventListener(\"click\", (e) => {\n    const li = e.target.closest(\"li\"); if (!li) return;\n    UISound.tap();\n    const v = li.dataset.val || \"\";\n    ArtistState.setGenre(v === \"All Genres\" ? \"\" : v);\n    toggleDropdown(ddGenre);\n    loadArtists();\n    ddSortBtn?.focus();\n  });\n\n  function doSearch() {\n    UISound.tap();\n    ArtistState.setQuery(searchInput?.value.trim() || \"\");\n    loadArtists();\n  }\n  searchBtn?.addEventListener(\"click\", doSearch);\n  searchInput?.addEventListener(\"keydown\", (e) => { if (e.key === \"Enter\") doSearch(); });\n\n  function resetAll() {\n    ArtistState.reset();\n    if (searchInput) searchInput.value = \"\";\n    closeDropdowns();\n    loadArtists();\n  }\n  resetBtn?.addEventListener(\"click\", () => { UISound.tap(); resetAll(); });\n  resetBtnSm?.addEventListener(\"click\", () => {\n    UISound.tap();\n    resetAll();\n    ArtistState.setMobilePanel(false);\n    syncPanelMode();\n  });\n  root.querySelector(\"#empty-reset\")?.addEventListener(\"click\", () => { UISound.tap(); resetAll(); });\n\n  pager?.addEventListener(\"click\", (e) => {\n    const b = e.target.closest(\"button[data-page]\"); if (!b || b.disabled) return;\n    const p = Number(b.dataset.page) || 1;\n    if (p === ArtistState.get().page) return;\n    UISound.page();\n    scrollToGridTop();\n    ArtistState.setPage(p);\n    loadArtists();\n  });\n\n  // ---------- List/Grid view ----------\n  const sectionRoot = root.closest(\".artists1\") || root;\n  viewToggle?.addEventListener(\"click\", () => {\n    UISound.tap();\n    const listOn = !sectionRoot.classList.contains(\"view-list\");\n    sectionRoot.classList.toggle(\"view-list\", listOn);\n    sectionRoot.classList.toggle(\"view-grid\", !listOn);\n    viewToggle.setAttribute(\"aria-pressed\", String(listOn));\n    viewToggle.textContent = listOn ? \"Grid view\" : \"List view\";\n  });\n\n  // ---------- –º–æ–¥–∞–ª–∫–∞ –∏ –∑—É–º ----------\n  grid.addEventListener(\"click\", (e) => {\n    // Learn More ‚Üí –º–æ–¥–∞–ª–∫–∞\n    const btn = e.target.closest('[data-action=\"more\"]');\n    if (btn) {\n      const id = btn.closest(\".card\")?.dataset?.id;\n      if (!id) return;\n      UISound.tap();\n      modalApi.openFor(id);\n      return;\n    }\n\n    // –ö–ª–∏–∫ –ø–æ —Ñ–æ—Ç–æ ‚Üí zoom\n    const img = e.target.closest(\".card__media img\");\n    if (img) {\n      UISound.tap();\n      const src = img.currentSrc || img.src || img.getAttribute(\"src\") || \"\";\n      openZoom(src, img.getAttribute(\"alt\") || \"\");\n    }\n  });\n\n  // ---------- init ----------\n  syncPanelMode();\n  loadGenres();\n  loadArtists();\n}\n","// URL-sync –¥–ª—è —Å–µ–∫—Ü–∏–∏ Artists: —á–∏—Ç–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–∑ query –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ,\n// –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π query –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ state (replaceState).\n\nimport { getState, setState, subscribe } from \"./state.js\";\n\nfunction parseQuery() {\n  const p = new URLSearchParams(location.search);\n  const q = (p.get(\"q\") || \"\").trim();\n  const genre = p.get(\"genre\") || \"\";\n  const sort = p.get(\"sort\") || \"\";\n  const page = Math.max(1, Number(p.get(\"page\") || 1));\n  return { q, genre, sort, page };\n}\n\nfunction buildQuery(s) {\n  const p = new URLSearchParams();\n  if (s.q) p.set(\"q\", s.q);\n  if (s.genre) p.set(\"genre\", s.genre);\n  if (s.sort) p.set(\"sort\", s.sort);\n  if (s.page && s.page !== 1) p.set(\"page\", String(s.page));\n  return p.toString();\n}\n\nexport function initRouter() {\n  \n  const urlState = parseQuery();\n  const cur = getState();\n  const patch = {};\n  let changed = false;\n  for (const k of [\"q\",\"genre\",\"sort\",\"page\"]) {\n    if (urlState[k] !== undefined && urlState[k] !== cur[k]) {\n      patch[k] = urlState[k];\n      changed = true;\n    }\n  }\n  if (changed) setState(patch);\n\n  \n  let lastQS = null;\n  subscribe((s) => {\n    const qs = buildQuery(s);\n    if (qs === lastQS) return;\n    lastQS = qs;\n    const url = qs ? `?${qs}` : location.pathname;\n    history.replaceState(null, \"\", url);\n  });\n}\n","// –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∞—Ä—Ç–∏—Å—Ç–∞ –ø—Ä–∏ hover –Ω–∞ ‚ÄúLearn more‚Äù >150–º—Å.\n\nimport { fetchArtist, fetchArtistAlbums } from \"./api.js\";\n\nconst cache = new Map(); // id -> { artist, albums, ts }\n\nexport function getPrefetched(id) {\n  return cache.get(String(id));\n}\n\nexport function initPrefetch(root) {\n  const grid = root.querySelector(\"#artists-grid\");\n  if (!grid) return;\n\n  let hoverTimer = null;\n  let hoverId = null;\n\n  function schedulePrefetch(id) {\n    clearTimeout(hoverTimer);\n    hoverTimer = setTimeout(async () => {\n      try {\n        if (cache.has(id)) return;\n        const [artist, albums] = await Promise.all([\n          fetchArtist(id),\n          fetchArtistAlbums(id),\n        ]);\n        cache.set(id, { artist, albums, ts: Date.now() });\n      } catch { /* —Ç–∏—Ö–æ –∏–≥–Ω–æ—Ä–∏–º */ }\n    }, 150);\n  }\n\n  grid.addEventListener(\"mouseenter\", (e) => {\n    const btn = e.target.closest('[data-action=\"more\"]');\n    if (!btn) return;\n    const id = btn.closest(\".card\")?.dataset?.id;\n    if (!id) return;\n    hoverId = String(id);\n    schedulePrefetch(hoverId);\n  }, true);\n\n  grid.addEventListener(\"mouseleave\", (e) => {\n    if (e.target.closest('[data-action=\"more\"]')) {\n      clearTimeout(hoverTimer);\n      hoverTimer = null;\n      hoverId = null;\n    }\n  }, true);\n}\n","import { initGrid } from \"./grid.js\";\nimport { createArtistModal } from \"./modal.js\";\nimport { initRouter } from \"./router.js\";\nimport { initPrefetch } from \"./prefetch.js\";\n\nexport function initArtists(root = document.querySelector(\"#artists-section\")) {\n  if (!root) return;\n\n  // URL-sync —Å–Ω–∞—á–∞–ª–∞ (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏)\n  initRouter(root);\n\n  // –ú–æ–¥–∞–ª–∫–∞ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç open/close)\n  const modal = createArtistModal(root);\n\n  // Prefetch \"Learn more\" (—É—Å–∫–æ—Ä—è–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏)\n  initPrefetch(root);\n\n  // –ì—Ä–∏–¥ (–ø–µ—Ä–µ–¥–∞—ë–º –º–æ–¥–∞–ª–∫—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è)\n  initGrid(root, { openModal: modal.open });\n}\n","// src/js/artists/index.js\nimport { initArtists } from \"./features/init.js\";\nimport { createMiniPlayer } from \"./features/player.js\";\nimport { UISound } from \"./lib/sound.js\";\n\n// –ü—É–ª YouTube ID\nconst RADIO_POOL = [\n  \"Zi_XLOBDo_Y\",\"3JZ_D3ELwOQ\",\"fRh_vgS2dFE\",\"OPf0YbXqDm0\",\"60ItHLz5WEA\",\n  \"2Vv-BfVoq4g\",\"kXYiU_JCYtU\",\"UceaB4D0jpo\",\"RubBzkZzpUA\",\"kJQP7kiw5Fk\",\n  \"CevxZvSJLk8\",\"pRpeEdMmmQ0\",\"IcrbM1l_BoI\",\"YVkUvmDQ3HY\",\"hT_nvWreIhg\",\n  \"09R8_2nJtjg\",\"uelHwf8o7_U\",\"JGwWNGJdvx8\",\"YQHsXMglC9A\",\"NmugSMBh_iI\",\n  \"LrUvu1mlWco\",\"hLQl3WQQoQ0\",\"RgKAFK5djSk\",\"SlPhMPnQ58k\",\"oRdxUFDoQe0\",\n  \"09z7j-LPz1E\",\"Pkh8UtuejGw\",\"tt2k8PGm-TI\",\"lY2yjAdbvdQ\",\"pXRviuL6vMY\",\n  \"09tj3yqpP5g\",\"nfs8NYg7yQM\",\"nCkpzqqog4k\",\"M7lc1UVf-VE\"\n];\n\n// —Å–µ–ª–µ–∫—Ç–æ—Ä—ã –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫\nconst pick = (list) => list.map(q => document.querySelector(q)).find(Boolean);\nconst pickStartButton = () => pick([\n  '[data-radio=\"start\"]', '#rhythm-radio', '#random-radio', '#radio-start', '.js-radio-start'\n]);\nconst pickNextBtn = () => pick(['[data-radio=\"next\"]','#radio-next','.js-radio-next']);\nconst pickPrevBtn = () => pick(['[data-radio=\"prev\"]','#radio-prev','.js-radio-prev']);\nconst pickStopBtn = () => pick(['[data-radio=\"stop\"]','#radio-stop','.js-radio-stop']);\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  try { initArtists(); } catch {}\n\n  const player = createMiniPlayer();\n\n  const startBtn = pickStartButton();\n  if (startBtn) {\n    startBtn.addEventListener(\"click\", async (e) => {\n      e.preventDefault();\n      UISound?.tap?.();\n      await player.openQueue(RADIO_POOL, { shuffle: true, loop: true });\n      player.ensureAudible();\n    });\n  }\n\n  const nextBtn = pickNextBtn();\n  if (nextBtn) nextBtn.addEventListener(\"click\", (e) => {\n    e.preventDefault(); UISound?.tap?.(); player.next();\n  });\n\n  const prevBtn = pickPrevBtn();\n  if (prevBtn) prevBtn.addEventListener(\"click\", (e) => {\n    e.preventDefault(); UISound?.tap?.(); player.prev();\n  });\n\n  const stopBtn = pickStopBtn();\n  if (stopBtn) stopBtn.addEventListener(\"click\", (e) => {\n    e.preventDefault(); UISound?.tap?.(); player.close();\n  });\n});\n","const refs = {\n  openBtn: document.querySelector('[data-menu-open]'),\n  closeBtn: document.querySelector('[data-menu-close]'),\n  menu: document.querySelector('[data-menu]'),\n  links: document.querySelectorAll('[data-menu-link]'),\n  logos: document.querySelectorAll('.header-logo'),\n  header: document.querySelector('.header'),\n};\n\nfunction openMenu() {\n  if (!refs.menu) return;\n  refs.menu.hidden = false;\n  refs.menu.classList.add('show');\n  document.body.style.overflow = 'hidden';\n  refs.openBtn?.setAttribute('aria-expanded', 'true');\n}\n\nfunction closeMenu() {\n  return new Promise(resolve => {\n    if (!refs.menu) return resolve();\n    refs.menu.classList.remove('show');\n    setTimeout(() => {\n      refs.menu.hidden = true;\n      document.body.style.overflow = '';\n      refs.openBtn?.setAttribute('aria-expanded', 'false');\n      resolve();\n    }, 400);\n  });\n}\n\n/* ---------- header offset helpers ---------- */\nfunction getHeaderOffset() {\n  return (refs.header?.offsetHeight || 80) + 8;\n}\nfunction applyScrollPadding() {\n  document.documentElement.style.scrollPaddingTop = `${getHeaderOffset()}px`;\n}\napplyScrollPadding();\nwindow.addEventListener('resize', () => requestAnimationFrame(applyScrollPadding));\n\n/* ---------- custom smooth scroll (no teleports) ---------- */\nfunction smoothScroll(targetHref, duration = 500) {\n  const raw = (targetHref || '').replace('#', '');\n  const el = document.getElementById(raw) || document.getElementById(`${raw}-section`);\n  if (!el) return;\n\n  const headerOffset = getHeaderOffset();\n  const targetY = el.getBoundingClientRect().top + window.pageYOffset - headerOffset;\n\n  const startY = window.pageYOffset;\n  const diff = targetY - startY;\n  let t0 = null;\n\n  const ease = t => (t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2);\n\n  function step(ts) {\n    if (t0 === null) t0 = ts;\n    const p = Math.min(1, (ts - t0) / duration);\n    window.scrollTo(0, startY + diff * ease(p));\n    if (p < 1) {\n      requestAnimationFrame(step);\n    } else {\n      // NEW: –ø–µ—Ä–µ–Ω–æ—Å–∏–º —Ñ–æ–∫—É—Å –Ω–∞ —Å–µ–∫—Ü–∏—é, —á—Ç–æ–±—ã —Å—Å—ã–ª–∫–∞ –ø–æ—Ç–µ—Ä—è–ª–∞ :focus\n      el.setAttribute('tabindex', '-1');\n      el.focus({ preventScroll: true });\n      setTimeout(() => el.removeAttribute('tabindex'), 0);\n    }\n  }\n  requestAnimationFrame(step);\n}\n\n/* ---------- menu events ---------- */\nrefs.openBtn?.addEventListener('click', openMenu);\nrefs.closeBtn?.addEventListener('click', closeMenu);\n\nrefs.logos.forEach(logo => {\n  logo.addEventListener('click', e => {\n    if (logo.closest('.mobile-menu')) {\n      e.preventDefault();\n      closeMenu();\n      setTimeout(() => {\n        window.location.href = logo.getAttribute('href');\n      }, 400);\n    }\n  });\n});\n\nrefs.menu?.addEventListener('click', e => {\n  if (e.target === refs.menu) {\n    closeMenu();\n  }\n});\n\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape' && refs.menu?.classList.contains('show')) {\n    closeMenu();\n  }\n});\n\n/* ---------- scroll-spy with IO ---------- */\nconst navLinks = document.querySelectorAll('.header-nav-link, .mobile-menu-nav-link');\n\nconst linkTargets = new Map();\nnavLinks.forEach(a => {\n  const href = (a.getAttribute('href') || '').trim();\n  if (!href.startsWith('#')) return;\n  const rawId = href.slice(1);\n  const el = document.getElementById(rawId) || document.getElementById(`${rawId}-section`);\n  if (!el) return;\n  if (!linkTargets.has(el)) linkTargets.set(el, []);\n  linkTargets.get(el).push(a);\n});\n\nlet currentEl = null;\nfunction setActiveByEl(el) {\n  if (!el || currentEl === el) return;\n  navLinks.forEach(a => a.classList.remove('active'));\n  (linkTargets.get(el) || []).forEach(a => a.classList.add('active'));\n  currentEl = el;\n}\n\nlet lockUntil = 0;\nconst LOCK_MS = 700;\nconst isLocked = () => Date.now() < lockUntil;\n\nlet io;\nfunction initScrollSpy() {\n  if (io) io.disconnect();\n\n  const rootMargin = `-${getHeaderOffset()}px 0px -55% 0px`;\n  const visibleRatio = new Map();\n\n  io = new IntersectionObserver(\n    entries => {\n      entries.forEach(en => {\n        visibleRatio.set(en.target, en.isIntersecting ? en.intersectionRatio : 0);\n      });\n      if (isLocked()) return;\n      const best = [...visibleRatio.entries()].sort((a, b) => b[1] - a[1])[0];\n      if (best && best[1] > 0) setActiveByEl(best[0]);\n    },\n    { root: null, rootMargin, threshold: [0, 0.25, 0.5, 0.75, 1] }\n  );\n\n  linkTargets.forEach((_, el) => io.observe(el));\n}\ninitScrollSpy();\nwindow.addEventListener('resize', () => requestAnimationFrame(initScrollSpy));\n\n/* ---------- nav handlers ---------- */\n// Desktop: –Ω–µ —Ç—Ä–æ–≥–∞–µ–º –º–æ–±–∏–ª—å–Ω—ã–µ (—É –Ω–∏—Ö –µ—Å—Ç—å data-menu-link)\nnavLinks.forEach(a => {\n  a.addEventListener('click', (e) => {\n    if (a.matches('[data-menu-link]')) return;\n    const href = (a.getAttribute('href') || '').trim();\n    if (!href.startsWith('#')) return;\n\n    e.preventDefault();\n    a.blur();                      // NEW: —Å–Ω–∏–º–∞–µ–º :focus —Å –∫–ª–∏–∫–Ω—É—Ç–æ–π —Å—Å—ã–ª–∫–∏\n\n    const raw = href.slice(1);\n    const el = document.getElementById(raw) || document.getElementById(`${raw}-section`);\n    if (!el) return;\n\n    setActiveByEl(el);\n    lockUntil = Date.now() + LOCK_MS;\n    smoothScroll(href);\n  });\n});\n\n// Mobile: –∂–¥—ë–º –∑–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é, —Å–Ω–∏–º–∞–µ–º —Ñ–æ–∫—É—Å, –ø–æ—Ç–æ–º —Å–∫—Ä–æ–ª–ª–∏–º\nrefs.links.forEach(link =>\n  link.addEventListener('click', async e => {\n    e.preventDefault();\n    link.blur();                   // NEW: —Å–Ω–∏–º–∞–µ–º :focus —Å –º–æ–±–∏–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏\n    const targetId = link.getAttribute('href');\n    await closeMenu();\n    smoothScroll(targetId);\n  })\n);\n\nwindow.addEventListener('load', () => {\n  applyScrollPadding();\n  if (location.hash) {\n    setTimeout(() => smoothScroll(location.hash), 0);\n  }\n});\n","import 'css-star-rating/css/star-rating.css';\nimport Swiper from 'swiper';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst overlay = document.querySelector('.overlay');\nconst openBtn = document.querySelector('.feedback-btn');\nconst closeBtn = document.querySelector('.close-btn, .close-icon'); \nconst form = document.querySelector('#feedback-form');\nconst container = document.querySelector('.feedback-section');\nconst inputName = document.querySelector('.form-input-name');\nconst inputMessage = document.querySelector('.form-input-message');\nconst formRating = document.getElementById('customer-rating');\n\nconst STORAGE_KEY = 'myFeedback';\n\n// —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ submit-–ø–æ–≤–µ–¥–µ–Ω–∏—è\nopenBtn?.setAttribute('type', 'button');\n\n// --- scroll lock (–±–µ–∑ –ø—Ä—ã–∂–∫–∞)\nconst scrollLock = {\n  y: 0,\n  lock() {\n    this.y = window.scrollY || document.documentElement.scrollTop || 0;\n    document.body.style.position = 'fixed';\n    document.body.style.top = `-${this.y}px`;\n    document.body.style.left = '0';\n    document.body.style.right = '0';\n    document.body.style.width = '100%';\n  },\n  unlock() {\n    const y = this.y || 0;\n    document.body.style.position = '';\n    document.body.style.top = '';\n    document.body.style.left = '';\n    document.body.style.right = '';\n    document.body.style.width = '';\n    window.scrollTo(0, y);\n    this.y = 0;\n  }\n};\n\n// --- ERROR UI (–∫—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞ –ø—Ä–∏ –ø—É—Å—Ç–æ–º –ø–æ–ª–µ)\nconst ERROR_CLASS = 'is-error';\nconst TOUCHED_CLASS = 'touched';\n\nfunction markError(el) {\n  if (!el) return;\n  const empty = !el.value.trim();\n  el.classList.add(TOUCHED_CLASS);\n  el.classList.toggle(ERROR_CLASS, empty);\n}\n[inputName, inputMessage].forEach(el => {\n  if (!el) return;\n  el.addEventListener('blur', () => markError(el));\n  el.addEventListener('input', () => markError(el));\n});\n\n// --- MODAL\nopenBtn?.addEventListener('click', () => {\n  overlay.classList.remove('hidden');\n  container.classList.add('hidden');\n  scrollLock.lock(); // –≤–º–µ—Å—Ç–æ document.body.classList.add('no-scroll')\n  dataFromLocalStorage();\n});\n\n(document.querySelector('.close-btn') || document.querySelector('.close-icon'))?.addEventListener('click', () => {\n  overlay.classList.add('hidden');\n  container.classList.remove('hidden');\n  scrollLock.unlock(); // –≤–º–µ—Å—Ç–æ remove('no-scroll')\n  createStars(document.getElementById('customer-rating'), parseInt(formRating.dataset.rating) || 0); // <-- —Ñ–∏–∫—Å\n});\n\noverlay?.addEventListener('click', e => {\n  if (e.target === overlay) {\n    overlay.classList.add('hidden');\n    container.classList.remove('hidden');\n    scrollLock.unlock();\n    createStars(document.getElementById('customer-rating'), parseInt(formRating.dataset.rating) || 0); // <-- —Ñ–∏–∫—Å\n  }\n});\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape') {\n    overlay.classList.add('hidden');\n    container.classList.remove('hidden');\n    scrollLock.unlock();\n    createStars(document.getElementById('customer-rating'), parseInt(formRating.dataset.rating) || 0); // <-- —Ñ–∏–∫—Å\n  }\n});\n\n// --- STARS\nfunction createStars(container, rating = 0) {\n  if (!container) return;\n  container.innerHTML = '';\n  const r = parseInt(rating) || 0;\n\n  for (let i = 1; i <= 5; i++) {\n    const star = document.createElement('span');\n    star.classList.add('star');\n    if (i <= r) star.classList.add('filled');\n    container.appendChild(star);\n\n    if (container.id === 'customer-rating') {\n      star.addEventListener('click', () => {\n        container.dataset.rating = i;\n        createStars(container, i);\n        saveToLocalStorage();\n      });\n      star.addEventListener('mouseenter', () => hoveredStar(container, i));\n      star.addEventListener('mouseleave', () => {\n        const savedRating = parseInt(formRating.dataset.rating) || 0;\n        createStars(container, savedRating);\n      });\n    }\n  }\n}\n\nfunction hoveredStar(container, upTo) {\n  const stars = container.querySelectorAll('.star');\n  stars.forEach((star, index) => {\n    if (index < upTo) star.classList.add('filled');\n    else star.classList.remove('filled');\n  });\n}\n\n// init stars\ncreateStars(formRating, parseInt(formRating.dataset.rating) || 0);\n\n// --- SWIPER\nconst swiper = new Swiper('.swiper', {\n  slidesPerView: 1,\n  spaceBetween: 20,\n  loop: false,\n  grabCursor: true,\n  navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },\n  pagination: { el: '.swiper-pagination', clickable: true }\n});\n\ndocument.querySelector('.swiper-button-prev')?.addEventListener('click', () => swiper.slidePrev());\ndocument.querySelector('.swiper-button-next')?.addEventListener('click', () => swiper.slideNext());\n\n// dots\nconst dots = document.querySelector('.swiper-pagination');\nif (dots) {\n  dots.innerHTML = `\n    <span class=\"swiper-dots\"></span>\n    <span class=\"swiper-dots\"></span>\n    <span class=\"swiper-dots\"></span>\n  `;\n}\nfunction activateDot(dotNumber) {\n  const all = document.querySelectorAll('.swiper-dots');\n  all.forEach(dot => dot.classList.remove('active'));\n  if (all[dotNumber - 1]) all[dotNumber - 1].classList.add('active');\n}\nfunction getDotIndex(index) {\n  if (index === 0) return 1;\n  if (index === 9) return 3;\n  return 2;\n}\nactivateDot(getDotIndex(swiper.realIndex));\ndocument.querySelectorAll('.swiper-dots').forEach((dot, index) => {\n  dot.addEventListener('click', () => {\n    const map = [0, 1, 9];\n    swiper.slideTo(map[index] ?? 0);\n  });\n});\nswiper.on('slideChange', () => {\n  const currentIndex = swiper.realIndex;\n  activateDot(getDotIndex(currentIndex));\n});\n\n// --- REVIEWS\nfunction normalizeFeedbackList(json) {\n  if (Array.isArray(json)) return json;\n  if (json && Array.isArray(json.data)) return json.data;\n  if (json && Array.isArray(json.feedbacks)) return json.feedbacks;\n  if (json && Array.isArray(json.results)) return json.results;\n  return [];\n}\n\nasync function loadReviews() {\n  const wrapper = document.querySelector('.swiper-wrapper');\n  if (!wrapper) return;\n  wrapper.innerHTML = '';\n\n  try {\n    const res = await fetch('https://sound-wave.b.goit.study/api/feedbacks');\n    const json = await res.json();\n    const feedbacks = normalizeFeedbackList(json).slice(0, 10);\n\n    feedbacks.forEach((feedback, index) => {\n      const stars = Math.round(Number(feedback?.rating) || 0);\n      const slide = document.createElement('div');\n      slide.classList.add('swiper-slide');\n      slide.innerHTML = `\n        <div class=\"rating\" id=\"rating-${index}\" data-rating=\"${stars}\"></div>\n        <div class=\"feedback\">\n          <p class=\"customer-feedback\">${String(feedback?.descr ?? '')}</p>\n          <h3 class=\"customer-name\">${String(feedback?.name ?? '')}</h3>\n        </div>`;\n      wrapper.appendChild(slide);\n      createStars(slide.querySelector('.rating'), stars);\n    });\n    swiper.update();\n  } catch (err) {\n    iziToast.error({ title: 'Error', message: 'Bad request (invalid request params)' });\n  }\n}\n\n// --- LOCAL STORAGE\nfunction saveToLocalStorage() {\n  const params = {\n    name: inputName.value.trim(),\n    message: inputMessage.value.trim(),\n    rating: parseInt(formRating.dataset.rating) || 0\n  };\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(params));\n}\n\nfunction dataFromLocalStorage() {\n  const raw = localStorage.getItem(STORAGE_KEY);\n  if (!raw) return;\n  try {\n    const saved = JSON.parse(raw);\n    if (saved?.name) inputName.value = saved.name;\n    if (saved?.message) inputMessage.value = saved.message;\n    if (typeof saved?.rating !== 'undefined') {\n      formRating.dataset.rating = saved.rating;\n      createStars(formRating, parseInt(saved.rating) || 0);\n    }\n    // –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø–æ—Å–ª–µ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è\n    [inputName, inputMessage].forEach(el => markError(el));\n  } catch {}\n}\n\nfunction resetLocalStorage() {\n  localStorage.removeItem(STORAGE_KEY);\n  form.reset();\n  formRating.dataset.rating = 0;\n  createStars(formRating, 0);\n  [inputName, inputMessage].forEach(el => el.classList.remove(ERROR_CLASS, TOUCHED_CLASS));\n}\n\n// --- SUBMIT\nform?.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const name = inputName.value.trim();\n  const message = inputMessage.value.trim();\n  const rating = parseInt(formRating.dataset.rating) || 0;\n\n  // –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö\n  const empties = [];\n  if (!name) { markError(inputName); empties.push(inputName); }\n  if (!message) { markError(inputMessage); empties.push(inputMessage); }\n  if (empties.length) {\n    empties[0].focus();\n    return iziToast.error({ message: 'Please fill out required fields.' });\n  }\n\n  if (name.length < 2 || name.length > 16) {\n    markError(inputName);\n    return iziToast.error({ message: 'Shortest name - 2 letters; Largest name - 16 letters' });\n  }\n  if (message.length < 10 || message.length > 512) {\n    markError(inputMessage);\n    return iziToast.error({ message: 'Min message - 10 symbols; Max message - 512 symbols' });\n  }\n  if (rating < 1 || rating > 5) {\n    return iziToast.error({ message: \"Rating must be between '1' and '5'\" });\n  }\n\n  try {\n    const response = await fetch('https://sound-wave.b.goit.study/api/feedbacks', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },\n      body: JSON.stringify({ name, descr: message, rating })\n    });\n\n    if (!response.ok) {\n      return iziToast.error({ title: 'Error:', message: `HTTP ${response.status}` },);\n    }\n\n    iziToast.success({ message: \"Comment posted, Thank you!\" ,position: 'center'});\n    resetLocalStorage();\n    overlay.classList.add('hidden');\n    container.classList.remove('hidden');\n    scrollLock.unlock(); // –≤–º–µ—Å—Ç–æ remove('no-scroll')\n    loadReviews();\n  } catch (err) {\n    iziToast.error({ message: 'Bad request (invalid request body)' });\n  }\n});\n\ndocument.addEventListener('DOMContentLoaded', loadReviews);\n"],"names":["IS_DEV","logWarn","args","api","axios","fetchArtists","page","limit","genre","sort","name","params","s","g","n","data","err","_a","fetchGenres","names","fetchArtist","id","fetchArtistAlbums","ctx","master","comp","postLP","inited","init","AC","unlock","resume","tap","now","durNoise","nsrc","nbuf","ch","i","t","bp","hp","ng","osc","og","low","lg","UISound","normId","o","normGenres","NOPHOTO","normArtist","normTrack","normAlbum","a","rawTracks","res","_fetchArtists","artists","totalArtists","_fetchGenres","_fetchArtist","obj","_fetchArtistAlbums","_state","listeners","snapshot","notify","fn","subscribe","getState","setState","patch","resetPage","next","changed","k","resetFilters","ArtistState","p","v","open","depth","savedY","lockScroll","unlockScroll","force","emergencyUnlock","_instance","loadYTAPI","rej","isIOS","getYouTubeId","urlOrId","u","m","clamp","b","shuffleArr","arr","j","fmtTimeSec","sec","createMiniPlayer","dock","host","btnClose","btnPlay","btnPrev","btnNext","btnMute","aYT","vol","prog","tCur","tDur","yt","ready","duration","timer","volVal","userSeeking","queue","qi","loop","uiShow","on","uiPlayIcon","isPlaying","uiMuteIcon","isMuted","uiSetTime","cur","dur","clearTimer","startTimer","ensureYT","userGesture","_b","e","autoNext","playByIndex","idx","_c","willMute","_d","nowMuted","_e","_f","openQueue","list","opts","ids","start","prev","isActive","close","ev","ensureAudible","overlay","dialogEl","stageEl","imgEl","linkEl","closeBtn","backdropEl","isPanning","startX","startY","curX","curY","scale","baseW","baseH","stageW","stageH","activePointers","pinchActive","pinchBaseDist","pinchBaseScale","min","max","dist","midpoint","ensureZoom","bar","closeZoom","onWheel","toggleZoom","onPointerDown","onPointerMove","onPointerUpCancel","isZoomOpen","measureStage","applyTransform","measureBase","r","clampPan","contentW","contentH","maxX","maxY","openZoom","src","alt","doMeasure","newScale","rect","pivot","center","factor","p1","p2","d","mid","SPRITE","fmtTime","val","ms","total","years","trackRow","title","link","ensureModalShell","doc","modal","createArtistModal","rootEl","modalBody","modalClose","dialog","player","scrollTopBtn","ensureScrollTop","onEsc","zoomImg","render","artist","albums","img","country","members","sex","bio","genres","albumsMarkup","alb","tracks","openFor","initGrid","root","panel","toggleBtn","resetBtn","resetBtnSm","viewToggle","searchInput","searchBtn","ddSort","ddSortBtn","ddSortList","ddGenre","ddGenreBtn","ddGenreList","grid","pager","empty","modalApi","reqId","show","el","hide","isDesktop","byName","syncPanelMode","st","scrollToGridTop","top","applyEmpty","resetGridInlineStyles","buildSkeletonCard","renderSkeleton","count","afterImagesFadeIn","done","gridCleanupTimer","lockGridHeight","h","hh","unlockGridHeight","swapGridContent","renderFn","newH","onEnd","buildCard","about","tags","renderGrid","renderPager","totalPages","btn","label","dis","act","win","from","to","out","loadGenres","loadArtists","allowRetry","myId","q","server","closeDropdowns","except","dd","ul","toggleDropdown","li","doSearch","resetAll","sectionRoot","listOn","parseQuery","buildQuery","initRouter","urlState","lastQS","qs","url","cache","initPrefetch","hoverTimer","hoverId","schedulePrefetch","initArtists","RADIO_POOL","pick","pickStartButton","pickNextBtn","pickPrevBtn","pickStopBtn","startBtn","nextBtn","prevBtn","stopBtn","refs","openMenu","closeMenu","resolve","getHeaderOffset","applyScrollPadding","smoothScroll","targetHref","raw","headerOffset","targetY","diff","t0","ease","step","ts","logo","navLinks","linkTargets","href","rawId","currentEl","setActiveByEl","lockUntil","LOCK_MS","isLocked","io","initScrollSpy","rootMargin","visibleRatio","entries","en","best","_","targetId","openBtn","form","container","inputName","inputMessage","formRating","STORAGE_KEY","scrollLock","y","ERROR_CLASS","TOUCHED_CLASS","markError","dataFromLocalStorage","createStars","rating","star","saveToLocalStorage","hoveredStar","savedRating","upTo","index","swiper","Swiper","dots","activateDot","dotNumber","all","dot","getDotIndex","map","currentIndex","normalizeFeedbackList","json","loadReviews","wrapper","feedback","stars","slide","iziToast","saved","resetLocalStorage","message","empties","response"],"mappings":"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"}