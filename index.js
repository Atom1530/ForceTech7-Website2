import{a as An,S as En,i as ve}from"./assets/vendor-BGCTnJtW.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();const kn=/localhost|127\.0\.0\.1/.test(location.hostname)||(document.documentElement.getAttribute("data-env")||"").toLowerCase()==="dev",nt=(...e)=>{kn&&console.warn(...e)},rt=An.create({baseURL:"https://sound-wave.b.goit.study/api",timeout:15e3});async function Sn({page:e=1,limit:t=8,genre:n="",sort:o="",name:i=""}={}){var c;try{const u={page:Math.max(1,Number(e)||1),limit:Math.max(1,Number(t)||8)},p=String(o).toLowerCase();(p==="asc"||p==="desc")&&(u.sortName=p);const _=String(n).trim();_&&_!=="All Genres"&&(u.genre=_);const L=String(i).trim();L.length>=1&&(u.name=L);const{data:h}=await rt.get("/artists",{params:u});return{artists:Array.isArray(h==null?void 0:h.artists)?h.artists:[],totalArtists:Number((h==null?void 0:h.totalArtists)||0),page:Number((h==null?void 0:h.page)||u.page),limit:Number((h==null?void 0:h.limit)||u.limit)}}catch(u){nt("[api] fetchArtists",(u==null?void 0:u.message)||u);try{(c=window.__toast)==null||c.error("Не удалось загрузить артистов. Попробуйте позже.")}catch{}return{artists:[],totalArtists:0,page:1,limit:t}}}async function xn(){var e;try{const{data:t}=await rt.get("/genres"),o=(Array.isArray(t)?t:(t==null?void 0:t.genres)||[]).map(c=>typeof c=="string"?c:(c==null?void 0:c.name)||(c==null?void 0:c.title)||(c==null?void 0:c.genre)||(c==null?void 0:c.label)||"").filter(Boolean);return["All Genres",...[...new Set(o)]]}catch(t){nt("[api] fetchGenres",(t==null?void 0:t.message)||t);try{(e=window.__toast)==null||e.error("Не удалось загрузить жанры.")}catch{}return["All Genres"]}}async function Tn(e){var t;try{const{data:n}=await rt.get(`/artists/${e}`);return n||null}catch(n){nt("[api] fetchArtist",(n==null?void 0:n.message)||n);try{(t=window.__toast)==null||t.error("Не удалось загрузить артиста.")}catch{}return null}}async function Mn(e){var t;try{const{data:n}=await rt.get(`/artists/${e}/albums`);return Array.isArray(n)?n:Array.isArray(n==null?void 0:n.albumsList)?n.albumsList:Array.isArray(n==null?void 0:n.albums)?n.albums:[]}catch(n){nt("[api] albums",(n==null?void 0:n.message)||n);try{(t=window.__toast)==null||t.error("Не удалось загрузить альбомы.")}catch{}return[]}}let E,ke,he,Ce,et=!1;function Gt(){if(et)return;const e=window.AudioContext||window.webkitAudioContext;if(!e)return;E=new e,he=E.createDynamicsCompressor(),he.threshold.value=-26,he.knee.value=22,he.ratio.value=6,he.attack.value=.004,he.release.value=.08,Ce=E.createBiquadFilter(),Ce.type="lowpass",Ce.frequency.value=2300,Ce.Q.value=.6,ke=E.createGain(),ke.gain.value=.11,ke.connect(Ce),Ce.connect(he),he.connect(E.destination);const t=()=>{try{E.resume()}catch{}window.removeEventListener("pointerdown",t),window.removeEventListener("keydown",t),window.removeEventListener("touchstart",t)};window.addEventListener("pointerdown",t,{once:!0,passive:!0}),window.addEventListener("keydown",t,{once:!0}),window.addEventListener("touchstart",t,{once:!0,passive:!0}),et=!0}function Wt(){E&&E.state==="suspended"&&E.resume()}function qn(){if(et||Gt(),!E)return;Wt();const e=E.currentTime+.004,t=.055,n=E.createBufferSource(),o=E.createBuffer(1,Math.max(32,E.sampleRate*t|0),E.sampleRate),i=o.getChannelData(0);for(let k=0;k<i.length;k++){const P=k/i.length;i[k]=(Math.random()*2-1)*Math.pow(1-P,2)}n.buffer=o;const c=E.createBiquadFilter();c.type="bandpass",c.frequency.value=2050,c.Q.value=.9;const u=E.createBiquadFilter();u.type="highpass",u.frequency.value=360,u.Q.value=.7;const p=E.createGain();p.gain.setValueAtTime(1e-4,e),p.gain.linearRampToValueAtTime(.45,e+.004),p.gain.exponentialRampToValueAtTime(1e-4,e+.055),n.connect(c),c.connect(u),u.connect(p),p.connect(ke),n.start(e),n.stop(e+.06);const _=E.createOscillator();_.type="triangle",_.frequency.setValueAtTime(2100,e);const L=E.createGain();L.gain.setValueAtTime(1e-4,e),L.gain.linearRampToValueAtTime(.2,e+.003),L.gain.exponentialRampToValueAtTime(1e-4,e+.05),_.connect(L),L.connect(ke),_.start(e),_.stop(e+.055);const h=E.createOscillator();h.type="sine",h.frequency.setValueAtTime(165,e);const w=E.createGain();w.gain.setValueAtTime(1e-4,e),w.gain.linearRampToValueAtTime(.05,e+.003),w.gain.exponentialRampToValueAtTime(1e-4,e+.042),h.connect(w),w.connect(ke),h.start(e),h.stop(e+.045)}function Pn(){if(et||Gt(),!E)return;Wt();const e=E.currentTime+.003,t=E.createOscillator();t.type="triangle",t.frequency.setValueAtTime(1750,e);const n=E.createGain();n.gain.setValueAtTime(1e-4,e),n.gain.linearRampToValueAtTime(.17,e+.003),n.gain.exponentialRampToValueAtTime(1e-4,e+.06),t.connect(n),n.connect(ke),t.start(e),t.stop(e+.065)}const f={tap:qn,page:Pn},Cn=e=>(e==null?void 0:e.idArtist)||(e==null?void 0:e.id)||(e==null?void 0:e._id)||(e==null?void 0:e.artistId)||"",$n=e=>Array.isArray(e==null?void 0:e.genres)?e.genres:typeof(e==null?void 0:e.strGenre)=="string"&&e.strGenre.trim()?e.strGenre.split(/,\s*/).filter(Boolean):e!=null&&e.genre?[e.genre]:[],Yn="https://via.placeholder.com/960x540?text=No+Image",jt=(e={})=>({id:Cn(e),name:e.strArtist||e.name||"Unknown artist",image:e.strArtistThumb||e.thumb||e.photo||e.image||Yn,country:e.strCountry||e.country||"N/A",members:e.intMembers||e.members||"N/A",gender:e.strGender||e.sex||"N/A",biography:e.strBiographyEN||e.biography||e.about||"",genres:$n(e),formedYear:e.intFormedYear||e.formedYear||e.yearStart||null,endedYear:e.intDisbandedYear||e.intDiedYear||e.disbandedYear||e.yearEnd||null}),Nn=(e={})=>({title:e.strTrack||e.title||e.name||"—",duration:Number(e.intDuration??e.duration??e.time??0),youtube:e.strMusicVid||e.youtube||e.youtube_url||e.url||e.movie||""}),Dn=(e={})=>{const t=Array.isArray(e.tracks)?e.tracks:Array.isArray(e.songs)?e.songs:Array.isArray(e.track)?e.track:[];return{title:e.strAlbum||e.title||e.name||"Album",tracks:t.map(Nn)}};async function In(e){const t=await Sn(e),o=(Array.isArray(t==null?void 0:t.artists)?t.artists:Array.isArray(t)?t:[]).map(jt),i=Number((t==null?void 0:t.totalArtists)??(t==null?void 0:t.total)??o.length);return{artists:o,totalArtists:i}}async function Bn(){const e=await xn();return Array.isArray(e)?e:Array.isArray(e==null?void 0:e.genres)?e.genres:[]}async function Xt(e){const t=await Tn(e),n=Array.isArray(t)?t[0]:Array.isArray(t==null?void 0:t.artists)?t.artists[0]:t;return n?jt(n):null}async function Jt(e){const t=await Mn(e);return(Array.isArray(t)?t:Array.isArray(t==null?void 0:t.albums)?t.albums:Array.isArray(t==null?void 0:t.album)?t.album:[]).map(Dn)}const Xe={page:1,limit:8,total:0,sort:"",genre:"",q:"",isMobilePanelOpen:!1},mt=new Set;function st(){return{...Xe}}function On(){const e=st();mt.forEach(t=>{try{t(e)}catch{}})}function Rn(e){return typeof e!="function"?()=>{}:(mt.add(e),()=>mt.delete(e))}function Hn(){return st()}function de(e={}){const t="genre"in e||"sort"in e||"q"in e,n={...Xe,...e};t&&!("page"in e)&&(n.page=1),n.page=Math.max(1,Number(n.page)||1),n.limit=Math.max(1,Number(n.limit)||8),n.total=Math.max(0,Number(n.total)||0);let o=!1;for(const i of Object.keys(n))Xe[i]!==n[i]&&(Xe[i]=n[i],o=!0);return o&&On(),st()}function zn(){return de({page:1,sort:"",genre:"",q:""})}const H={get(){return st()},setPage(e){de({page:Math.max(1,Number(e)||1)})},setLimit(e){de({limit:Math.max(1,Number(e)||8)})},setSort(e){de({sort:e||""})},setGenre(e){de({genre:e||""})},setQuery(e){de({q:(e||"").trim()})},setTotal(e){de({total:Math.max(0,Number(e)||0)})},setMobilePanel(e){de({isMobilePanelOpen:!!e})},reset(){zn()}};let Je=0,ft=0;function Vn(){if(Je++===0){ft=window.scrollY||document.documentElement.scrollTop||0;const e=document.body.style;e.position="fixed",e.top=`-${ft}px`,e.left="0",e.right="0",e.width="100%",document.body.classList.add("scroll-locked")}}function Kt(e=!1){if(e&&(Je=1),Je>0&&--Je===0){const t=document.body.style;t.position=t.top=t.left=t.right=t.width="",window.scrollTo(0,ft),document.body.classList.remove("scroll-locked")}}function Pt(){Kt(!0)}typeof window<"u"&&(window.__unlockScroll=Pt,window.addEventListener("pageshow",()=>Pt()));let We=null;function Be(){return window.YT&&window.YT.Player?Promise.resolve():(Be._p||(Be._p=new Promise((e,t)=>{const n=document.createElement("script");n.src="https://www.youtube.com/iframe_api",n.onerror=()=>t(new Error("YT API load failed")),document.head.appendChild(n);const o=setTimeout(()=>t(new Error("YT API timeout")),15e3);window.onYouTubeIframeAPIReady=()=>{clearTimeout(o),e()}})),Be._p)}const ot=/iPad|iPhone|iPod/.test(navigator.userAgent);function Ct(e){if(!e)return"";if(/^[\w-]{11}$/.test(e))return e;try{const t=new URL(e);if(/youtu\.be$/.test(t.hostname))return t.pathname.slice(1);if(t.searchParams.get("v"))return t.searchParams.get("v");const n=t.pathname.match(/\/(embed|shorts|v)\/([^/?#]+)/);return n?n[2]:""}catch{return""}}const j=(e,t,n)=>Math.min(n,Math.max(t,e)),Fn=e=>{const t=e.slice();for(let n=t.length-1;n>0;n--){const o=Math.random()*(n+1)|0;[t[n],t[o]]=[t[o],t[n]]}return t};function lt(e){e=Math.max(0,Math.round(Number(e)||0));const t=Math.floor(e/60),n=String(e%60).padStart(2,"0");return`${t}:${n}`}function Zt(){var Mt,qt;if(We)return We;const e=document.createElement("div");e.className="am-player",e.innerHTML=`
    <div class="am-player__inner">
      <div class="am-player__dragzone" aria-hidden="true" title="Drag the player"></div>

      <!-- Верхние кнопки: Hide слева от Close -->
      <button class="am-player__hide" type="button" aria-label="Hide">Hide</button>
      <button class="am-player__close" type="button" aria-label="Close">×</button>

      <div class="am-player__frame">
        <div class="am-player__host" id="am-player-host"></div>
        <!-- наша кнопка YouTube поверх кадра, влево-вверх -->
        <a class="am-player__ytlink" href="#" target="_blank" rel="noopener noreferrer" aria-label="Open on YouTube">YouTube ↗</a>
      </div>

      <div class="am-player__bar">
        <div class="am-player__left">
          <button class="am-player__skip am-player__prev" type="button" aria-label="Previous">⏮</button>
          <button class="am-player__play" type="button" aria-label="Play/Pause">▶</button>
          <button class="am-player__skip am-player__next" type="button" aria-label="Next">⏭</button>
          <span class="am-player__time"><span class="am-player__cur">0:00</span> / <span class="am-player__dur">0:00</span></span>
        </div>

        <div class="am-player__progresswrap">
          <input class="am-player__progress" type="range" min="0" max="1000" value="0" step="1" aria-label="Seek">
        </div>

        <div class="am-player__right">
          <button class="am-player__mute" type="button" aria-label="Mute/Unmute">🔈</button>
          <input class="am-player__slider" type="range" min="0" max="100" value="60" step="1" aria-label="Volume">
        </div>
      </div>
    </div>
  `,document.body.appendChild(e);let t=null;const n=e.querySelector("#am-player-host"),o=e.querySelector(".am-player__close"),i=e.querySelector(".am-player__hide"),c=e.querySelector(".am-player__play"),u=e.querySelector(".am-player__prev"),p=e.querySelector(".am-player__next"),_=e.querySelector(".am-player__mute"),L=e.querySelector(".am-player__slider"),h=e.querySelector(".am-player__progress"),w=e.querySelector(".am-player__cur"),k=e.querySelector(".am-player__dur"),P=e.querySelector(".am-player__dragzone"),m=e.querySelector(".am-player__ytlink");let a=null,M=!1,v=0,R=null,C=!1,F=60,we=!1,S=[],x=-1,Z=!1;const xe="amPlayerPos";let Q=null;const T="amBubblePos2";let ge=!1,U=null,se=null,Te=null;ot&&(L.disabled=!0,L.title="On iOS the volume is hardware-only");function ae(r){e.classList.toggle("am-player--active",!!r),r&&re()}function ie(r){e.classList.toggle("am-player--min",!!r),r?qe(!0):re()}function oe(r){c.textContent=r?"⏸":"▶"}function Ne(r){_.textContent=r?"🔇":"🔈"}function Fe(r,l){if(w.textContent=lt(r),k.textContent=lt(l),!we){const y=l>0?Math.round(r/l*1e3):0;h.value=String(y)}}function le(){R&&(clearInterval(R),R=null)}function ee(){le(),R=setInterval(()=>{if(!M||!a||typeof a.getCurrentTime!="function")return;const r=a.getCurrentTime()||0,l=v||a.getDuration()||0;v=l,Fe(r,l)},250)}function te(){Te&&(clearTimeout(Te),Te=null)}function ce(r=2e3){setTimeout(Me,r)}function Qe(r){return Be().then(()=>{if(a){try{a.destroy()}catch{}a=null}n.innerHTML='<div id="am-player-yt"></div>',a=new YT.Player("am-player-yt",{host:"https://www.youtube-nocookie.com",videoId:r,playerVars:{autoplay:1,rel:0,modestbranding:1,controls:1,enablejsapi:1,origin:location.origin},events:{onReady:()=>{M=!0,v=a.getDuration()||0,Fe(0,v),!ot&&typeof a.setVolume=="function"&&a.setVolume(F),C&&a.mute&&a.mute(),oe(!0),V(!0),Tt(F),ee(),te(),Te=setTimeout(()=>{try{a&&a.getPlayerState&&a.getPlayerState()!==YT.PlayerState.PLAYING&&(console.warn("Watchdog: видео не стартовало — пропускаем."),V(!1),ce(0))}catch{}},6e3)},onStateChange:l=>{l.data===YT.PlayerState.PLAYING?(te(),oe(!0),V(!0),ee()):l.data===YT.PlayerState.PAUSED?(oe(!1),V(!1),le()):l.data===YT.PlayerState.ENDED&&(oe(!1),V(!1),le(),te(),Me())},onError:l=>{console.error("YT Player error:",l==null?void 0:l.data),oe(!1),V(!1),le(),te(),ce(1200)}}})})}async function G(r){if(!S.length)return;x=j(r,0,S.length-1);const l=S[x];if(!l||!/^[\w-]{11}$/.test(l))return console.warn("Некорректный YouTube ID, пропускаю:",l),ce(0);m.href=`https://www.youtube.com/watch?v=${l}`,ae(!0),M=!1,v=0,le(),te();try{await Qe(l)}catch(y){console.error("Не удалось воспроизвести:",l,y),ce(1200)}}function Me(){S.length&&(x<S.length-1?G(x+1):Z&&G(0))}function _e(){var y,A;const r=((y=window.visualViewport)==null?void 0:y.width)||document.documentElement.clientWidth||window.innerWidth,l=((A=window.visualViewport)==null?void 0:A.height)||document.documentElement.clientHeight||window.innerHeight;return{w:r,h:l}}function s(){if(!e.classList.contains("am-player--free"))return;const r=e.getBoundingClientRect(),{w:l,h:y}=_e();let A=j(r.left,8,Math.max(8,l-r.width-8)),I=j(r.top,8,Math.max(8,y-r.height-8));e.style.left=`${A}px`,e.style.top=`${I}px`;try{localStorage.setItem(xe,JSON.stringify({left:A,top:I}))}catch{}}function d(){let r=null;try{r=JSON.parse(localStorage.getItem(xe)||"null")}catch{}r&&Number.isFinite(r.left)&&Number.isFinite(r.top)?(e.classList.add("am-player--free"),e.style.transform="none",e.style.left=`${r.left}px`,e.style.top=`${r.top}px`,e.style.right="auto",e.style.bottom="auto",s()):(e.classList.remove("am-player--free"),e.style.left="",e.style.top="",e.style.right="",e.style.bottom="",e.style.transform="")}function g(r){var l;if(!e.classList.contains("am-player--free")){const y=e.getBoundingClientRect();e.classList.add("am-player--free"),e.style.transform="none",e.style.left=`${y.left}px`,e.style.top=`${y.top}px`,e.style.right="auto",e.style.bottom="auto"}Q={startX:r.clientX,startY:r.clientY,baseLeft:parseFloat(e.style.left||"0"),baseTop:parseFloat(e.style.top||"0")},P.classList.add("dragging");try{(l=P.setPointerCapture)==null||l.call(P,r.pointerId)}catch{}}function Y(r){if(!Q)return;let l=Q.baseLeft+(r.clientX-Q.startX),y=Q.baseTop+(r.clientY-Q.startY);const A=e.getBoundingClientRect(),{w:I,h:ne}=_e();l=j(l,8,Math.max(8,I-A.width-8)),y=j(y,8,Math.max(8,ne-A.height-8)),e.style.left=`${l}px`,e.style.top=`${y}px`}function W(r){var l;if(Q){try{(l=P.releasePointerCapture)==null||l.call(P,r.pointerId)}catch{}P.classList.remove("dragging"),Q=null,s()}}P.addEventListener("pointerdown",g),window.addEventListener("pointermove",Y),window.addEventListener("pointerup",W),window.addEventListener("resize",s),(Mt=window.visualViewport)==null||Mt.addEventListener("resize",s),window.addEventListener("orientationchange",s);function N(){return t||(t=document.createElement("button"),t.className="am-player__bubble is-paused",t.type="button",t.setAttribute("aria-label","Open player"),t.style.display="none",t.style.left="auto",t.style.top="auto",t.style.right="auto",t.style.bottom="auto",t.innerHTML='<span class="note">♪</span>',document.body.appendChild(t),t.addEventListener("pointerdown",r=>{ge=!1;try{t.setPointerCapture(r.pointerId)}catch{}const l=t.getBoundingClientRect();U={x:r.clientX,y:r.clientY,left:l.left,top:l.top}}),t.addEventListener("pointermove",r=>{if(!U)return;const l=r.clientX-U.x,y=r.clientY-U.y;Math.abs(l)+Math.abs(y)>3&&(ge=!0);const A=U.left+l|0,I=U.top+y|0;t.style.right="auto",t.style.bottom="auto",t.style.left=`${A}px`,t.style.top=`${I}px`}),t.addEventListener("pointerup",r=>{try{t.releasePointerCapture(r.pointerId)}catch{}ge||ie(!1),De(),Ie(),U=null,ge=!1}),t)}function D(){const r=document.documentElement.clientWidth||window.innerWidth,l=document.documentElement.clientHeight||window.innerHeight;return{w:r,h:l}}function q(r,l,y,A){const{w:I,h:ne}=D(),ue=Math.max(1,I-y),Pe=Math.max(1,ne-A);se={left:r,top:l,width:y,height:A,rx:j(r/ue,0,1),ry:j(l/Pe,0,1)};try{localStorage.setItem(T,JSON.stringify(se))}catch{}}function Le(){if(se&&Number.isFinite(se.left)&&Number.isFinite(se.top))return se;try{const r=JSON.parse(localStorage.getItem(T)||"null");if(r&&Number.isFinite(r.rx)&&Number.isFinite(r.ry))return r}catch{}return null}function Ae(r,l=64){const{w:y,h:A}=D(),I=(r==null?void 0:r.width)||l,ne=(r==null?void 0:r.height)||l,ue=Math.max(1,y-I),Pe=Math.max(1,A-ne),Ge=j(Math.round(((r==null?void 0:r.rx)??.5)*ue),8,ue),Ln=j(Math.round(((r==null?void 0:r.ry)??.8)*Pe),8,Pe);return{left:Ge,top:Ln}}function qe(r=!0){const l=N();l.style.right="auto",l.style.bottom="auto",l.style.display="grid";const y=l.getBoundingClientRect();let A=r?Le():null,I,ne;if(A){const ue=Ae(A,y.width||64);I=ue.left,ne=ue.top}else{const{w:ue,h:Pe}=_e(),Ge=y.width||64;I=Math.max(8,Math.round((ue-Ge)/2)),ne=Math.max(8,Math.round(Pe-Ge-24))}l.style.left=`${I}px`,l.style.top=`${ne}px`,De(),Ie()}function re(){t&&(t.style.display="none")}function V(r){N().classList.toggle("is-paused",!r)}function Tt(r){const l=N(),y=1.02+Math.max(0,Math.min(100,r))/100*.08;l.style.setProperty("--amp",y.toFixed(3))}function De(r=8){if(!t||t.style.display==="none")return;const{w:l,h:y}=_e(),A=t.getBoundingClientRect();let I=j(A.left,r,Math.max(r,l-A.width-r)),ne=j(A.top,r,Math.max(r,y-A.height-r));t.style.right="auto",t.style.bottom="auto",t.style.left=`${I}px`,t.style.top=`${ne}px`}function Ie(){if(!t||t.style.display==="none")return;const r=t.getBoundingClientRect();q(r.left,r.top,r.width,r.height)}window.addEventListener("resize",()=>{De(),Ie()}),(qt=window.visualViewport)==null||qt.addEventListener("resize",()=>{De(),Ie()}),window.addEventListener("orientationchange",()=>{De(),Ie()}),o.addEventListener("click",()=>{var r,l;try{(r=a==null?void 0:a.stopVideo)==null||r.call(a),(l=a==null?void 0:a.destroy)==null||l.call(a)}catch{}a=null,M=!1,v=0,le(),te(),ae(!1),ie(!1),S=[],x=-1,V(!1)}),i.addEventListener("click",()=>{ie(!0)}),m.addEventListener("click",()=>{var r,l;try{(r=a==null?void 0:a.stopVideo)==null||r.call(a),(l=a==null?void 0:a.destroy)==null||l.call(a)}catch{}a=null,M=!1,v=0,le(),te(),ae(!1),ie(!1),S=[],x=-1,V(!1)}),c.addEventListener("click",()=>{var l,y;if(!M||!a)return;(a.getPlayerState?a.getPlayerState():-1)===YT.PlayerState.PLAYING?((l=a.pauseVideo)==null||l.call(a),oe(!1),V(!1)):((y=a.playVideo)==null||y.call(a),oe(!0),V(!0))}),u.addEventListener("click",()=>{S.length&&G(x>0?x-1:Z?S.length-1:0)}),p.addEventListener("click",()=>{S.length&&G(x<S.length-1?x+1:Z?0:x)}),_.addEventListener("click",()=>{var r,l;a&&(C=!C,C?(r=a.mute)==null||r.call(a):(l=a.unMute)==null||l.call(a),Ne(C))}),L.addEventListener("input",()=>{var l,y,A;const r=Number(L.value)||0;F=r,ot||(l=a==null?void 0:a.setVolume)==null||l.call(a,r),r===0&&!C?(C=!0,(y=a==null?void 0:a.mute)==null||y.call(a),Ne(!0)):r>0&&C&&(C=!1,(A=a==null?void 0:a.unMute)==null||A.call(a),Ne(!1)),Tt(r)}),h.addEventListener("input",()=>{we=!0;const r=Number(h.value)||0,l=v>0?r/1e3*v:0;w.textContent=lt(l)}),h.addEventListener("change",()=>{var y;if(we=!1,!a||!v)return;const l=(Number(h.value)||0)/1e3*v;(y=a.seekTo)==null||y.call(a,l,!0)});async function yn(r){const l=Ct(r);l&&(S=[l],x=0,ie(!1),ae(!0),d(),await G(0))}async function gn(r,l={}){const y=(r||[]).map(Ct).filter(Boolean);if(!y.length)return;Z=!!l.loop,S=l.shuffle?Fn(y):y.slice();const I=j(Number(l.startIndex??0)||0,0,S.length-1);ie(!1),ae(!0),d(),await G(I)}function hn(){S.length&&G(x<S.length-1?x+1:Z?0:x)}function vn(){S.length&&G(x>0?x-1:Z?S.length-1:0)}function bn(){return e.classList.contains("am-player--active")&&!e.classList.contains("am-player--min")}function wn(){ie(!0)}function _n(){o.click()}return We={open:yn,openQueue:gn,next:hn,prev:vn,minimize:wn,isActive:bn,close:_n},We}let $,$t,pt,b,yt,ct,ut,Ye=!1,wt=0,_t=0,X=0,J=0,B=1,gt=0,ht=0,Ke=0,Ze=0;const z=new Map;let Re=!1,at=0,Lt=1;const tt=(e,t,n)=>Math.max(t,Math.min(n,e)),Ut=(e,t)=>Math.hypot(e.x-t.x,e.y-t.y),Qn=(e,t)=>({x:(e.x+t.x)/2,y:(e.y+t.y)/2});function Gn(){if($)return;$=document.createElement("div"),$.className="am-zoom",$.innerHTML=`
    <div class="am-zoom__backdrop"></div>
    <div class="am-zoom__dialog" role="dialog" aria-modal="true" aria-label="Image preview">
      <div class="am-zoom__stage">
        <img class="am-zoom__img" alt="">
      </div>
      <div class="am-zoom__bar">
        <a class="am-zoom__open" href="#" target="_blank" rel="noopener noreferrer">Open original ↗</a>
        <button class="am-zoom__close" type="button" aria-label="Close">×</button>
      </div>
    </div>`,document.body.appendChild($),Object.assign($.style,{position:"fixed",inset:"0",zIndex:"6000",display:"none"}),$t=$.querySelector(".am-zoom__dialog"),Object.assign($t.style,{position:"absolute",inset:"0",display:"grid",gridTemplateRows:"1fr auto",gap:"12px",padding:"16px"}),ut=$.querySelector(".am-zoom__backdrop"),Object.assign(ut.style,{position:"absolute",inset:"0",background:"rgba(0,0,0,.7)"}),pt=$.querySelector(".am-zoom__stage"),Object.assign(pt.style,{position:"relative",background:"#000",borderRadius:"12px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"240px",height:"calc(100vh - 140px)",touchAction:"none"}),b=$.querySelector(".am-zoom__img"),b.style.maxWidth="100%",b.style.maxHeight="100%",b.style.width="auto",b.style.setProperty("height","auto","important"),b.style.objectFit="contain",b.style.transformOrigin="center center",b.style.willChange="transform",b.style.userSelect="none",b.style.webkitUserDrag="none",b.style.pointerEvents="auto";const e=$.querySelector(".am-zoom__bar");Object.assign(e.style,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"}),yt=$.querySelector(".am-zoom__open"),yt.style.color="#fff",ct=$.querySelector(".am-zoom__close"),Object.assign(ct.style,{width:"40px",height:"40px",borderRadius:"10px",border:"none",background:"var(--color-affair, #764191)",color:"#fff",cursor:"pointer"}),ut.addEventListener("click",dt),ct.addEventListener("click",dt),$.addEventListener("wheel",Xn,{passive:!1}),b.addEventListener("dblclick",jn),b.addEventListener("pointerdown",Jn),b.addEventListener("pointermove",Kn),b.addEventListener("pointerup",Yt),b.addEventListener("pointercancel",Yt),document.addEventListener("keydown",t=>{t.key==="Escape"&&vt()&&dt()}),window.addEventListener("resize",()=>{vt()&&(en(),be())})}function Wn(){const e=b.style.transform;b.style.transform="translate3d(0,0,0) scale(1)";const t=b.getBoundingClientRect();b.style.transform=e,gt=t.width,ht=t.height}function en(){const e=pt.getBoundingClientRect();Ke=e.width,Ze=e.height}function tn(){if(!gt||!ht||!Ke||!Ze)return;const e=gt*B,t=ht*B;if(e<=Ke)X=0;else{const n=(e-Ke)/2;X=tt(X,-n,n)}if(t<=Ze)J=0;else{const n=(t-Ze)/2;J=tt(J,-n,n)}}function be(){tn(),b.style.transform=`translate3d(${X}px, ${J}px, 0) scale(${B})`,b.style.cursor=B>1?Ye?"grabbing":"grab":"zoom-in"}function nn(e,t=""){if(!e)return;Gn(),z.clear(),Re=!1,at=0,Lt=1,Ye=!1,wt=_t=0,X=J=0,B=1,b.src=e,b.alt=t||"",yt.href=e,$.style.display="block";const n=()=>{en(),Wn(),tn(),be()};b.complete&&b.naturalWidth>0?requestAnimationFrame(n):b.onload=()=>requestAnimationFrame(n)}function dt(){$&&($.style.display="none",b.src="",z.clear(),Re=!1)}function vt(){return!!($&&$.style.display!=="none")}function jn(){B=B>1?1:2,B===1&&(X=0,J=0),be()}function Xn(e){if(!vt())return;e.preventDefault();const t=tt(B+(e.deltaY>0?-.15:.15),1,3),n=b.getBoundingClientRect(),o={x:e.clientX,y:e.clientY},i={x:n.left+n.width/2,y:n.top+n.height/2},c=t/B;X+=(i.x-o.x)*(1-c),J+=(i.y-o.y)*(1-c),B=t,B===1&&(X=0,J=0),be()}function Jn(e){if(z.set(e.pointerId,{x:e.clientX,y:e.clientY}),b.setPointerCapture(e.pointerId),z.size===2){const[t,n]=Array.from(z.values());Re=!0,at=Ut(t,n)||1,Lt=B,Ye=!1;return}z.size===1&&B>1&&(Ye=!0,wt=e.clientX-X,_t=e.clientY-J,be())}function Kn(e){if(z.has(e.pointerId)){if(z.set(e.pointerId,{x:e.clientX,y:e.clientY}),Re&&z.size>=2){const[t,n]=Array.from(z.values()),o=Ut(t,n)||1;let i=tt(Lt*(o/at),1,3);const c=Qn(t,n),u=b.getBoundingClientRect(),p={x:u.left+u.width/2,y:u.top+u.height/2},_=i/B;X+=(p.x-c.x)*(1-_),J+=(p.y-c.y)*(1-_),B=i,B===1&&(X=0,J=0),be();return}Ye&&z.size===1&&B>1&&(X=e.clientX-wt,J=e.clientY-_t,be())}}function Yt(e){z.has(e.pointerId)&&z.delete(e.pointerId);try{b.releasePointerCapture(e.pointerId)}catch{}z.size<2&&(Re=!1,at=0),z.size===0&&(Ye=!1,be())}const Zn="/img/sprite.svg";function Un(e){const t=Number(e);if(!Number.isFinite(t))return"—";const n=Math.round(t/1e3),o=Math.floor(n/60),i=String(n%60).padStart(2,"0");return`${o}:${i}`}function er(e={}){const t=e.intFormedYear||e.yearStart||e.formedYear,n=e.intDisbandedYear||e.intDiedYear||e.yearEnd||e.disbandedYear;return t&&n?`${t}–${n}`:t?`${t}–present`:"information missing"}function tr(e={}){const t=e.strTrack||e.title||e.name||"—",n=Un(e.intDuration??e.duration??e.time),o=e.movie??e.youtube??e.youtube_url??e.url??e.strMusicVid;return`
    <li class="tr">
      <span>${t}</span>
      <span>${n}</span>
      <span>${o?`<a class="yt" href="${o}" target="_blank" rel="noopener noreferrer" aria-label="Play">
               <svg class="ico am-yt" aria-hidden="true">
                 <use href="${Zn}#icon-icon_youtube_footer"></use>
               </svg>
             </a>`:'<span class="yt-ph"></span>'}</span>
    </li>`}function nr(e=document){let t=e.querySelector("#artist-modal");return t||(t=e.createElement("div"),t.id="artist-modal",t.className="amodal",t.setAttribute("hidden",""),t.innerHTML=`
    <div class="amodal__backdrop"></div>
    <div class="amodal__dialog" role="dialog" aria-modal="true" aria-label="Artist details">
      <button id="am-close" class="amodal__close" type="button" aria-label="Close">×</button>
      <div id="am-body" class="amodal__body">
        <div class="amodal__loader loader"></div>
      </div>
    </div>`,e.body.appendChild(t),t)}function rn(e=document){const t=(e&&e.querySelector?e.querySelector("#artist-modal"):null)||document.querySelector("#artist-modal")||nr(document),n=t.querySelector("#am-body"),o=t.querySelector("#am-close"),i=t.querySelector(".amodal__dialog"),c=Zt();let u=null,p=null;function _(){var m;u||(u=document.createElement("button"),u.type="button",u.className="amodal__scrolltop",u.setAttribute("aria-label","Scroll to top"),u.textContent="↑",i.appendChild(u),u.addEventListener("click",()=>{var a;(a=f==null?void 0:f.tap)==null||a.call(f),i.scrollTo({top:0,behavior:"smooth"})}),p=()=>{const M=i.getBoundingClientRect(),v=Math.max(24,window.innerWidth-(M.left+M.width)+24);u.style.right=`${v}px`,u.style.bottom="28px"},i.addEventListener("scroll",()=>{u.style.display=(i.scrollTop||0)>220?"flex":"none",p()}),window.addEventListener("resize",p),(m=window.visualViewport)==null||m.addEventListener("resize",p),window.addEventListener("orientationchange",p),p())}function L(){t.removeAttribute("hidden"),Vn(),_(),u&&(u.style.display="none"),n.innerHTML='<div class="amodal__loader loader"></div>',document.addEventListener("keydown",w)}function h(){var m;t.setAttribute("hidden",""),Kt(),n.innerHTML="",document.removeEventListener("keydown",w),u&&(u.style.display="none"),p&&(window.removeEventListener("resize",p),(m=window.visualViewport)==null||m.removeEventListener("resize",p),window.removeEventListener("orientationchange",p),p=null)}const w=m=>{var a;m.key==="Escape"&&((a=f==null?void 0:f.tap)==null||a.call(f),h())};o.addEventListener("click",()=>{var m;(m=f==null?void 0:f.tap)==null||m.call(f),h()}),t.addEventListener("click",m=>{var a;m.target.classList.contains("amodal__backdrop")&&((a=f==null?void 0:f.tap)==null||a.call(f),h())}),t.addEventListener("click",m=>{var v,R;const a=m.target.closest("a.yt");if(a){m.preventDefault(),(v=f==null?void 0:f.tap)==null||v.call(f),c.open(a.href);return}const M=m.target.closest(".amodal__img");if(M){(R=f==null?void 0:f.tap)==null||R.call(f);const C=M.currentSrc||M.getAttribute("src")||M.getAttribute("data-src")||"";nn(C,M.getAttribute("alt")||"")}});async function k(m){const[a,M]=await Promise.all([Xt(m).catch(()=>({})),Jt(m).catch(()=>[])]),v=a||{},R=v.strArtist||v.name||"Unknown artist",C=v.strArtistThumb||v.photo||v.image||"https://via.placeholder.com/960x540?text=No+Image",F=v.strCountry||v.country||"N/A",we=v.intMembers||v.members||"N/A",S=v.strGender||v.sex||"N/A",x=v.strBiographyEN||v.about||"",Z=Array.isArray(v.genres)?v.genres:v.genre?[v.genre]:[],Q=(Array.isArray(M)?M:[]).map(T=>{const ge=(T==null?void 0:T.strAlbum)||(T==null?void 0:T.title)||(T==null?void 0:T.name)||"Album",U=Array.isArray(T==null?void 0:T.tracks)?T.tracks:Array.isArray(T==null?void 0:T.songs)?T.songs:[];return`
        <div class="am-album">
          <div class="am-album__title">${ge}</div>
          <ul class="tbl">
            <li class="th"><span>Track</span><span>Time</span><span>Link</span></li>
            ${U.map(tr).join("")}
          </ul>
        </div>`}).join("");n.innerHTML=`
      <h3 class="amodal__title">${R}</h3>

      <div class="amodal__content">
        <img class="amodal__img" src="${C}" alt="${R}" loading="lazy">
        <div class="amodal__info">
          <div class="am-meta">
            <div class="am-meta__col">
              <div class="am-meta__item"><span class="lbl">Years active</span><span class="val">${er(v)}</span></div>
              <div class="am-meta__item"><span class="lbl">Sex</span><span class="val">${S}</span></div>
            </div>
            <div class="am-meta__col">
              <div class="am-meta__item"><span class="lbl">Members</span><span class="val">${we}</span></div>
              <div class="am-meta__item"><span class="lbl">Country</span><span class="val">${F}</span></div>
            </div>
          </div>

          <div class="am-bio">
            <div class="lbl">Biography</div>
            <p>${x||"—"}</p>
          </div>

          ${Z.length?`<div class="am-tags">${Z.map(T=>`<span class="tag">${T}</span>`).join("")}</div>`:""}
        </div>
      </div>

      <h4 class="amodal__albums-title">Albums</h4>
      <div class="amodal__albums">
        ${Q||"<p class='muted'>No albums found for this artist.</p>"}
      </div>`}async function P(m){var a;(a=f==null?void 0:f.tap)==null||a.call(f),L(),await k(m)}return{openFor:P,close:h}}function rr(e=document.querySelector("#artists-section")){var _e;if(!e)return;const t=e.querySelector("#filters-panel"),n=e.querySelector("#filters-toggle"),o=e.querySelector("#filters-reset"),i=e.querySelector("#filters-reset-sm"),c=e.querySelector("#view-toggle"),u=e.querySelector("#flt-q"),p=e.querySelector("#flt-q-btn"),_=e.querySelector('.dd[data-dd="sort"]'),L=e.querySelector("#dd-sort-btn"),h=e.querySelector("#dd-sort-list"),w=e.querySelector('.dd[data-dd="genre"]'),k=e.querySelector("#dd-genre-btn"),P=e.querySelector("#dd-genre-list"),m=e.querySelector("#artists-grid"),a=e.querySelector("#artists-pager"),M=e.querySelector("#artists-empty"),v=rn(document);let R=0;const C=s=>s&&s.removeAttribute("hidden"),F=s=>s&&s.setAttribute("hidden",""),we=()=>matchMedia("(min-width:1440px)").matches,S=s=>((s==null?void 0:s.strArtist)||(s==null?void 0:s.name)||"").toLowerCase();function x(){const s=H.get();we()?(t==null||t.setAttribute("aria-hidden","false"),n==null||n.setAttribute("aria-expanded","false"),H.setMobilePanel(!1)):(t==null||t.setAttribute("aria-hidden",s.isMobilePanelOpen?"false":"true"),n==null||n.setAttribute("aria-expanded",s.isMobilePanelOpen?"true":"false"))}function Z(){const s=e.getBoundingClientRect().top+window.scrollY-16;window.scrollTo({top:s,behavior:"smooth"})}function xe(s){s?(C(M),F(m),F(a),Q()):(F(M),C(m))}function Q(){m.style.height="",m.style.overflow="",m.style.transition="",m.style.willChange=""}function T(){return`
      <li class="card card--skel">
        <div class="card__media skel skel--media"></div>
        <div class="card__tags">
          <span class="tag skel skel--tag"></span>
          <span class="tag skel skel--tag"></span>
        </div>
        <div class="skel skel--title"></div>
        <div class="skel skel--text"></div>
      </li>`}function ge(s){const d=Math.max(1,Number(s)||8);m.innerHTML=new Array(d).fill(0).map(T).join(""),C(m),F(M),F(a)}function U(){m.querySelectorAll("img.img-fade").forEach(d=>{const g=()=>d.classList.add("is-loaded");d.complete&&d.naturalWidth>0?g():d.addEventListener("load",g,{once:!0})})}let se=null;function Te(s){const d=s??m.getBoundingClientRect().height;m.style.willChange="height",m.style.overflow="hidden",m.style.transition="none",m.style.height=`${Math.max(1,Math.round(d||0))}px`}function ae(){Q()}function ie(s){s(),m.offsetHeight;const d=m.scrollHeight;m.style.transition="height 200ms ease",m.style.height=`${d}px`;const g=Y=>{Y.target!==m||Y.propertyName!=="height"||(m.removeEventListener("transitionend",g),ae())};m.addEventListener("transitionend",g),clearTimeout(se),se=setTimeout(ae,400)}function oe(s){const d=(s==null?void 0:s.id)||(s==null?void 0:s._id)||(s==null?void 0:s.artistId)||"",g=(s==null?void 0:s.strArtist)||(s==null?void 0:s.name)||"Unknown",Y=(s==null?void 0:s.strArtistThumb)||(s==null?void 0:s.photo)||(s==null?void 0:s.image)||"https://via.placeholder.com/960x540?text=No+Image",W=(s==null?void 0:s.strBiographyEN)||(s==null?void 0:s.about)||"",N=Array.isArray(s==null?void 0:s.genres)?s.genres:s!=null&&s.genre?[s.genre]:[];return`
      <li class="card" data-id="${d}">
        <div class="card__media">
          <img
            class="img-fade"
            src="${Y}"
            srcset="${Y} 1x, ${Y} 2x"
            sizes="(min-width:1440px) 50vw, (min-width:768px) 704px, 100vw"
            alt="${g}"
            loading="lazy"
          >
        </div>
        <div class="card__tags">${N.map(q=>`<span class="tag">${q}</span>`).join("")}</div>
        <h3 class="card__title">${g}</h3>
        <p class="card__text">${W}</p>
        <button class="card__link" data-action="more">
          Learn More
          <svg class="ico" aria-hidden="true">
            <use href="img/sprite.svg#icon-icon_play_artists_sections"></use>
          </svg>
        </button>
      </li>`}function Ne(s){m.innerHTML=s.map(oe).join(""),U()}function Fe(s,d){if(d<=0){a.innerHTML="",F(a);return}if(d===1){a.innerHTML='<button class="active" data-page="1" disabled>1</button>',C(a);return}const g=(q,Le,Ae=!1,qe=!1)=>`<button ${Ae?"disabled":""} data-page="${Le}" class="${qe?"active":""}">${q}</button>`,Y=2,W=Math.max(1,s-Y),N=Math.min(d,s+Y),D=[];D.push(g("‹",Math.max(1,s-1),s===1,!1)),W>1&&(D.push(g("1",1,!1,s===1)),W>2&&D.push('<button class="dots">…</button>'));for(let q=W;q<=N;q++)D.push(g(String(q),q,!1,q===s));N<d&&(N<d-1&&D.push('<button class="dots">…</button>'),D.push(g(String(d),d,!1,s===d))),D.push(g("›",Math.min(d,s+1),s===d,!1)),a.innerHTML=D.join(""),C(a)}async function le(){try{w==null||w.classList.add("loading"),k==null||k.setAttribute("aria-busy","true"),k&&(k.disabled=!0),P.innerHTML=`
        <li class="dd__loading">
          <span class="dd__spinner" aria-hidden="true"></span>
          <span>Loading…</span>
        </li>`;const s=await Bn();P.innerHTML=s.map(d=>`<li data-val="${d}">${d}</li>`).join("")}catch{P.innerHTML='<li data-val="">All Genres</li>'}finally{w==null||w.classList.remove("loading"),k==null||k.removeAttribute("aria-busy"),k&&(k.disabled=!1)}}async function ee(s=!0){var qe;const d=++R,{page:g,limit:Y,genre:W,sort:N,q:D}=H.get();Te(m.getBoundingClientRect().height),ge(Y),F(a);let q=[],Le=0;try{const re=await In({page:g,limit:Y,genre:W||"",sort:N||"",name:((qe=D==null?void 0:D.trim)==null?void 0:qe.call(D))||""});if(d!==R)return;q=Array.isArray(re.artists)?re.artists:[],Le=Number(re.totalArtists||q.length||0)}catch{if(d!==R)return;q=[],Le=0}let Ae=Math.max(1,Math.ceil(Le/Y));if(g>Ae&&s)return H.setPage(Ae),ee(!1);if(g<1&&s)return H.setPage(1),ee(!1);if(N==="asc"&&(q=q.slice().sort((re,V)=>S(re).localeCompare(S(V)))),N==="desc"&&(q=q.slice().sort((re,V)=>S(V).localeCompare(S(re)))),d===R){if(!q.length){m.innerHTML="",xe(!0),ae();return}xe(!1),ie(()=>Ne(q)),Fe(H.get().page,Ae)}}function te(s){[_,w].forEach(d=>{if(d!==s){d.classList.remove("open");const g=d.querySelector(".dd__list");g&&(g.style.display="none")}})}function ce(s){const d=!s.classList.contains("open");te(s),s.classList.toggle("open",d);const g=s.querySelector(".dd__list");g&&(g.style.display=d?"block":"none")}n==null||n.addEventListener("click",()=>{f.tap();const s=H.get();H.setMobilePanel(!s.isMobilePanelOpen),x()}),addEventListener("resize",x),L==null||L.addEventListener("click",()=>{f.tap(),ce(_)}),k==null||k.addEventListener("click",()=>{f.tap(),ce(w)}),document.addEventListener("click",s=>{s.target.closest(".dd")||te()}),h==null||h.addEventListener("click",s=>{const d=s.target.closest("li");d&&(f.tap(),H.setSort(d.dataset.val||""),ce(_),ee())}),P==null||P.addEventListener("click",s=>{const d=s.target.closest("li");if(!d)return;f.tap();const g=d.dataset.val||"";H.setGenre(g==="All Genres"?"":g),ce(w),ee(),L==null||L.focus()});function Qe(){f.tap(),H.setQuery((u==null?void 0:u.value.trim())||""),ee()}p==null||p.addEventListener("click",Qe),u==null||u.addEventListener("keydown",s=>{s.key==="Enter"&&Qe()});function G(){H.reset(),u&&(u.value=""),te(),ee()}o==null||o.addEventListener("click",()=>{f.tap(),G()}),i==null||i.addEventListener("click",()=>{f.tap(),G(),H.setMobilePanel(!1),x()}),(_e=e.querySelector("#empty-reset"))==null||_e.addEventListener("click",()=>{f.tap(),G()}),a==null||a.addEventListener("click",s=>{const d=s.target.closest("button[data-page]");if(!d||d.disabled)return;const g=Number(d.dataset.page)||1;g!==H.get().page&&(f.page(),Z(),H.setPage(g),ee())});const Me=e.closest(".artists1")||e;c==null||c.addEventListener("click",()=>{f.tap();const s=!Me.classList.contains("view-list");Me.classList.toggle("view-list",s),Me.classList.toggle("view-grid",!s),c.setAttribute("aria-pressed",String(s)),c.textContent=s?"Default view":"List view"}),m.addEventListener("click",s=>{var Y,W;const d=s.target.closest('[data-action="more"]');if(d){const N=(W=(Y=d.closest(".card"))==null?void 0:Y.dataset)==null?void 0:W.id;if(!N)return;f.tap(),v.openFor(N);return}const g=s.target.closest(".card__media img");if(g){f.tap();const N=g.currentSrc||g.src||g.getAttribute("src")||"";nn(N,g.getAttribute("alt")||"")}}),x(),le(),ee()}function sr(){const e=new URLSearchParams(location.search),t=(e.get("q")||"").trim(),n=e.get("genre")||"",o=e.get("sort")||"",i=Math.max(1,Number(e.get("page")||1));return{q:t,genre:n,sort:o,page:i}}function ar(e){const t=new URLSearchParams;return e.q&&t.set("q",e.q),e.genre&&t.set("genre",e.genre),e.sort&&t.set("sort",e.sort),e.page&&e.page!==1&&t.set("page",String(e.page)),t.toString()}function ir(){const e=sr(),t=Hn(),n={};let o=!1;for(const c of["q","genre","sort","page"])e[c]!==void 0&&e[c]!==t[c]&&(n[c]=e[c],o=!0);o&&de(n);let i=null;Rn(c=>{const u=ar(c);if(u===i)return;i=u;const p=u?`?${u}`:location.pathname;history.replaceState(null,"",p)})}const Nt=new Map;function or(e){const t=e.querySelector("#artists-grid");if(!t)return;let n=null,o=null;function i(c){clearTimeout(n),n=setTimeout(async()=>{try{if(Nt.has(c))return;const[u,p]=await Promise.all([Xt(c),Jt(c)]);Nt.set(c,{artist:u,albums:p,ts:Date.now()})}catch{}},150)}t.addEventListener("mouseenter",c=>{var _,L;const u=c.target.closest('[data-action="more"]');if(!u)return;const p=(L=(_=u.closest(".card"))==null?void 0:_.dataset)==null?void 0:L.id;p&&(o=String(p),i(o))},!0),t.addEventListener("mouseleave",c=>{c.target.closest('[data-action="more"]')&&(clearTimeout(n),n=null,o=null)},!0)}function lr(e=document.querySelector("#artists-section")){e&&(ir(),rn(e),or(e),rr(e))}function cr(e){if(!e)return"";if(/^[\w-]{11}$/.test(e))return e;try{const t=new URL(e,location.href);if(/youtu\.be$/.test(t.hostname))return t.pathname.slice(1);if(t.searchParams.get("v"))return t.searchParams.get("v");const n=t.pathname.match(/\/(embed|shorts|v)\/([^/?#]+)/);return n?n[2]:""}catch{return""}}const it=e=>Array.from(new Set(e.filter(Boolean)));function ur(e){const t=e.slice();for(let n=t.length-1;n>0;n--){const o=Math.random()*(n+1)|0;[t[n],t[o]]=[t[o],t[n]]}return t}const dr=it(["Zi_XLOBDo_Y","3JZ_D3ELwOQ","fRh_vgS2dFE","OPf0YbXqDm0","60ItHLz5WEA","2Vv-BfVoq4g","kXYiU_JCYtU","UceaB4D0jpo","RubBzkZzpUA","kJQP7kiw5Fk","CevxZvSJLk8","pRpeEdMmmQ0","IcrbM1l_BoI","YVkUvmDQ3HY","hT_nvWreIhg","09R8_2nJtjg","uelHwf8o7_U","JGwWNGJdvx8","YQHsXMglC9A","NmugSMBh_iI","LrUvu1mlWco","hLQl3WQQoQ0","RgKAFK5djSk","SlPhMPnQ58k","oRdxUFDoQe0","09z7j-LPz1E","Pkh8UtuejGw","tt2k8PGm-TI","lY2yjAdbvdQ","pXRviuL6vMY","09tj3yqpP5g","nfs8NYg7yQM","nCkpzqqog4k","M7lc1UVf-VE","fLexgOxsZu0","2vjPBrBU-TM","JGwWNGJdvx8","9bZkp7q19f0","e-ORhEE9VVg","hLQl3WQQoQ0","OPf0YbXqDm0","dQw4w9WgXcQ","Zi_XLOBDo_Y","gCYcHz2k5x0","ktvTqknDobU","ub82Xb1C8os","ktvTqknDobU","fKopy74weus","uelHwf8o7_U","Qv5fqunQ_4I","IcrbM1l_BoI","2vjPBrBU-TM","kXYiU_JCYtU","CevxZvSJLk8","kJQP7kiw5Fk","hT_nvWreIhg","vNoKguSdy4Y","0KSOMA3QBU0","lp-EO5I60KA","DK_0jXPuIr0","tVj0ZTS4WF4","6fVE8kSM43I","SlPhMPnQ58k","6Ejga4kJUts","JGwWNGJdvx8","gGdGFtwCNBE","YVkUvmDQ3HY","rYEDA3JcQqw","AtKZKl7Bgu0","0KSOMA3QBU0","ktvTqknDobU","hT_nvWreIhg","eVTXPUF4Oz4","kffacxfA7G4"]),sn="am.radio.pool",Dt="am.radio.last";function an(){try{const e=localStorage.getItem(sn),t=e?JSON.parse(e):[];return Array.isArray(t)?it(t):[]}catch{return[]}}function mr(e){try{localStorage.setItem(sn,JSON.stringify(it(e).slice(0,800)))}catch{}}function It(e){if(!(e!=null&&e.length))return;const t=new Set(an());e.forEach(n=>t.add(n)),mr([...t])}function bt(e=document){const t=new Set;return e.querySelectorAll('a[href*="youtu"], a.yt').forEach(n=>{const o=n.getAttribute("href")||"",i=cr(o);i&&t.add(i)}),[...t]}function fr(){It(bt()),new MutationObserver(t=>{let n=[];for(const o of t)o.addedNodes&&o.addedNodes.forEach(i=>{i.nodeType===1&&(n=n.concat(bt(i)))});n.length&&It(n)}).observe(document.documentElement,{childList:!0,subtree:!0})}function pr(){const e=an(),t=bt();return it([...dr,...e,...t])}function yr(e){const t=pr();if(!t.length)return;let n=ur(t);const o=localStorage.getItem(Dt);o&&n.length>1&&n[0]===o&&n.push(n.shift()),localStorage.setItem(Dt,n[0]),e.openQueue(n,{shuffle:!1,loop:!0,startIndex:0})}document.addEventListener("DOMContentLoaded",()=>{try{lr()}catch{}const e=Zt();fr();const t=document.querySelector("#random-radio");t&&t.addEventListener("click",n=>{var o,i;n.preventDefault(),(o=e.isActive)!=null&&o.call(e)?(i=e.next)==null||i.call(e):yr(e)})});const O={openBtn:document.querySelector("[data-menu-open]"),closeBtn:document.querySelector("[data-menu-close]"),menu:document.querySelector("[data-menu]"),links:document.querySelectorAll("[data-menu-link]"),logos:document.querySelectorAll(".header-logo"),header:document.querySelector(".header")};function gr(){var e;O.menu&&(O.menu.hidden=!1,O.menu.classList.add("show"),document.body.style.overflow="hidden",(e=O.openBtn)==null||e.setAttribute("aria-expanded","true"))}function He(){return new Promise(e=>{if(!O.menu)return e();O.menu.classList.remove("show"),setTimeout(()=>{var t;O.menu.hidden=!0,document.body.style.overflow="",(t=O.openBtn)==null||t.setAttribute("aria-expanded","false"),e()},400)})}function At(){var e;return(((e=O.header)==null?void 0:e.offsetHeight)||80)+8}function Et(){document.documentElement.style.scrollPaddingTop=`${At()}px`}Et();window.addEventListener("resize",()=>requestAnimationFrame(Et));function kt(e,t=500){const n=(e||"").replace("#",""),o=document.getElementById(n)||document.getElementById(`${n}-section`);if(!o)return;const i=At(),c=o.getBoundingClientRect().top+window.pageYOffset-i,u=window.pageYOffset,p=c-u;let _=null;const L=w=>w<.5?2*w*w:1-Math.pow(-2*w+2,2)/2;function h(w){_===null&&(_=w);const k=Math.min(1,(w-_)/t);window.scrollTo(0,u+p*L(k)),k<1?requestAnimationFrame(h):(o.setAttribute("tabindex","-1"),o.focus({preventScroll:!0}),setTimeout(()=>o.removeAttribute("tabindex"),0))}requestAnimationFrame(h)}var Rt;(Rt=O.openBtn)==null||Rt.addEventListener("click",gr);var Ht;(Ht=O.closeBtn)==null||Ht.addEventListener("click",He);O.logos.forEach(e=>{e.addEventListener("click",t=>{e.closest(".mobile-menu")&&(t.preventDefault(),He(),setTimeout(()=>{window.location.href=e.getAttribute("href")},400))})});var zt;(zt=O.menu)==null||zt.addEventListener("click",e=>{e.target===O.menu&&He()});document.addEventListener("keydown",e=>{var t;e.key==="Escape"&&((t=O.menu)!=null&&t.classList.contains("show"))&&He()});const St=document.querySelectorAll(".header-nav-link, .mobile-menu-nav-link"),Oe=new Map;St.forEach(e=>{const t=(e.getAttribute("href")||"").trim();if(!t.startsWith("#"))return;const n=t.slice(1),o=document.getElementById(n)||document.getElementById(`${n}-section`);o&&(Oe.has(o)||Oe.set(o,[]),Oe.get(o).push(e))});let Bt=null;function on(e){!e||Bt===e||(St.forEach(t=>t.classList.remove("active")),(Oe.get(e)||[]).forEach(t=>t.classList.add("active")),Bt=e)}let ln=0;const hr=700,vr=()=>Date.now()<ln;let je;function cn(){je&&je.disconnect();const e=`-${At()}px 0px -55% 0px`,t=new Map;je=new IntersectionObserver(n=>{if(n.forEach(i=>{t.set(i.target,i.isIntersecting?i.intersectionRatio:0)}),vr())return;const o=[...t.entries()].sort((i,c)=>c[1]-i[1])[0];o&&o[1]>0&&on(o[0])},{root:null,rootMargin:e,threshold:[0,.25,.5,.75,1]}),Oe.forEach((n,o)=>je.observe(o))}cn();window.addEventListener("resize",()=>requestAnimationFrame(cn));St.forEach(e=>{e.addEventListener("click",t=>{if(e.matches("[data-menu-link]"))return;const n=(e.getAttribute("href")||"").trim();if(!n.startsWith("#"))return;t.preventDefault(),e.blur();const o=n.slice(1),i=document.getElementById(o)||document.getElementById(`${o}-section`);i&&(on(i),ln=Date.now()+hr,kt(n))})});O.links.forEach(e=>e.addEventListener("click",async t=>{t.preventDefault(),e.blur();const n=e.getAttribute("href");await He(),kt(n)}));window.addEventListener("load",()=>{Et(),location.hash&&setTimeout(()=>kt(location.hash),0)});const me=document.querySelector(".overlay"),$e=document.querySelector(".feedback-btn");document.querySelector(".close-btn, .close-icon");const Ue=document.querySelector("#feedback-form"),ze=document.querySelector(".feedback-section"),fe=document.querySelector(".form-input-name"),pe=document.querySelector(".form-input-message"),K=document.getElementById("customer-rating"),xt="myFeedback";$e==null||$e.setAttribute("type","button");const Ve={y:0,lock(){this.y=window.scrollY||document.documentElement.scrollTop||0,document.body.style.position="fixed",document.body.style.top=`-${this.y}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%"},unlock(){const e=this.y||0;document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",window.scrollTo(0,e),this.y=0}},un="is-error",dn="touched";function Ee(e){if(!e)return;const t=!e.value.trim();e.classList.add(dn),e.classList.toggle(un,t)}[fe,pe].forEach(e=>{e&&(e.addEventListener("blur",()=>Ee(e)),e.addEventListener("input",()=>Ee(e)))});$e==null||$e.addEventListener("click",()=>{me.classList.remove("hidden"),ze.classList.add("hidden"),Ve.lock(),Lr()});var Vt;(Vt=document.querySelector(".close-btn")||document.querySelector(".close-icon"))==null||Vt.addEventListener("click",()=>{me.classList.add("hidden"),ze.classList.remove("hidden"),Ve.unlock(),ye(document.getElementById("customer-rating"),parseInt(K.dataset.rating)||0)});me==null||me.addEventListener("click",e=>{e.target===me&&(me.classList.add("hidden"),ze.classList.remove("hidden"),Ve.unlock(),ye(document.getElementById("customer-rating"),parseInt(K.dataset.rating)||0))});document.addEventListener("keydown",e=>{e.key==="Escape"&&(me.classList.add("hidden"),ze.classList.remove("hidden"),Ve.unlock(),ye(document.getElementById("customer-rating"),parseInt(K.dataset.rating)||0))});function ye(e,t=0){if(!e)return;e.innerHTML="";const n=parseInt(t)||0;for(let o=1;o<=5;o++){const i=document.createElement("span");i.classList.add("star"),o<=n&&i.classList.add("filled"),e.appendChild(i),e.id==="customer-rating"&&(i.addEventListener("click",()=>{e.dataset.rating=o,ye(e,o),_r()}),i.addEventListener("mouseenter",()=>br(e,o)),i.addEventListener("mouseleave",()=>{const c=parseInt(K.dataset.rating)||0;ye(e,c)}))}}function br(e,t){e.querySelectorAll(".star").forEach((o,i)=>{i<t?o.classList.add("filled"):o.classList.remove("filled")})}ye(K,parseInt(K.dataset.rating)||0);const Se=new En(".swiper",{slidesPerView:1,spaceBetween:20,loop:!1,grabCursor:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0}});var Ft;(Ft=document.querySelector(".swiper-button-prev"))==null||Ft.addEventListener("click",()=>Se.slidePrev());var Qt;(Qt=document.querySelector(".swiper-button-next"))==null||Qt.addEventListener("click",()=>Se.slideNext());const Ot=document.querySelector(".swiper-pagination");Ot&&(Ot.innerHTML=`
    <span class="swiper-dots"></span>
    <span class="swiper-dots"></span>
    <span class="swiper-dots"></span>
  `);function mn(e){const t=document.querySelectorAll(".swiper-dots");t.forEach(n=>n.classList.remove("active")),t[e-1]&&t[e-1].classList.add("active")}function fn(e){return e===0?1:e===9?3:2}mn(fn(Se.realIndex));document.querySelectorAll(".swiper-dots").forEach((e,t)=>{e.addEventListener("click",()=>{const n=[0,1,9];Se.slideTo(n[t]??0)})});Se.on("slideChange",()=>{const e=Se.realIndex;mn(fn(e))});function wr(e){return Array.isArray(e)?e:e&&Array.isArray(e.data)?e.data:e&&Array.isArray(e.feedbacks)?e.feedbacks:e&&Array.isArray(e.results)?e.results:[]}async function pn(){const e=document.querySelector(".swiper-wrapper");if(e){e.innerHTML="";try{const n=await(await fetch("https://sound-wave.b.goit.study/api/feedbacks")).json();wr(n).slice(0,10).forEach((i,c)=>{const u=Math.round(Number(i==null?void 0:i.rating)||0),p=document.createElement("div");p.classList.add("swiper-slide"),p.innerHTML=`
        <div class="rating" id="rating-${c}" data-rating="${u}"></div>
        <div class="feedback">
          <p class="customer-feedback">${String((i==null?void 0:i.descr)??"")}</p>
          <h3 class="customer-name">${String((i==null?void 0:i.name)??"")}</h3>
        </div>`,e.appendChild(p),ye(p.querySelector(".rating"),u)}),Se.update()}catch{ve.error({title:"Error",message:"Bad request (invalid request params)"})}}}function _r(){const e={name:fe.value.trim(),message:pe.value.trim(),rating:parseInt(K.dataset.rating)||0};localStorage.setItem(xt,JSON.stringify(e))}function Lr(){const e=localStorage.getItem(xt);if(e)try{const t=JSON.parse(e);t!=null&&t.name&&(fe.value=t.name),t!=null&&t.message&&(pe.value=t.message),typeof(t==null?void 0:t.rating)<"u"&&(K.dataset.rating=t.rating,ye(K,parseInt(t.rating)||0)),[fe,pe].forEach(n=>Ee(n))}catch{}}function Ar(){localStorage.removeItem(xt),Ue.reset(),K.dataset.rating=0,ye(K,0),[fe,pe].forEach(e=>e.classList.remove(un,dn))}Ue==null||Ue.addEventListener("submit",async e=>{e.preventDefault();const t=fe.value.trim(),n=pe.value.trim(),o=parseInt(K.dataset.rating)||0,i=[];if(t||(Ee(fe),i.push(fe)),n||(Ee(pe),i.push(pe)),i.length)return i[0].focus(),ve.error({message:"Please fill out required fields."});if(t.length<2||t.length>16)return Ee(fe),ve.error({message:"Shortest name - 2 letters; Largest name - 16 letters"});if(n.length<10||n.length>512)return Ee(pe),ve.error({message:"Min message - 10 symbols; Max message - 512 symbols"});if(o<1||o>5)return ve.error({message:"Rating must be between '1' and '5'"});try{const c=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:t,descr:n,rating:o})});if(!c.ok)return ve.error({title:"Error:",message:`HTTP ${c.status}`});ve.success({message:"Comment posted, Thank you!",position:"center"}),Ar(),me.classList.add("hidden"),ze.classList.remove("hidden"),Ve.unlock(),pn()}catch{ve.error({message:"Bad request (invalid request body)"})}});document.addEventListener("DOMContentLoaded",pn);
//# sourceMappingURL=index.js.map
