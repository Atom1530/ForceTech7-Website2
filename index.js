import{a as It,S as Jt,i as ne}from"./assets/vendor-BGCTnJtW.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const Zt=/localhost|127\.0\.0\.1/.test(location.hostname)||(document.documentElement.getAttribute("data-env")||"").toLowerCase()==="dev",Re=(...e)=>{Zt&&console.warn(...e)},De=It.create({baseURL:"https://sound-wave.b.goit.study/api",timeout:15e3});async function Kt({page:e=1,limit:t=8,genre:n="",sort:c="",name:i=""}={}){var o;try{const l={page:Math.max(1,Number(e)||1),limit:Math.max(1,Number(t)||8)},g=String(c).toLowerCase();(g==="asc"||g==="desc")&&(l.sortName=g);const A=String(n).trim();A&&A!=="All Genres"&&(l.genre=A);const _=String(i).trim();_.length>=1&&(l.name=_);const{data:b}=await De.get("/artists",{params:l});return{artists:Array.isArray(b==null?void 0:b.artists)?b.artists:[],totalArtists:Number((b==null?void 0:b.totalArtists)||0),page:Number((b==null?void 0:b.page)||l.page),limit:Number((b==null?void 0:b.limit)||l.limit)}}catch(l){Re("[api] fetchArtists",(l==null?void 0:l.message)||l);try{(o=window.__toast)==null||o.error("Не удалось загрузить артистов. Попробуйте позже.")}catch{}return{artists:[],totalArtists:0,page:1,limit:t}}}async function Ut(){var e;try{const{data:t}=await De.get("/genres"),c=(Array.isArray(t)?t:(t==null?void 0:t.genres)||[]).map(o=>typeof o=="string"?o:(o==null?void 0:o.name)||(o==null?void 0:o.title)||(o==null?void 0:o.genre)||(o==null?void 0:o.label)||"").filter(Boolean);return["All Genres",...[...new Set(c)]]}catch(t){Re("[api] fetchGenres",(t==null?void 0:t.message)||t);try{(e=window.__toast)==null||e.error("Не удалось загрузить жанры.")}catch{}return["All Genres"]}}async function en(e){var t;try{const{data:n}=await De.get(`/artists/${e}`);return n||null}catch(n){Re("[api] fetchArtist",(n==null?void 0:n.message)||n);try{(t=window.__toast)==null||t.error("Не удалось загрузить артиста.")}catch{}return null}}async function tn(e){var t;try{const{data:n}=await De.get(`/artists/${e}/albums`);return Array.isArray(n)?n:Array.isArray(n==null?void 0:n.albumsList)?n.albumsList:Array.isArray(n==null?void 0:n.albums)?n.albums:[]}catch(n){Re("[api] albums",(n==null?void 0:n.message)||n);try{(t=window.__toast)==null||t.error("Не удалось загрузить альбомы.")}catch{}return[]}}let x,oe,te,me,Ye=!1;function Mt(){if(Ye)return;const e=window.AudioContext||window.webkitAudioContext;if(!e)return;x=new e,te=x.createDynamicsCompressor(),te.threshold.value=-26,te.knee.value=22,te.ratio.value=6,te.attack.value=.004,te.release.value=.08,me=x.createBiquadFilter(),me.type="lowpass",me.frequency.value=2300,me.Q.value=.6,oe=x.createGain(),oe.gain.value=.11,oe.connect(me),me.connect(te),te.connect(x.destination);const t=()=>{try{x.resume()}catch{}window.removeEventListener("pointerdown",t),window.removeEventListener("keydown",t),window.removeEventListener("touchstart",t)};window.addEventListener("pointerdown",t,{once:!0,passive:!0}),window.addEventListener("keydown",t,{once:!0}),window.addEventListener("touchstart",t,{once:!0,passive:!0}),Ye=!0}function St(){x&&x.state==="suspended"&&x.resume()}function nn(){if(Ye||Mt(),!x)return;St();const e=x.currentTime+.004,t=.055,n=x.createBufferSource(),c=x.createBuffer(1,Math.max(32,x.sampleRate*t|0),x.sampleRate),i=c.getChannelData(0);for(let s=0;s<i.length;s++){const v=s/i.length;i[s]=(Math.random()*2-1)*Math.pow(1-v,2)}n.buffer=c;const o=x.createBiquadFilter();o.type="bandpass",o.frequency.value=2050,o.Q.value=.9;const l=x.createBiquadFilter();l.type="highpass",l.frequency.value=360,l.Q.value=.7;const g=x.createGain();g.gain.setValueAtTime(1e-4,e),g.gain.linearRampToValueAtTime(.45,e+.004),g.gain.exponentialRampToValueAtTime(1e-4,e+.055),n.connect(o),o.connect(l),l.connect(g),g.connect(oe),n.start(e),n.stop(e+.06);const A=x.createOscillator();A.type="triangle",A.frequency.setValueAtTime(2100,e);const _=x.createGain();_.gain.setValueAtTime(1e-4,e),_.gain.linearRampToValueAtTime(.2,e+.003),_.gain.exponentialRampToValueAtTime(1e-4,e+.05),A.connect(_),_.connect(oe),A.start(e),A.stop(e+.055);const b=x.createOscillator();b.type="sine",b.frequency.setValueAtTime(165,e);const L=x.createGain();L.gain.setValueAtTime(1e-4,e),L.gain.linearRampToValueAtTime(.05,e+.003),L.gain.exponentialRampToValueAtTime(1e-4,e+.042),b.connect(L),L.connect(oe),b.start(e),b.stop(e+.045)}function sn(){if(Ye||Mt(),!x)return;St();const e=x.currentTime+.003,t=x.createOscillator();t.type="triangle",t.frequency.setValueAtTime(1750,e);const n=x.createGain();n.gain.setValueAtTime(1e-4,e),n.gain.linearRampToValueAtTime(.17,e+.003),n.gain.exponentialRampToValueAtTime(1e-4,e+.06),t.connect(n),n.connect(oe),t.start(e),t.stop(e+.065)}const a={tap:nn,page:sn},rn=e=>(e==null?void 0:e.idArtist)||(e==null?void 0:e.id)||(e==null?void 0:e._id)||(e==null?void 0:e.artistId)||"",an=e=>Array.isArray(e==null?void 0:e.genres)?e.genres:typeof(e==null?void 0:e.strGenre)=="string"&&e.strGenre.trim()?e.strGenre.split(/,\s*/).filter(Boolean):e!=null&&e.genre?[e.genre]:[],on="https://via.placeholder.com/960x540?text=No+Image",Pt=(e={})=>({id:rn(e),name:e.strArtist||e.name||"Unknown artist",image:e.strArtistThumb||e.thumb||e.photo||e.image||on,country:e.strCountry||e.country||"N/A",members:e.intMembers||e.members||"N/A",gender:e.strGender||e.sex||"N/A",biography:e.strBiographyEN||e.biography||e.about||"",genres:an(e),formedYear:e.intFormedYear||e.formedYear||e.yearStart||null,endedYear:e.intDisbandedYear||e.intDiedYear||e.disbandedYear||e.yearEnd||null}),cn=(e={})=>({title:e.strTrack||e.title||e.name||"—",duration:Number(e.intDuration??e.duration??e.time??0),youtube:e.strMusicVid||e.youtube||e.youtube_url||e.url||e.movie||""}),ln=(e={})=>{const t=Array.isArray(e.tracks)?e.tracks:Array.isArray(e.songs)?e.songs:Array.isArray(e.track)?e.track:[];return{title:e.strAlbum||e.title||e.name||"Album",tracks:t.map(cn)}};async function un(e){const t=await Kt(e),c=(Array.isArray(t==null?void 0:t.artists)?t.artists:Array.isArray(t)?t:[]).map(Pt),i=Number((t==null?void 0:t.totalArtists)??(t==null?void 0:t.total)??c.length);return{artists:c,totalArtists:i}}async function dn(){const e=await Ut();return Array.isArray(e)?e:Array.isArray(e==null?void 0:e.genres)?e.genres:[]}async function $t(e){const t=await en(e),n=Array.isArray(t)?t[0]:Array.isArray(t==null?void 0:t.artists)?t.artists[0]:t;return n?Pt(n):null}async function Ct(e){const t=await tn(e);return(Array.isArray(t)?t:Array.isArray(t==null?void 0:t.albums)?t.albums:Array.isArray(t==null?void 0:t.album)?t.album:[]).map(ln)}const Se={page:1,limit:8,total:0,sort:"",genre:"",q:"",isMobilePanelOpen:!1},et=new Set;function ze(){return{...Se}}function mn(){const e=ze();et.forEach(t=>{try{t(e)}catch{}})}function pn(e){return typeof e!="function"?()=>{}:(et.add(e),()=>et.delete(e))}function fn(){return ze()}function I(e={}){const t="genre"in e||"sort"in e||"q"in e,n={...Se,...e};t&&!("page"in e)&&(n.page=1),n.page=Math.max(1,Number(n.page)||1),n.limit=Math.max(1,Number(n.limit)||8),n.total=Math.max(0,Number(n.total)||0);let c=!1;for(const i of Object.keys(n))Se[i]!==n[i]&&(Se[i]=n[i],c=!0);return c&&mn(),ze()}function yn(){return I({page:1,sort:"",genre:"",q:""})}const R={get(){return ze()},setPage(e){I({page:Math.max(1,Number(e)||1)})},setLimit(e){I({limit:Math.max(1,Number(e)||8)})},setSort(e){I({sort:e||""})},setGenre(e){I({genre:e||""})},setQuery(e){I({q:(e||"").trim()})},setTotal(e){I({total:Math.max(0,Number(e)||0)})},setMobilePanel(e){I({isMobilePanelOpen:!!e})},reset(){yn()}};let Pe=0,tt=0;function gn(){if(Pe++===0){tt=window.scrollY||document.documentElement.scrollTop||0;const e=document.body.style;e.position="fixed",e.top=`-${tt}px`,e.left="0",e.right="0",e.width="100%",document.body.classList.add("scroll-locked")}}function Nt(e=!1){if(e&&(Pe=1),Pe>0&&--Pe===0){const t=document.body.style;t.position=t.top=t.left=t.right=t.width="",window.scrollTo(0,tt),document.body.classList.remove("scroll-locked")}}function yt(){Nt(!0)}typeof window<"u"&&(window.__unlockScroll=yt,window.addEventListener("pageshow",()=>yt()));let qe=null;function we(){return window.YT&&window.YT.Player?Promise.resolve():(we._p||(we._p=new Promise((e,t)=>{const n=document.createElement("script");n.src="https://www.youtube.com/iframe_api",n.onerror=()=>t(new Error("YT API load failed")),document.head.appendChild(n);const c=setTimeout(()=>t(new Error("YT API timeout")),15e3);window.onYouTubeIframeAPIReady=()=>{clearTimeout(c),e()}})),we._p)}const Ie=/iPad|iPhone|iPod/.test(navigator.userAgent);function gt(e){if(!e)return"";if(/^[\w-]{11}$/.test(e))return e;try{const t=new URL(e);if(/youtu\.be$/.test(t.hostname))return t.pathname.slice(1);if(t.searchParams.get("v"))return t.searchParams.get("v");const n=t.pathname.match(/\/(embed|shorts|v)\/([^/?#]+)/);return n?n[2]:""}catch{return""}}const ht=(e,t,n)=>Math.min(n,Math.max(t,e)),hn=e=>{const t=e.slice();for(let n=t.length-1;n>0;n--){const c=Math.random()*(n+1)|0;[t[n],t[c]]=[t[c],t[n]]}return t};function Je(e){e=Math.max(0,Math.round(Number(e)||0));const t=Math.floor(e/60),n=String(e%60).padStart(2,"0");return`${t}:${n}`}function Yt(){if(qe)return qe;const e=document.createElement("div");e.className="am-player",e.innerHTML=`
    <div class="am-player__inner">
      <div class="am-player__frame"><div class="am-player__host" id="am-player-host"></div></div>

      <button class="am-player__close" type="button" aria-label="Close">×</button>

      <div class="am-player__bar">
        <div class="am-player__left">
          <button class="am-player__skip am-player__prev" type="button" aria-label="Previous">⏮</button>
          <button class="am-player__play" type="button" aria-label="Play/Pause">▶</button>
          <button class="am-player__skip am-player__next" type="button" aria-label="Next">⏭</button>
          <span class="am-player__time"><span class="am-player__cur">0:00</span> / <span class="am-player__dur">0:00</span></span>
        </div>

        <div class="am-player__progresswrap">
          <input class="am-player__progress" type="range" min="0" max="1000" value="0" step="1" aria-label="Seek">
        </div>

        <div class="am-player__right">
          <a class="am-player__yt" href="#" target="_blank" rel="noopener noreferrer">Open YouTube ↗</a>
          <button class="am-player__mute" type="button" aria-label="Mute/Unmute">🔈</button>
          <input class="am-player__slider" type="range" min="0" max="100" value="60" step="1" aria-label="Volume">
        </div>
      </div>
    </div>
  `,document.body.appendChild(e);const t=e.querySelector("#am-player-host"),n=e.querySelector(".am-player__close"),c=e.querySelector(".am-player__play"),i=e.querySelector(".am-player__prev"),o=e.querySelector(".am-player__next"),l=e.querySelector(".am-player__mute"),g=e.querySelector(".am-player__yt"),A=e.querySelector(".am-player__slider"),_=e.querySelector(".am-player__progress"),b=e.querySelector(".am-player__cur"),L=e.querySelector(".am-player__dur");let s=null,v=!1,d=0,E=null,u=60,G=!1,k=[],q=-1,C=!1;Ie&&(A.disabled=!0,A.title="On iOS the volume is hardware-only");function re(f){f?(e.classList.add("am-player--active"),e.style.pointerEvents="auto"):(e.classList.remove("am-player--active"),e.style.pointerEvents="")}function B(f){c.textContent=f?"⏸":"▶"}function Q(f){l.textContent=f?"🔇":"🔈"}function ye(f,p){if(b.textContent=Je(f),L.textContent=Je(p),!G){const h=p>0?Math.round(f/p*1e3):0;_.value=String(h)}}function W(){E&&(clearInterval(E),E=null)}function T(){W(),E=setInterval(()=>{if(!v||!s||typeof s.getCurrentTime!="function")return;const f=s.getCurrentTime()||0,p=d||s.getDuration()||0;d=p,ye(f,p)},250)}function le(f,p=!1){return we().then(()=>{if(s){try{s.destroy()}catch{}s=null}t.innerHTML='<div id="am-player-yt"></div>',s=new YT.Player("am-player-yt",{host:"https://www.youtube-nocookie.com",videoId:f,playerVars:{autoplay:p?1:0,playsinline:1,rel:0,modestbranding:1,controls:1,enablejsapi:1,origin:location.origin},events:{onReady:()=>{var h,M;v=!0,d=s.getDuration()||0,ye(0,d);try{!Ie&&typeof s.setVolume=="function"&&s.setVolume(u)}catch{}if(p)try{(h=s.unMute)==null||h.call(s),(M=s.playVideo)==null||M.call(s)}catch{}B(!0),T()},onStateChange:h=>{h.data===YT.PlayerState.PLAYING?(B(!0),T()):h.data===YT.PlayerState.PAUSED?(B(!1),W()):h.data===YT.PlayerState.ENDED&&(B(!1),W(),Ve())}}})})}function F(f,p=!1){if(!k.length)return;q=ht(f,0,k.length-1);const h=k[q];return g.href=`https://www.youtube.com/watch?v=${h}`,re(!0),v=!1,d=0,W(),le(h,p)}function Ve(){k.length&&(q<k.length-1?F(q+1,!1):C&&F(0,!1))}n.addEventListener("click",()=>{var f,p,h;(f=a==null?void 0:a.tap)==null||f.call(a);try{(p=s==null?void 0:s.stopVideo)==null||p.call(s),(h=s==null?void 0:s.destroy)==null||h.call(s)}catch{}s=null,v=!1,d=0,W(),re(!1),k=[],q=-1}),c.addEventListener("click",()=>{var p,h,M;if((p=a==null?void 0:a.tap)==null||p.call(a),!v||!s)return;(s.getPlayerState?s.getPlayerState():-1)===YT.PlayerState.PLAYING?((h=s.pauseVideo)==null||h.call(s),B(!1)):((M=s.playVideo)==null||M.call(s),B(!0))}),i.addEventListener("click",()=>{var f;(f=a==null?void 0:a.tap)==null||f.call(a),k.length&&F(q>0?q-1:C?k.length-1:0,!0)}),o.addEventListener("click",()=>{var f;(f=a==null?void 0:a.tap)==null||f.call(a),k.length&&F(q<k.length-1?q+1:C?0:q,!0)}),l.addEventListener("click",()=>{var p,h,M,ee;if((p=a==null?void 0:a.tap)==null||p.call(a),!s)return;const f=!((h=s.isMuted)!=null&&h.call(s));f?(M=s.mute)==null||M.call(s):(ee=s.unMute)==null||ee.call(s),Q(f)}),A.addEventListener("input",()=>{var h,M,ee,ue,de,he;const f=Number(A.value)||0;Ie||(h=s==null?void 0:s.setVolume)==null||h.call(s,f),u=f;const p=f===0;p&&!((M=s==null?void 0:s.isMuted)!=null&&M.call(s))&&((ee=s==null?void 0:s.mute)==null||ee.call(s)),!p&&((ue=s==null?void 0:s.isMuted)!=null&&ue.call(s))&&((de=s==null?void 0:s.unMute)==null||de.call(s)),Q(((he=s==null?void 0:s.isMuted)==null?void 0:he.call(s))??!1)}),_.addEventListener("input",()=>{G=!0;const f=Number(_.value)||0,p=d>0?f/1e3*d:0;b.textContent=Je(p)}),_.addEventListener("change",()=>{var h,M;if((h=a==null?void 0:a.tap)==null||h.call(a),G=!1,!s||!d)return;const p=(Number(_.value)||0)/1e3*d;(M=s.seekTo)==null||M.call(s,p,!0)});async function xe(f){const p=gt(f);p&&(k=[p],q=0,g.href=`https://www.youtube.com/watch?v=${p}`,re(!0),await le(p,!0))}async function je(f,p={}){const h=(f||[]).map(gt).filter(Boolean);if(!h.length)return;C=!!p.loop,k=p.shuffle?hn(h):h.slice();const M=ht(Number(p.startIndex??0)||0,0,k.length-1);await F(M,!0)}function ge(){k.length&&F(q<k.length-1?q+1:C?0:q,!0)}function Ge(){k.length&&F(q>0?q-1:C?k.length-1:0,!0)}function Fe(){return e.classList.contains("am-player--active")}function Qe(){const f=new Event("click");n.dispatchEvent(f)}function We(){var f,p;try{(f=s==null?void 0:s.unMute)==null||f.call(s),(p=s==null?void 0:s.playVideo)==null||p.call(s)}catch{}}return qe={open:xe,openQueue:je,next:ge,prev:Ge,isActive:Fe,close:Qe,ensureAudible:We},qe}let P,vt,nt,w,st,Ze,Ke,fe=!1,ot=0,ct=0,H=0,V=0,$=1,rt=0,at=0,$e=0,Ce=0;const D=new Map;let Ae=!1,Be=0,lt=1;const Oe=(e,t,n)=>Math.max(t,Math.min(n,e)),Ot=(e,t)=>Math.hypot(e.x-t.x,e.y-t.y),vn=(e,t)=>({x:(e.x+t.x)/2,y:(e.y+t.y)/2});function bn(){if(P)return;P=document.createElement("div"),P.className="am-zoom",P.innerHTML=`
    <div class="am-zoom__backdrop"></div>
    <div class="am-zoom__dialog" role="dialog" aria-modal="true" aria-label="Image preview">
      <div class="am-zoom__stage">
        <img class="am-zoom__img" alt="">
      </div>
      <div class="am-zoom__bar">
        <a class="am-zoom__open" href="#" target="_blank" rel="noopener noreferrer">Open original ↗</a>
        <button class="am-zoom__close" type="button" aria-label="Close">×</button>
      </div>
    </div>`,document.body.appendChild(P),Object.assign(P.style,{position:"fixed",inset:"0",zIndex:"6000",display:"none"}),vt=P.querySelector(".am-zoom__dialog"),Object.assign(vt.style,{position:"absolute",inset:"0",display:"grid",gridTemplateRows:"1fr auto",gap:"12px",padding:"16px"}),Ke=P.querySelector(".am-zoom__backdrop"),Object.assign(Ke.style,{position:"absolute",inset:"0",background:"rgba(0,0,0,.7)"}),nt=P.querySelector(".am-zoom__stage"),Object.assign(nt.style,{position:"relative",background:"#000",borderRadius:"12px",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"240px",height:"calc(100vh - 140px)",touchAction:"none"}),w=P.querySelector(".am-zoom__img"),w.style.maxWidth="100%",w.style.maxHeight="100%",w.style.width="auto",w.style.setProperty("height","auto","important"),w.style.objectFit="contain",w.style.transformOrigin="center center",w.style.willChange="transform",w.style.userSelect="none",w.style.webkitUserDrag="none",w.style.pointerEvents="auto";const e=P.querySelector(".am-zoom__bar");Object.assign(e.style,{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"12px"}),st=P.querySelector(".am-zoom__open"),st.style.color="#fff",Ze=P.querySelector(".am-zoom__close"),Object.assign(Ze.style,{width:"40px",height:"40px",borderRadius:"10px",border:"none",background:"var(--color-affair, #764191)",color:"#fff",cursor:"pointer"}),Ke.addEventListener("click",Ue),Ze.addEventListener("click",Ue),P.addEventListener("wheel",An,{passive:!1}),w.addEventListener("dblclick",_n),w.addEventListener("pointerdown",Ln),w.addEventListener("pointermove",En),w.addEventListener("pointerup",bt),w.addEventListener("pointercancel",bt),document.addEventListener("keydown",t=>{t.key==="Escape"&&it()&&Ue()}),window.addEventListener("resize",()=>{it()&&(Rt(),se())})}function wn(){const e=w.style.transform;w.style.transform="translate3d(0,0,0) scale(1)";const t=w.getBoundingClientRect();w.style.transform=e,rt=t.width,at=t.height}function Rt(){const e=nt.getBoundingClientRect();$e=e.width,Ce=e.height}function Dt(){if(!rt||!at||!$e||!Ce)return;const e=rt*$,t=at*$;if(e<=$e)H=0;else{const n=(e-$e)/2;H=Oe(H,-n,n)}if(t<=Ce)V=0;else{const n=(t-Ce)/2;V=Oe(V,-n,n)}}function se(){Dt(),w.style.transform=`translate3d(${H}px, ${V}px, 0) scale(${$})`,w.style.cursor=$>1?fe?"grabbing":"grab":"zoom-in"}function zt(e,t=""){if(!e)return;bn(),D.clear(),Ae=!1,Be=0,lt=1,fe=!1,ot=ct=0,H=V=0,$=1,w.src=e,w.alt=t||"",st.href=e,P.style.display="block";const n=()=>{Rt(),wn(),Dt(),se()};w.complete&&w.naturalWidth>0?requestAnimationFrame(n):w.onload=()=>requestAnimationFrame(n)}function Ue(){P&&(P.style.display="none",w.src="",D.clear(),Ae=!1)}function it(){return!!(P&&P.style.display!=="none")}function _n(){$=$>1?1:2,$===1&&(H=0,V=0),se()}function An(e){if(!it())return;e.preventDefault();const t=Oe($+(e.deltaY>0?-.15:.15),1,3),n=w.getBoundingClientRect(),c={x:e.clientX,y:e.clientY},i={x:n.left+n.width/2,y:n.top+n.height/2},o=t/$;H+=(i.x-c.x)*(1-o),V+=(i.y-c.y)*(1-o),$=t,$===1&&(H=0,V=0),se()}function Ln(e){if(D.set(e.pointerId,{x:e.clientX,y:e.clientY}),w.setPointerCapture(e.pointerId),D.size===2){const[t,n]=Array.from(D.values());Ae=!0,Be=Ot(t,n)||1,lt=$,fe=!1;return}D.size===1&&$>1&&(fe=!0,ot=e.clientX-H,ct=e.clientY-V,se())}function En(e){if(D.has(e.pointerId)){if(D.set(e.pointerId,{x:e.clientX,y:e.clientY}),Ae&&D.size>=2){const[t,n]=Array.from(D.values()),c=Ot(t,n)||1;let i=Oe(lt*(c/Be),1,3);const o=vn(t,n),l=w.getBoundingClientRect(),g={x:l.left+l.width/2,y:l.top+l.height/2},A=i/$;H+=(g.x-o.x)*(1-A),V+=(g.y-o.y)*(1-A),$=i,$===1&&(H=0,V=0),se();return}fe&&D.size===1&&$>1&&(H=e.clientX-ot,V=e.clientY-ct,se())}}function bt(e){D.has(e.pointerId)&&D.delete(e.pointerId);try{w.releasePointerCapture(e.pointerId)}catch{}D.size<2&&(Ae=!1,Be=0),D.size===0&&(fe=!1,se())}const kn="/img/sprite.svg";function xn(e){const t=Number(e);if(!Number.isFinite(t))return"—";const n=Math.round(t/1e3),c=Math.floor(n/60),i=String(n%60).padStart(2,"0");return`${c}:${i}`}const Tn=e=>{const t=(e==null?void 0:e.intFormedYear)||(e==null?void 0:e.yearStart)||(e==null?void 0:e.formedYear),n=(e==null?void 0:e.intDisbandedYear)||(e==null?void 0:e.intDiedYear)||(e==null?void 0:e.yearEnd)||(e==null?void 0:e.disbandedYear);return t&&n?`${t}–${n}`:t?`${t}–present`:"information missing"},qn=e=>{const t=(e==null?void 0:e.strTrack)||(e==null?void 0:e.title)||(e==null?void 0:e.name)||"—",n=xn((e==null?void 0:e.intDuration)??(e==null?void 0:e.duration)??(e==null?void 0:e.time)),c=(e==null?void 0:e.movie)??(e==null?void 0:e.youtube)??(e==null?void 0:e.youtube_url)??(e==null?void 0:e.url)??(e==null?void 0:e.strMusicVid);return`
    <li class="tr">
      <span>${t}</span>
      <span>${n}</span>
      <span>${c?`<a class="yt" href="${c}" target="_blank" rel="noopener noreferrer" aria-label="Watch on YouTube">
               <svg class="ico am-yt" aria-hidden="true"><use href="${kn}#icon-icon_youtube_footer"></use></svg>
             </a>`:'<span class="yt-ph"></span>'}</span>
    </li>`};function Mn(e=document){let t=e.querySelector("#artist-modal");return t||(t=e.createElement("div"),t.id="artist-modal",t.className="amodal",t.setAttribute("hidden",""),t.innerHTML=`
    <div class="amodal__backdrop"></div>
    <div class="amodal__dialog" role="dialog" aria-modal="true" aria-label="Artist details">
      <button id="am-close" class="amodal__close" type="button" aria-label="Close">×</button>
      <div id="am-body" class="amodal__body">
        <div class="amodal__loader loader"></div>
      </div>
    </div>`,e.body.appendChild(t),t)}function Bt(e=document){let t=(e&&e.querySelector?e.querySelector("#artist-modal"):null)||document.querySelector("#artist-modal")||Mn(document);const n=t.querySelector("#am-body"),c=t.querySelector("#am-close"),i=t.querySelector(".amodal__dialog"),o=Yt();let l=null;function g(){l||(l=document.createElement("button"),l.type="button",l.setAttribute("aria-label","Scroll to top"),l.textContent="↑",Object.assign(l.style,{position:"fixed",right:"24px",bottom:"24px",width:"56px",height:"56px",borderRadius:"50%",border:"none",cursor:"pointer",display:"none",alignItems:"center",justifyContent:"center",fontSize:"22px",lineHeight:"1",background:"var(--color-affair, #764191)",color:"var(--color-white, #fff)",boxShadow:"0 8px 20px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,0.1)",zIndex:"5"}),l.addEventListener("click",()=>{var v;(v=a==null?void 0:a.tap)==null||v.call(a),i.scrollTo({top:0,behavior:"smooth"})}),t.appendChild(l),i.addEventListener("scroll",()=>{l.style.display=(i.scrollTop||0)>220?"flex":"none"}))}function A(){t.removeAttribute("hidden"),gn(),g(),n.innerHTML='<div class="amodal__loader loader"></div>',document.addEventListener("keydown",b)}function _(){o.isActive()&&o.close(),t.setAttribute("hidden",""),Nt(),n.innerHTML="",document.removeEventListener("keydown",b),l&&(l.style.display="none")}const b=v=>{var d;v.key==="Escape"&&((d=a==null?void 0:a.tap)==null||d.call(a),_())};c.addEventListener("click",()=>{var v;(v=a==null?void 0:a.tap)==null||v.call(a),_()}),t.addEventListener("click",v=>{var d;v.target.classList.contains("amodal__backdrop")&&((d=a==null?void 0:a.tap)==null||d.call(a),_())}),t.addEventListener("click",v=>{var u,G;const d=v.target.closest("a.yt");if(d){v.preventDefault(),(u=a==null?void 0:a.tap)==null||u.call(a),o.open(d.href);return}const E=v.target.closest(".amodal__img");if(E){(G=a==null?void 0:a.tap)==null||G.call(a);const k=E.currentSrc||E.getAttribute("src")||E.getAttribute("data-src")||"";zt(k,E.getAttribute("alt")||"")}});async function L(v){const[d,E]=await Promise.all([$t(v).catch(()=>({})),Ct(v).catch(()=>[])]),u=d||{},G=(u==null?void 0:u.strArtist)||(u==null?void 0:u.name)||"Unknown artist",k=(u==null?void 0:u.strArtistThumb)||(u==null?void 0:u.photo)||(u==null?void 0:u.image)||"https://via.placeholder.com/960x540?text=No+Image",q=(u==null?void 0:u.strCountry)||(u==null?void 0:u.country)||"N/A",C=(u==null?void 0:u.intMembers)||(u==null?void 0:u.members)||"N/A",re=(u==null?void 0:u.strGender)||(u==null?void 0:u.sex)||"N/A",B=(u==null?void 0:u.strBiographyEN)||(u==null?void 0:u.about)||"",Q=Array.isArray(u==null?void 0:u.genres)?u.genres:u!=null&&u.genre?[u.genre]:[],W=(Array.isArray(E)?E:[]).map(T=>{const le=(T==null?void 0:T.strAlbum)||(T==null?void 0:T.title)||(T==null?void 0:T.name)||"Album",F=Array.isArray(T==null?void 0:T.tracks)?T.tracks:Array.isArray(T==null?void 0:T.songs)?T.songs:[];return`
        <div class="am-album">
          <div class="am-album__title">${le}</div>
          <ul class="tbl">
            <li class="th"><span>Track</span><span>Time</span><span>Link</span></li>
            ${F.map(qn).join("")}
          </ul>
        </div>`}).join("");n.innerHTML=`
      <h3 class="amodal__title">${G}</h3>
      <div class="amodal__content">
        <img class="amodal__img" src="${k}" alt="${G}" loading="lazy">
        <div class="amodal__info">
          <div class="am-meta">
            <div class="am-meta__col">
              <div class="am-meta__item"><span class="lbl">Years active</span><span class="val">${Tn(u)}</span></div>
              <div class="am-meta__item"><span class="lbl">Sex</span><span class="val">${re}</span></div>
            </div>
            <div class="am-meta__col">
              <div class="am-meta__item"><span class="lbl">Members</span><span class="val">${C}</span></div>
              <div class="am-meta__item"><span class="lbl">Country</span><span class="val">${q}</span></div>
            </div>
          </div>
          <div class="am-bio"><div class="lbl">Biography</div><p>${B||"—"}</p></div>
          ${Q.length?`<div class="am-tags">${Q.map(T=>`<span class="tag">${T}</span>`).join("")}</div>`:""}
        </div>
      </div>
      <h4 class="amodal__albums-title">Albums</h4>
      <div class="amodal__albums">
        ${W||"<p class='muted'>No albums found for this artist.</p>"}
      </div>`}async function s(v){var d;(d=a==null?void 0:a.tap)==null||d.call(a),A(),await L(v)}return{openFor:s,close:_}}const Sn="/img/sprite.svg";function Pn(e=document.querySelector("#artists-section")){var he;if(!e)return;const t=e.querySelector("#filters-panel"),n=e.querySelector("#filters-toggle"),c=e.querySelector("#filters-reset"),i=e.querySelector("#filters-reset-sm"),o=e.querySelector("#view-toggle"),l=e.querySelector("#flt-q"),g=e.querySelector("#flt-q-btn"),A=e.querySelector('.dd[data-dd="sort"]'),_=e.querySelector("#dd-sort-btn"),b=e.querySelector("#dd-sort-list"),L=e.querySelector('.dd[data-dd="genre"]'),s=e.querySelector("#dd-genre-btn"),v=e.querySelector("#dd-genre-list"),d=e.querySelector("#artists-grid"),E=e.querySelector("#artists-pager"),u=e.querySelector("#artists-empty"),G=Bt(document);let k=0;const q=r=>r&&r.removeAttribute("hidden"),C=r=>r&&r.setAttribute("hidden",""),re=()=>matchMedia("(min-width:1440px)").matches,B=r=>((r==null?void 0:r.strArtist)||(r==null?void 0:r.name)||"").toLowerCase();function Q(){const r=R.get();re()?(t==null||t.setAttribute("aria-hidden","false"),n==null||n.setAttribute("aria-expanded","false"),R.setMobilePanel(!1)):(t==null||t.setAttribute("aria-hidden",r.isMobilePanelOpen?"false":"true"),n==null||n.setAttribute("aria-expanded",r.isMobilePanelOpen?"true":"false"))}function ye(){const r=e.getBoundingClientRect().top+window.scrollY-16;window.scrollTo({top:r,behavior:"smooth"})}function W(r){r?(q(u),C(d),C(E),T()):(C(u),q(d))}function T(){d.style.height="",d.style.overflow="",d.style.transition="",d.style.willChange=""}function le(){return`
      <li class="card card--skel">
        <div class="card__media skel skel--media"></div>
        <div class="card__tags">
          <span class="tag skel skel--tag"></span>
          <span class="tag skel skel--tag"></span>
        </div>
        <div class="skel skel--title"></div>
        <div class="skel skel--text"></div>
      </li>`}function F(r){const m=Math.max(1,Number(r)||8);d.innerHTML=new Array(m).fill(0).map(le).join(""),q(d),C(u),C(E)}function Ve(){d.querySelectorAll("img.img-fade").forEach(m=>{const y=()=>m.classList.add("is-loaded");m.complete&&m.naturalWidth>0?y():m.addEventListener("load",y,{once:!0})})}let xe=null;function je(r){const m=r??d.getBoundingClientRect().height;d.style.willChange="height",d.style.overflow="hidden",d.style.transition="none",d.style.height=`${Math.max(1,Math.round(m||0))}px`}function ge(){T()}function Ge(r){r(),d.offsetHeight;const m=d.scrollHeight;d.style.transition="height 200ms ease",d.style.height=`${m}px`;const y=N=>{N.target!==d||N.propertyName!=="height"||(d.removeEventListener("transitionend",y),ge())};d.addEventListener("transitionend",y),clearTimeout(xe),xe=setTimeout(ge,400)}function Fe(r){const m=(r==null?void 0:r.id)||(r==null?void 0:r._id)||(r==null?void 0:r.artistId)||"",y=(r==null?void 0:r.strArtist)||(r==null?void 0:r.name)||"Unknown",N=(r==null?void 0:r.strArtistThumb)||(r==null?void 0:r.photo)||(r==null?void 0:r.image)||"https://via.placeholder.com/960x540?text=No+Image",X=(r==null?void 0:r.strBiographyEN)||(r==null?void 0:r.about)||"",z=Array.isArray(r==null?void 0:r.genres)?r.genres:r!=null&&r.genre?[r.genre]:[];return`
      <li class="card" data-id="${m}">
        <div class="card__media">
          <img
            class="img-fade"
            src="${N}"
            srcset="${N} 1x, ${N} 2x"
            sizes="(min-width:1440px) 50vw, (min-width:768px) 704px, 100vw"
            alt="${y}"
            loading="lazy"
          >
        </div>
        <div class="card__tags">${z.map(S=>`<span class="tag">${S}</span>`).join("")}</div>
        <h3 class="card__title">${y}</h3>
        <p class="card__text">${X}</p>
        <button class="card__link" data-action="more">
          Learn More
          <svg class="ico" aria-hidden="true">
            <use href="${Sn}#icon-icon_play_artists_sections"></use>
          </svg>
        </button>
      </li>`}function Qe(r){d.innerHTML=r.map(Fe).join(""),Ve()}function We(r,m){if(m<=0){E.innerHTML="",C(E);return}if(m===1){E.innerHTML='<button class="active" data-page="1" disabled>1</button>',q(E);return}const y=(S,ve,be=!1,Te=!1)=>`<button ${be?"disabled":""} data-page="${ve}" class="${Te?"active":""}">${S}</button>`,N=2,X=Math.max(1,r-N),z=Math.min(m,r+N),O=[];O.push(y("‹",Math.max(1,r-1),r===1,!1)),X>1&&(O.push(y("1",1,!1,r===1)),X>2&&O.push('<button class="dots">…</button>'));for(let S=X;S<=z;S++)O.push(y(String(S),S,!1,S===r));z<m&&(z<m-1&&O.push('<button class="dots">…</button>'),O.push(y(String(m),m,!1,r===m))),O.push(y("›",Math.min(m,r+1),r===m,!1)),E.innerHTML=O.join(""),q(E)}async function f(){try{L==null||L.classList.add("loading"),s==null||s.setAttribute("aria-busy","true"),s&&(s.disabled=!0),v.innerHTML=`
        <li class="dd__loading">
          <span class="dd__spinner" aria-hidden="true"></span>
          <span>Loading…</span>
        </li>`;const r=await dn();v.innerHTML=r.map(m=>`<li data-val="${m}">${m}</li>`).join("")}catch{v.innerHTML='<li data-val="">All Genres</li>'}finally{L==null||L.classList.remove("loading"),s==null||s.removeAttribute("aria-busy"),s&&(s.disabled=!1)}}async function p(r=!0){var Te;const m=++k,{page:y,limit:N,genre:X,sort:z,q:O}=R.get();je(d.getBoundingClientRect().height),F(N),C(E);let S=[],ve=0;try{const ae=await un({page:y,limit:N,genre:X||"",sort:z||"",name:((Te=O==null?void 0:O.trim)==null?void 0:Te.call(O))||""});if(m!==k)return;S=Array.isArray(ae.artists)?ae.artists:[],ve=Number(ae.totalArtists||S.length||0)}catch{if(m!==k)return;S=[],ve=0}let be=Math.max(1,Math.ceil(ve/N));if(y>be&&r)return R.setPage(be),p(!1);if(y<1&&r)return R.setPage(1),p(!1);if(z==="asc"&&(S=S.slice().sort((ae,Xe)=>B(ae).localeCompare(B(Xe)))),z==="desc"&&(S=S.slice().sort((ae,Xe)=>B(Xe).localeCompare(B(ae)))),m===k){if(!S.length){d.innerHTML="",W(!0),ge();return}W(!1),Ge(()=>Qe(S)),We(R.get().page,be)}}function h(r){[A,L].forEach(m=>{if(m!==r){m.classList.remove("open");const y=m.querySelector(".dd__list");y&&(y.style.display="none")}})}function M(r){const m=!r.classList.contains("open");h(r),r.classList.toggle("open",m);const y=r.querySelector(".dd__list");y&&(y.style.display=m?"block":"none")}n==null||n.addEventListener("click",()=>{a.tap();const r=R.get();R.setMobilePanel(!r.isMobilePanelOpen),Q()}),addEventListener("resize",Q),_==null||_.addEventListener("click",()=>{a.tap(),M(A)}),s==null||s.addEventListener("click",()=>{a.tap(),M(L)}),document.addEventListener("click",r=>{r.target.closest(".dd")||h()}),b==null||b.addEventListener("click",r=>{const m=r.target.closest("li");m&&(a.tap(),R.setSort(m.dataset.val||""),M(A),p())}),v==null||v.addEventListener("click",r=>{const m=r.target.closest("li");if(!m)return;a.tap();const y=m.dataset.val||"";R.setGenre(y==="All Genres"?"":y),M(L),p(),_==null||_.focus()});function ee(){a.tap(),R.setQuery((l==null?void 0:l.value.trim())||""),p()}g==null||g.addEventListener("click",ee),l==null||l.addEventListener("keydown",r=>{r.key==="Enter"&&ee()});function ue(){R.reset(),l&&(l.value=""),h(),p()}c==null||c.addEventListener("click",()=>{a.tap(),ue()}),i==null||i.addEventListener("click",()=>{a.tap(),ue(),R.setMobilePanel(!1),Q()}),(he=e.querySelector("#empty-reset"))==null||he.addEventListener("click",()=>{a.tap(),ue()}),E==null||E.addEventListener("click",r=>{const m=r.target.closest("button[data-page]");if(!m||m.disabled)return;const y=Number(m.dataset.page)||1;y!==R.get().page&&(a.page(),ye(),R.setPage(y),p())});const de=e.closest(".artists1")||e;o==null||o.addEventListener("click",()=>{a.tap();const r=!de.classList.contains("view-list");de.classList.toggle("view-list",r),de.classList.toggle("view-grid",!r),o.setAttribute("aria-pressed",String(r)),o.textContent=r?"Default view":"List view"}),d.addEventListener("click",r=>{var N,X;const m=r.target.closest('[data-action="more"]');if(m){const z=(X=(N=m.closest(".card"))==null?void 0:N.dataset)==null?void 0:X.id;if(!z)return;a.tap(),G.openFor(z);return}const y=r.target.closest(".card__media img");if(y){a.tap();const z=y.currentSrc||y.src||y.getAttribute("src")||"";zt(z,y.getAttribute("alt")||"")}}),Q(),f(),p()}function $n(){const e=new URLSearchParams(location.search),t=(e.get("q")||"").trim(),n=e.get("genre")||"",c=e.get("sort")||"",i=Math.max(1,Number(e.get("page")||1));return{q:t,genre:n,sort:c,page:i}}function Cn(e){const t=new URLSearchParams;return e.q&&t.set("q",e.q),e.genre&&t.set("genre",e.genre),e.sort&&t.set("sort",e.sort),e.page&&e.page!==1&&t.set("page",String(e.page)),t.toString()}function Nn(){const e=$n(),t=fn(),n={};let c=!1;for(const o of["q","genre","sort","page"])e[o]!==void 0&&e[o]!==t[o]&&(n[o]=e[o],c=!0);c&&I(n);let i=null;pn(o=>{const l=Cn(o);if(l===i)return;i=l;const g=l?`?${l}`:location.pathname;history.replaceState(null,"",g)})}const wt=new Map;function Yn(e){const t=e.querySelector("#artists-grid");if(!t)return;let n=null,c=null;function i(o){clearTimeout(n),n=setTimeout(async()=>{try{if(wt.has(o))return;const[l,g]=await Promise.all([$t(o),Ct(o)]);wt.set(o,{artist:l,albums:g,ts:Date.now()})}catch{}},150)}t.addEventListener("mouseenter",o=>{var A,_;const l=o.target.closest('[data-action="more"]');if(!l)return;const g=(_=(A=l.closest(".card"))==null?void 0:A.dataset)==null?void 0:_.id;g&&(c=String(g),i(c))},!0),t.addEventListener("mouseleave",o=>{o.target.closest('[data-action="more"]')&&(clearTimeout(n),n=null,c=null)},!0)}function On(e=document.querySelector("#artists-section")){e&&(Nn(),Bt(e),Yn(e),Pn(e))}const Rn=["Zi_XLOBDo_Y","3JZ_D3ELwOQ","fRh_vgS2dFE","OPf0YbXqDm0","60ItHLz5WEA","2Vv-BfVoq4g","kXYiU_JCYtU","UceaB4D0jpo","RubBzkZzpUA","kJQP7kiw5Fk","CevxZvSJLk8","pRpeEdMmmQ0","IcrbM1l_BoI","YVkUvmDQ3HY","hT_nvWreIhg","09R8_2nJtjg","uelHwf8o7_U","JGwWNGJdvx8","YQHsXMglC9A","NmugSMBh_iI","LrUvu1mlWco","hLQl3WQQoQ0","RgKAFK5djSk","SlPhMPnQ58k","oRdxUFDoQe0","09z7j-LPz1E","Pkh8UtuejGw","tt2k8PGm-TI","lY2yjAdbvdQ","pXRviuL6vMY","09tj3yqpP5g","nfs8NYg7yQM","nCkpzqqog4k","M7lc1UVf-VE"],He=e=>e.map(t=>document.querySelector(t)).find(Boolean),Dn=()=>He(['[data-radio="start"]',"#rhythm-radio","#random-radio","#radio-start",".js-radio-start"]),zn=()=>He(['[data-radio="next"]',"#radio-next",".js-radio-next"]),Bn=()=>He(['[data-radio="prev"]',"#radio-prev",".js-radio-prev"]),Hn=()=>He(['[data-radio="stop"]',"#radio-stop",".js-radio-stop"]);document.addEventListener("DOMContentLoaded",()=>{try{On()}catch{}const e=Yt(),t=Dn();t&&t.addEventListener("click",async o=>{var l;o.preventDefault(),(l=a==null?void 0:a.tap)==null||l.call(a),await e.openQueue(Rn,{shuffle:!0,loop:!0}),e.ensureAudible()});const n=zn();n&&n.addEventListener("click",o=>{var l;o.preventDefault(),(l=a==null?void 0:a.tap)==null||l.call(a),e.next()});const c=Bn();c&&c.addEventListener("click",o=>{var l;o.preventDefault(),(l=a==null?void 0:a.tap)==null||l.call(a),e.prev()});const i=Hn();i&&i.addEventListener("click",o=>{var l;o.preventDefault(),(l=a==null?void 0:a.tap)==null||l.call(a),e.close()})});const Y={openBtn:document.querySelector("[data-menu-open]"),closeBtn:document.querySelector("[data-menu-close]"),menu:document.querySelector("[data-menu]"),links:document.querySelectorAll("[data-menu-link]"),logos:document.querySelectorAll(".header-logo"),header:document.querySelector(".header")};function Vn(){var e;Y.menu&&(Y.menu.hidden=!1,Y.menu.classList.add("show"),document.body.style.overflow="hidden",(e=Y.openBtn)==null||e.setAttribute("aria-expanded","true"))}function Le(){return new Promise(e=>{if(!Y.menu)return e();Y.menu.classList.remove("show"),setTimeout(()=>{var t;Y.menu.hidden=!0,document.body.style.overflow="",(t=Y.openBtn)==null||t.setAttribute("aria-expanded","false"),e()},400)})}function ut(){var e;return(((e=Y.header)==null?void 0:e.offsetHeight)||80)+8}function dt(){document.documentElement.style.scrollPaddingTop=`${ut()}px`}dt();window.addEventListener("resize",()=>requestAnimationFrame(dt));function mt(e,t=500){const n=(e||"").replace("#",""),c=document.getElementById(n)||document.getElementById(`${n}-section`);if(!c)return;const i=ut(),o=c.getBoundingClientRect().top+window.pageYOffset-i,l=window.pageYOffset,g=o-l;let A=null;const _=L=>L<.5?2*L*L:1-Math.pow(-2*L+2,2)/2;function b(L){A===null&&(A=L);const s=Math.min(1,(L-A)/t);window.scrollTo(0,l+g*_(s)),s<1?requestAnimationFrame(b):(c.setAttribute("tabindex","-1"),c.focus({preventScroll:!0}),setTimeout(()=>c.removeAttribute("tabindex"),0))}requestAnimationFrame(b)}var Lt;(Lt=Y.openBtn)==null||Lt.addEventListener("click",Vn);var Et;(Et=Y.closeBtn)==null||Et.addEventListener("click",Le);Y.logos.forEach(e=>{e.addEventListener("click",t=>{e.closest(".mobile-menu")&&(t.preventDefault(),Le(),setTimeout(()=>{window.location.href=e.getAttribute("href")},400))})});var kt;(kt=Y.menu)==null||kt.addEventListener("click",e=>{e.target===Y.menu&&Le()});document.addEventListener("keydown",e=>{var t;e.key==="Escape"&&((t=Y.menu)!=null&&t.classList.contains("show"))&&Le()});const pt=document.querySelectorAll(".header-nav-link, .mobile-menu-nav-link"),_e=new Map;pt.forEach(e=>{const t=(e.getAttribute("href")||"").trim();if(!t.startsWith("#"))return;const n=t.slice(1),c=document.getElementById(n)||document.getElementById(`${n}-section`);c&&(_e.has(c)||_e.set(c,[]),_e.get(c).push(e))});let _t=null;function Ht(e){!e||_t===e||(pt.forEach(t=>t.classList.remove("active")),(_e.get(e)||[]).forEach(t=>t.classList.add("active")),_t=e)}let Vt=0;const jn=700,Gn=()=>Date.now()<Vt;let Me;function jt(){Me&&Me.disconnect();const e=`-${ut()}px 0px -55% 0px`,t=new Map;Me=new IntersectionObserver(n=>{if(n.forEach(i=>{t.set(i.target,i.isIntersecting?i.intersectionRatio:0)}),Gn())return;const c=[...t.entries()].sort((i,o)=>o[1]-i[1])[0];c&&c[1]>0&&Ht(c[0])},{root:null,rootMargin:e,threshold:[0,.25,.5,.75,1]}),_e.forEach((n,c)=>Me.observe(c))}jt();window.addEventListener("resize",()=>requestAnimationFrame(jt));pt.forEach(e=>{e.addEventListener("click",t=>{if(e.matches("[data-menu-link]"))return;const n=(e.getAttribute("href")||"").trim();if(!n.startsWith("#"))return;t.preventDefault(),e.blur();const c=n.slice(1),i=document.getElementById(c)||document.getElementById(`${c}-section`);i&&(Ht(i),Vt=Date.now()+jn,mt(n))})});Y.links.forEach(e=>e.addEventListener("click",async t=>{t.preventDefault(),e.blur();const n=e.getAttribute("href");await Le(),mt(n)}));window.addEventListener("load",()=>{dt(),location.hash&&setTimeout(()=>mt(location.hash),0)});const J=document.querySelector(".overlay"),pe=document.querySelector(".feedback-btn");document.querySelector(".close-btn, .close-icon");const Ne=document.querySelector("#feedback-form"),Ee=document.querySelector(".feedback-section"),Z=document.querySelector(".form-input-name"),K=document.querySelector(".form-input-message"),j=document.getElementById("customer-rating"),ft="myFeedback";pe==null||pe.setAttribute("type","button");const ke={y:0,lock(){this.y=window.scrollY||document.documentElement.scrollTop||0,document.body.style.position="fixed",document.body.style.top=`-${this.y}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%"},unlock(){const e=this.y||0;document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",window.scrollTo(0,e),this.y=0}},Gt="is-error",Ft="touched";function ie(e){if(!e)return;const t=!e.value.trim();e.classList.add(Ft),e.classList.toggle(Gt,t)}[Z,K].forEach(e=>{e&&(e.addEventListener("blur",()=>ie(e)),e.addEventListener("input",()=>ie(e)))});pe==null||pe.addEventListener("click",()=>{J.classList.remove("hidden"),Ee.classList.add("hidden"),ke.lock(),Xn()});var xt;(xt=document.querySelector(".close-btn")||document.querySelector(".close-icon"))==null||xt.addEventListener("click",()=>{J.classList.add("hidden"),Ee.classList.remove("hidden"),ke.unlock(),U(document.getElementById("customer-rating"),parseInt(j.dataset.rating)||0)});J==null||J.addEventListener("click",e=>{e.target===J&&(J.classList.add("hidden"),Ee.classList.remove("hidden"),ke.unlock(),U(document.getElementById("customer-rating"),parseInt(j.dataset.rating)||0))});document.addEventListener("keydown",e=>{e.key==="Escape"&&(J.classList.add("hidden"),Ee.classList.remove("hidden"),ke.unlock(),U(document.getElementById("customer-rating"),parseInt(j.dataset.rating)||0))});function U(e,t=0){if(!e)return;e.innerHTML="";const n=parseInt(t)||0;for(let c=1;c<=5;c++){const i=document.createElement("span");i.classList.add("star"),c<=n&&i.classList.add("filled"),e.appendChild(i),e.id==="customer-rating"&&(i.addEventListener("click",()=>{e.dataset.rating=c,U(e,c),Wn()}),i.addEventListener("mouseenter",()=>Fn(e,c)),i.addEventListener("mouseleave",()=>{const o=parseInt(j.dataset.rating)||0;U(e,o)}))}}function Fn(e,t){e.querySelectorAll(".star").forEach((c,i)=>{i<t?c.classList.add("filled"):c.classList.remove("filled")})}U(j,parseInt(j.dataset.rating)||0);const ce=new Jt(".swiper",{slidesPerView:1,spaceBetween:20,loop:!1,grabCursor:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0}});var Tt;(Tt=document.querySelector(".swiper-button-prev"))==null||Tt.addEventListener("click",()=>ce.slidePrev());var qt;(qt=document.querySelector(".swiper-button-next"))==null||qt.addEventListener("click",()=>ce.slideNext());const At=document.querySelector(".swiper-pagination");At&&(At.innerHTML=`
    <span class="swiper-dots"></span>
    <span class="swiper-dots"></span>
    <span class="swiper-dots"></span>
  `);function Qt(e){const t=document.querySelectorAll(".swiper-dots");t.forEach(n=>n.classList.remove("active")),t[e-1]&&t[e-1].classList.add("active")}function Wt(e){return e===0?1:e===9?3:2}Qt(Wt(ce.realIndex));document.querySelectorAll(".swiper-dots").forEach((e,t)=>{e.addEventListener("click",()=>{const n=[0,1,9];ce.slideTo(n[t]??0)})});ce.on("slideChange",()=>{const e=ce.realIndex;Qt(Wt(e))});function Qn(e){return Array.isArray(e)?e:e&&Array.isArray(e.data)?e.data:e&&Array.isArray(e.feedbacks)?e.feedbacks:e&&Array.isArray(e.results)?e.results:[]}async function Xt(){const e=document.querySelector(".swiper-wrapper");if(e){e.innerHTML="";try{const n=await(await fetch("https://sound-wave.b.goit.study/api/feedbacks")).json();Qn(n).slice(0,10).forEach((i,o)=>{const l=Math.round(Number(i==null?void 0:i.rating)||0),g=document.createElement("div");g.classList.add("swiper-slide"),g.innerHTML=`
        <div class="rating" id="rating-${o}" data-rating="${l}"></div>
        <div class="feedback">
          <p class="customer-feedback">${String((i==null?void 0:i.descr)??"")}</p>
          <h3 class="customer-name">${String((i==null?void 0:i.name)??"")}</h3>
        </div>`,e.appendChild(g),U(g.querySelector(".rating"),l)}),ce.update()}catch{ne.error({title:"Error",message:"Bad request (invalid request params)"})}}}function Wn(){const e={name:Z.value.trim(),message:K.value.trim(),rating:parseInt(j.dataset.rating)||0};localStorage.setItem(ft,JSON.stringify(e))}function Xn(){const e=localStorage.getItem(ft);if(e)try{const t=JSON.parse(e);t!=null&&t.name&&(Z.value=t.name),t!=null&&t.message&&(K.value=t.message),typeof(t==null?void 0:t.rating)<"u"&&(j.dataset.rating=t.rating,U(j,parseInt(t.rating)||0)),[Z,K].forEach(n=>ie(n))}catch{}}function In(){localStorage.removeItem(ft),Ne.reset(),j.dataset.rating=0,U(j,0),[Z,K].forEach(e=>e.classList.remove(Gt,Ft))}Ne==null||Ne.addEventListener("submit",async e=>{e.preventDefault();const t=Z.value.trim(),n=K.value.trim(),c=parseInt(j.dataset.rating)||0,i=[];if(t||(ie(Z),i.push(Z)),n||(ie(K),i.push(K)),i.length)return i[0].focus(),ne.error({message:"Please fill out required fields."});if(t.length<2||t.length>16)return ie(Z),ne.error({message:"Shortest name - 2 letters; Largest name - 16 letters"});if(n.length<10||n.length>512)return ie(K),ne.error({message:"Min message - 10 symbols; Max message - 512 symbols"});if(c<1||c>5)return ne.error({message:"Rating must be between '1' and '5'"});try{const o=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({name:t,descr:n,rating:c})});if(!o.ok)return ne.error({title:"Error:",message:`HTTP ${o.status}`});ne.success({message:"Comment posted, Thank you!",position:"center"}),In(),J.classList.add("hidden"),Ee.classList.remove("hidden"),ke.unlock(),Xt()}catch{ne.error({message:"Bad request (invalid request body)"})}});document.addEventListener("DOMContentLoaded",Xt);
//# sourceMappingURL=index.js.map
